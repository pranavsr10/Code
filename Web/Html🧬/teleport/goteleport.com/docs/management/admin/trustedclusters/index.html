<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Teleport Trusted Clusters | Teleport Docs</title><link rel="icon" href="/docs/favicon.ico"/><link rel="icon" href="/docs/favicon.svg" type="image/svg+xml"/><link rel="apple-touch-icon" href="/docs/apple.png"/><link rel="manifest" href="/docs/manifest.webmanifest"/><link rel="canonical" href="https://goteleport.com/docs/management/admin/trustedclusters/"/><link rel="alternate" href="https://goteleport.com/docs/management/admin/trustedclusters/?scope=enterprise"/><link rel="alternate" href="https://goteleport.com/docs/management/admin/trustedclusters/?scope=cloud"/><meta name="description" content="How to configure access and trust between two Teleport Clusters."/><meta name="author" content="Teleport"/><meta property="og:type" content="website"/><meta property="og:url" content="https://goteleport.com/docs/management/admin/trustedclusters/"/><meta property="og:title" content="Teleport Trusted Clusters | Teleport Docs"/><meta property="og:description" content="How to configure access and trust between two Teleport Clusters."/><meta property="og:image" content="https://goteleport.com/docs/og-image.png"/><meta property="keywords" content=""/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Corporation","name":"Teleport","alternateName":"Gravitational Inc.","url":"https://goteleport.com/","logo":"https://goteleport.com/static/og-image.png","sameAs":["https://www.youtube.com/channel/UCmtTJaeEKYxCjfNGiijOyJw","https://twitter.com/goteleport/","https://www.linkedin.com/company/go-teleport/","https://en.wikipedia.org/wiki/Teleport_(software)"]}</script><script type="application/ld+json">{"@context":"https://schema.org/","@type":"WebSite","name":"Teleport Docs","url":"https://goteleport.com/docs/"}</script><meta name="next-head-count" content="20"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/docs/_next/static/css/c6dd602ff100ae4a.css" as="style"/><link rel="stylesheet" href="/docs/_next/static/css/c6dd602ff100ae4a.css" data-n-g=""/><link rel="preload" href="/docs/_next/static/css/20624e0f84fddaa0.css" as="style"/><link rel="stylesheet" href="/docs/_next/static/css/20624e0f84fddaa0.css" data-n-p=""/><link rel="preload" href="/docs/_next/static/css/3033e8b3fa3c2df2.css" as="style"/><link rel="stylesheet" href="/docs/_next/static/css/3033e8b3fa3c2df2.css" data-n-p=""/><link rel="preload" href="/docs/_next/static/css/479c56a521253b40.css" as="style"/><link rel="stylesheet" href="/docs/_next/static/css/479c56a521253b40.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/docs/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/docs/_next/static/chunks/webpack-61b862719d3243e2.js" defer=""></script><script src="/docs/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/docs/_next/static/chunks/main-372a12fe5dfec65d.js" defer=""></script><script src="/docs/_next/static/chunks/pages/_app-aa34680781cc3468.js" defer=""></script><script src="/docs/_next/static/chunks/664-8af8765c6fed5950.js" defer=""></script><script src="/docs/_next/static/chunks/2-4922d69ea0a12325.js" defer=""></script><script src="/docs/_next/static/chunks/255-c0f594d0df26e243.js" defer=""></script><script src="/docs/_next/static/chunks/414-4e04dc540cf87799.js" defer=""></script><script src="/docs/_next/static/chunks/549-3311516f9b15ee34.js" defer=""></script><script src="/docs/_next/static/chunks/pages/%5B%5B...slug%5D%5D-bff701518348161c.js" defer=""></script><script src="/docs/_next/static/KbTcN-oI1hAAwVIspZTnm/_buildManifest.js" defer=""></script><script src="/docs/_next/static/KbTcN-oI1hAAwVIspZTnm/_ssgManifest.js" defer=""></script></head><body><div id="__next"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WMR7H6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WMR7H6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><header class="Header_wrapper__paEmf"><a href="/" class="Header_logo-link__GOWlP"><svg width="1em" height="1em" viewBox="0 0 121 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="Logo_wrapper__p5G4A"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.894.229a.49.49 0 0 1 .389.325l.017.062.584 2.998a9.175 9.175 0 0 1 2.189 1.204l.245.19 2.949-1.007c.19-.082.393-.023.536.14 1.014 1.137 1.838 2.509 2.316 3.95a.432.432 0 0 1-.091.484l-.052.043-2.34 1.99c.084.445.108.926.108 1.394 0 .377-.016.759-.065 1.124l-.043.271 2.34 1.992a.43.43 0 0 1 .143.527c-.477 1.442-1.3 2.812-2.315 3.948-.128.146-.302.209-.473.163l-.064-.022-2.948-1.008c-.647.521-1.37.95-2.142 1.276l-.292.118-.585 3a.492.492 0 0 1-.406.387c-.764.14-1.528.222-2.315.222-.788 0-1.552-.082-2.316-.222a.492.492 0 0 1-.39-.325l-.016-.062-.584-3a8.87 8.87 0 0 1-2.22-1.221l-.215-.173-2.948 1.008c-.19.082-.393.023-.537-.141C1.338 18.728.515 17.358.038 15.916a.433.433 0 0 1 .091-.484l.052-.043 2.339-1.992a7.673 7.673 0 0 1-.108-1.395c0-.374.015-.757.064-1.123l.044-.27L.18 8.618a.43.43 0 0 1-.143-.527c.477-1.441 1.3-2.813 2.315-3.95a.466.466 0 0 1 .473-.162L2.89 4l2.948 1.007a8.571 8.571 0 0 1 2.17-1.288l.265-.106.584-2.998a.49.49 0 0 1 .406-.387 11.825 11.825 0 0 1 4.63 0Zm65.404 8.039c.59 0 1.135.128 1.636.385a3.75 3.75 0 0 1 1.298 1.114c.364.486.649 1.08.856 1.783.207.704.31 1.501.31 2.394 0 .835-.117 1.606-.354 2.313a5.779 5.779 0 0 1-.992 1.842 4.555 4.555 0 0 1-1.527 1.22 4.382 4.382 0 0 1-1.968.44c-.59 0-1.084-.082-1.483-.246a4.038 4.038 0 0 1-1.091-.664v4.262h-3.38V8.481h2.093l.103.005a.891.891 0 0 1 .426.135.744.744 0 0 1 .3.418l.25.814.167-.173c.17-.169.35-.325.537-.47a4.5 4.5 0 0 1 2.82-.942Zm-29.745.385a5.92 5.92 0 0 0-2.055-.342c-.866 0-1.642.146-2.329.439a5.3 5.3 0 0 0-1.756 1.188 5.183 5.183 0 0 0-1.112 1.746 5.771 5.771 0 0 0-.387 2.11c0 .985.15 1.849.453 2.591.301.743.712 1.364 1.232 1.864s1.127.876 1.821 1.13c.694.253 1.438.38 2.23.38.386 0 .79-.027 1.216-.08.425-.054.85-.15 1.276-.29.425-.139.84-.331 1.243-.578.346-.21.672-.476.978-.794l.151-.164-.981-1.189c-.139-.193-.342-.29-.611-.29-.204 0-.398.047-.583.14-.186.093-.39.196-.611.31a5.16 5.16 0 0 1-.758.311c-.284.093-.622.14-1.014.14-.735 0-1.335-.21-1.8-.627-.434-.39-.713-1.002-.837-1.837l-.024-.182h6.521c.153 0 .278-.018.376-.053a.455.455 0 0 0 .235-.193.954.954 0 0 0 .12-.375c.022-.157.033-.36.033-.61 0-.8-.126-1.516-.377-2.148a4.538 4.538 0 0 0-1.047-1.6 4.48 4.48 0 0 0-1.603-.997Zm16.026-.342a5.92 5.92 0 0 1 2.056.342 4.48 4.48 0 0 1 1.603.996c.447.436.796.97 1.047 1.601.25.632.376 1.348.376 2.148 0 .25-.01.453-.033.61a.954.954 0 0 1-.12.375.454.454 0 0 1-.234.193 1.116 1.116 0 0 1-.376.053h-6.522l.024.182c.124.835.403 1.447.838 1.837.465.418 1.065.626 1.8.626.392 0 .73-.046 1.013-.139a5.16 5.16 0 0 0 .758-.31c.222-.115.426-.218.611-.31.185-.094.38-.14.583-.14.27 0 .473.096.611.289l.982 1.189-.152.164a4.884 4.884 0 0 1-.977.794c-.404.247-.818.44-1.243.579a6.84 6.84 0 0 1-1.276.289c-.426.053-.83.08-1.216.08a6.452 6.452 0 0 1-2.23-.38 5.137 5.137 0 0 1-1.822-1.13c-.52-.5-.93-1.12-1.232-1.863-.302-.743-.453-1.607-.453-2.592 0-.743.13-1.446.388-2.11a5.183 5.183 0 0 1 1.112-1.746A5.3 5.3 0 0 1 63.25 8.75c.687-.293 1.463-.44 2.328-.44Zm27.013.396c-.705-.264-1.486-.396-2.344-.396-.866 0-1.653.132-2.362.396a5.257 5.257 0 0 0-1.832 1.135 5.031 5.031 0 0 0-1.188 1.794c-.28.703-.42 1.494-.42 2.372 0 .885.14 1.683.42 2.394.28.71.676 1.313 1.188 1.81a5.281 5.281 0 0 0 1.832 1.145c.71.268 1.496.402 2.362.402.858 0 1.64-.134 2.344-.402a5.179 5.179 0 0 0 1.816-1.145c.505-.497.898-1.1 1.178-1.81.28-.71.42-1.509.42-2.394 0-.878-.14-1.669-.42-2.372a5.105 5.105 0 0 0-1.178-1.794 5.155 5.155 0 0 0-1.816-1.135Zm18.311-3.449v3.245h2.748v2.27h-2.748v5.516l.004.108c.015.209.078.386.187.53.127.167.31.251.55.251a1.097 1.097 0 0 0 .529-.123c.062-.032.12-.06.175-.086a.452.452 0 0 1 .191-.037.4.4 0 0 1 .245.07c.062.046.125.119.191.219L114 18.795l-.166.117a4.743 4.743 0 0 1-1.306.606c-.546.16-1.109.241-1.691.241-.538 0-1.012-.077-1.423-.23a2.832 2.832 0 0 1-1.036-.654 2.783 2.783 0 0 1-.638-1.022 3.904 3.904 0 0 1-.218-1.339v-5.74h-.96l-.085-.005a.636.636 0 0 1-.362-.161c-.123-.11-.185-.273-.185-.488V8.825l1.799-.343.666-2.71.025-.082c.104-.288.343-.432.716-.432h1.767ZM41.129 6.854v-2.87H28.5v2.87h4.471v12.734h3.686V6.854h4.472ZM58.01 3.556v16.032H54.63V3.556h3.38Zm47.352 5.076c-.313-.243-.727-.364-1.243-.364-.611 0-1.175.182-1.691.546a5.324 5.324 0 0 0-1.256 1.284l-.14.204-.185-1.038a2.131 2.131 0 0 0-.104-.364.574.574 0 0 0-.174-.241.747.747 0 0 0-.284-.134 1.51 1.51 0 0 0-.3-.04l-.12-.003H97.86v11.106h3.38v-6.812c.509-.928 1.207-1.392 2.094-1.392.255 0 .466.016.633.048.167.032.312.049.436.049.145 0 .262-.03.349-.091a.422.422 0 0 0 .154-.232l.021-.084.436-2.442ZM11.578 4.978C7.69 4.978 4.542 8.122 4.542 12s3.15 7.022 7.036 7.022c3.886 0 7.036-3.144 7.036-7.022s-3.15-7.022-7.037-7.022Zm65.872 5.898c.2-.047.423-.07.67-.07.27 0 .513.053.731.16.218.108.406.284.562.53.156.247.278.57.365.97.087.4.131.892.131 1.478 0 .614-.055 1.135-.163 1.563-.11.429-.26.777-.453 1.045-.193.267-.42.462-.682.583a2.023 2.023 0 0 1-.861.182c-.327 0-.64-.055-.938-.166a2.056 2.056 0 0 1-.719-.47l-.11-.113v-4.713a4.87 4.87 0 0 1 .436-.455 2.11 2.11 0 0 1 .475-.326c.17-.086.356-.152.556-.198Zm12.798-.102c-.8 0-1.385.268-1.756.803s-.556 1.353-.556 2.453c0 1.099.185 1.918.556 2.457.37.54.956.809 1.756.809.777 0 1.35-.27 1.717-.809s.55-1.358.55-2.457c0-1.1-.183-1.918-.55-2.453-.367-.536-.94-.803-1.717-.803Zm-74.217.25v-2.09H7.125v2.09h3.393v5.02h2.12v-5.02h3.393Zm31.532-.422c-.647 0-1.152.18-1.516.541-.363.36-.603.88-.72 1.558h4.22a2.88 2.88 0 0 0-.103-.77 1.856 1.856 0 0 0-.338-.67 1.716 1.716 0 0 0-.616-.476c-.255-.122-.564-.183-.927-.183Zm16.566.541c.363-.36.868-.54 1.515-.54.364 0 .673.06.927.181.255.122.46.28.617.477.156.196.269.42.338.67.069.25.103.506.103.77h-4.22c.116-.678.356-1.197.72-1.558Z" fill="currentColor"></path></svg></a><button data-testid="hamburger" class="HeadlessButton_wrapper__L3jt_ Header_hamburger__BKBJN"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 32 32" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M4 7h24v3H4V7Zm0 8h24v3H4v-3Zm24 8H4v3h24v-3Z"></path></svg></button><div class="Header_content__i7YY8"><nav class="Menu_navItems__5s_GH"><div class="Category_wrapper__NHJcf Category_withSubMenus__n_E1o"><a href="/teleport/" class="Category_link__af53E" data-testid="platform">Platform</a><div class="Category_dropdown__h1_k6 Category_withSubCategories__E6VHw" data-testid="platform-menu"><div class="DropdownMenu_wrapper__mSUiY DropdownMenu_asRow__Rn985" data-testid="mobile-dropdown"><div class="DropdownMenu_body__b6rGF DropdownMenu_withSubMenus__nIaqP"><div class="DropdownSubMenu_subMenuWrapper__vgRlB"><h3 class="DropdownSubMenu_title__cNLP2">Platform</h3><div class="DropdownSubMenu_children__LaPtK"><a href="/why-teleport/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Why Teleport</strong></a><a href="/how-it-works/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">How It Works</strong></a></div></div><div class="DropdownSubMenu_subMenuWrapper__vgRlB"><a href="/access-modules/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk DropdownMenuItem_asTitle__3E8d4">Access Modules</strong></a><div class="DropdownSubMenu_children__LaPtK"><a href="/access-modules#ssh" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">SSH</strong></a><a href="/access-modules#kubernetes" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Kubernetes</strong></a><a href="/access-modules#databases" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Databases</strong></a><a href="/access-modules#applications" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Internal Applications</strong></a><a href="/access-modules#windows" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Windows</strong></a></div></div><div class="DropdownSubMenu_subMenuWrapper__vgRlB"><a href="/features/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk DropdownMenuItem_asTitle__3E8d4">Our Features</strong></a><div class="DropdownSubMenu_children__LaPtK"><a href="/features/sso-for-ssh/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Single Sign On</strong></a><a href="/features/access-requests/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Just In Time Access Requests</strong></a><a href="/features/rbac-for-ssh/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Role Based Access Control</strong></a><a href="/how-it-works/audit-logging-for-ssh-and-kubernetes/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Audit and Session Recordings</strong></a><a class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef" href="/docs/access-controls/guides/device-trust/"><strong class="DropdownMenuItem_title__E4Kdk false">Device Trust</strong></a><a href="/passwordless/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Passwordless</strong></a></div></div></div></div></div></div><div class="Category_wrapper__NHJcf Category_withSubMenus__n_E1o"><a href="/" class="Category_link__af53E" data-testid="solutions">Solutions</a><div class="Category_dropdown__h1_k6 Category_withSubCategories__E6VHw" data-testid="solutions-menu"><div class="DropdownMenu_wrapper__mSUiY DropdownMenu_asRow__Rn985" data-testid="mobile-dropdown"><div class="DropdownMenu_body__b6rGF DropdownMenu_withSubMenus__nIaqP"><div class="DropdownSubMenu_subMenuWrapper__vgRlB"><h3 class="DropdownSubMenu_title__cNLP2">By Industry</h3><div class="DropdownSubMenu_children__LaPtK"><a href="/use-cases/ecommerce-entertainment/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">E-commerce &amp; Entertainment</strong></a><a href="/use-cases/finance/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Financial Services</strong></a><a href="/use-cases/saas/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Software-as-a-service (SaaS) Providers</strong></a></div></div><div class="DropdownSubMenu_subMenuWrapper__vgRlB"><h3 class="DropdownSubMenu_title__cNLP2">By Use Case</h3><div class="DropdownSubMenu_children__LaPtK"><a href="/use-cases/privileged-access-management/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Privileged Access Management</strong></a><a href="/use-cases/machine-to-machine-access/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Machine-to-Machine Access</strong></a><a href="/connect/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Developer-friendly browser</strong></a><a href="/passwordless/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Passwordless Infrastructure Access</strong></a></div></div><div class="DropdownSubMenu_subMenuWrapper__vgRlB"><h3 class="DropdownSubMenu_title__cNLP2">By Cloud Provider</h3><div class="DropdownSubMenu_children__LaPtK"><a href="/use-cases/aws/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Infrastructure Access for AWS</strong></a></div></div></div></div></div></div><div class="Category_wrapper__NHJcf"><a href="/integrations/" class="Category_link__af53E" data-testid="integrations">Integrations</a><div class="Category_dropdown__h1_k6" data-testid="integrations-menu"></div></div><div class="Category_wrapper__NHJcf"><a href="/" class="Category_link__af53E" data-testid="docs">Documentation</a><div class="Category_dropdown__h1_k6" data-testid="docs-menu"><div class="DropdownMenu_wrapper__mSUiY false" data-testid="mobile-dropdown"><div class="DropdownMenu_body__b6rGF false"><a href="/docs/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Documentation</strong></a><a class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef" href="/docs/connect-your-client/introduction/"><strong class="DropdownMenuItem_title__E4Kdk false">Teleport Clients</strong></a><a href="/how-it-works/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">How It Works</strong></a><a href="/labs/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Teleport Labs</strong></a><a href="/community/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Teleport Community</strong></a><a href="/slack/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Teleport Slack Channel</strong></a><a href="https://github.com/gravitational/teleport/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">GitHub</strong></a></div></div></div></div><div class="Category_wrapper__NHJcf"><a href="/resources/" class="Category_link__af53E" data-testid="learn">Learn</a><div class="Category_dropdown__h1_k6" data-testid="learn-menu"><div class="DropdownMenu_wrapper__mSUiY false" data-testid="mobile-dropdown"><div class="DropdownMenu_body__b6rGF false"><a href="/blog/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">The Blog</strong></a><a href="/case-study/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Our Customers</strong></a><a href="/resources/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Resources</strong></a><a href="/learn/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Learn</strong></a><a href="/about/events/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Events</strong></a></div></div></div></div><div class="Category_wrapper__NHJcf"><a href="/pricing/" class="Category_link__af53E" data-testid="pricing">Pricing</a><div class="Category_dropdown__h1_k6" data-testid="pricing-menu"></div></div><div class="Category_wrapper__NHJcf"><a href="/about/" class="Category_link__af53E" data-testid="company">Company</a><div class="Category_dropdown__h1_k6" data-testid="company-menu"><div class="DropdownMenu_wrapper__mSUiY false" data-testid="mobile-dropdown"><div class="DropdownMenu_body__b6rGF false"><a href="/about/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">About Us</strong></a><a href="/careers/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Careers</strong></a><a href="/about/press/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">News</strong></a><a href="/partners/" class="Link_wrapper__d2hcr DropdownMenuItem_wrapper__gpXef"><strong class="DropdownMenuItem_title__E4Kdk false">Partners</strong></a></div></div></div></div></nav><div class="HeaderCTA_wrapper__ZN6jn"><div class="HeaderCTA_group__QHFNs"><a href="https://teleport.sh/" data-testid="sign-in" class="Button_wrapper__lzW7u Button_variant-secondary__t9qc1 Button_shape-md__gOiUg HeaderCTA_cta__fZYb5">Sign In</a><div class="HeaderCTA_dropdown__6zh_L" data-testid="sign-in-menu"><div class="DropdownMenuCTA_dropdownContainer__D2yWB"><h3 class="DropdownMenuCTA_title__wGq_C">Sign in to Teleport</h3><div class="DropdownMenuCTA_children__niF1q"><a href="https://teleport.sh/" class="Link_wrapper__d2hcr DropdownMenuCTA_linkContainer__xUG6_"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 32 32" class="Icon_wrapper__8ru25 Icon_md__bLDVV DropdownMenuCTA_icon__8fGMP"><path fill="currentColor" d="M25.009 26.5H10c-3.216 0-5.965-2.037-7.029-4.889A8.982 8.982 0 0 0 10 25h15.009a5.975 5.975 0 0 0 4.351-1.877 4.497 4.497 0 0 1-4.35 3.377Zm4.351-6.377a4.497 4.497 0 0 1-4.35 3.377H10c-3.216 0-5.965-2.037-7.029-4.889A8.982 8.982 0 0 0 10 22h15.009a5.975 5.975 0 0 0 4.351-1.877ZM10 5.5a7.511 7.511 0 0 1 6.141 3.192.75.75 0 0 0 1.362-.386 2.99 2.99 0 0 1 .582-1.585A2.982 2.982 0 0 1 20.501 5.5a2.996 2.996 0 0 1 2.169 5.069.751.751 0 0 0 .803 1.22 4.496 4.496 0 0 1 6.029 4.221 4.496 4.496 0 0 1-4.491 4.492H10c-4.135 0-7.5-3.365-7.5-7.5 0-4.136 3.365-7.5 7.5-7.5V5.5Zm15.009 4.52c-.093 0-.184.001-.276.005A4.43 4.43 0 0 0 25 8.5C25 6.019 22.981 4 20.5 4a4.523 4.523 0 0 0-4.11 2.662A9.01 9.01 0 0 0 10 4c-4.96 0-9 4.038-9 9v6c0 4.962 4.04 9 9 9h15.009A5.998 5.998 0 0 0 31 22.009v-6a5.998 5.998 0 0 0-5.991-5.991v.002Z"></path></svg><strong class="DropdownMenuCTA_itemTitle__px_Fc">Teleport Cloud Login</strong><span class="DropdownMenuCTA_description__hKxNU">Login to your Teleport Account</span></a><a href="https://dashboard.gravitational.com/web/login/" class="Link_wrapper__d2hcr DropdownMenuCTA_linkContainer__xUG6_"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" class="Icon_wrapper__8ru25 Icon_md__bLDVV DropdownMenuCTA_icon__8fGMP"><path fill="currentColor" d="M13.854 8.646a.5.5 0 0 0-.707 0l-3.146 3.146V1.499a.5.5 0 0 0-1 0v10.293L5.855 8.646a.5.5 0 0 0-.707.707l4 4a.498.498 0 0 0 .708 0l4-4a.5.5 0 0 0 0-.707z"></path><path fill="currentColor" d="M9.5 20c-2.488 0-4.834-.542-6.607-1.527C1.027 17.436 0 16.026 0 14.5c0-.978.42-1.878 1.249-2.674.733-.704 1.768-1.308 3.077-1.794a.5.5 0 0 1 .401.915C3.645 11.499 3 12.267 3 13.002c0 .725.647 1.464 1.774 2.028 1.254.627 2.932.972 4.726.972s3.472-.345 4.726-.972C15.353 14.466 16 13.727 16 13.002c0-.735-.646-1.503-1.727-2.055a.501.501 0 0 1 .401-.915c1.309.487 2.344 1.091 3.077 1.794C18.58 12.622 19 13.522 19 14.5c0 1.525-1.027 2.936-2.893 3.973C14.334 19.458 11.988 20 9.5 20zm-7.429-7.571C1.45 12.98 1 13.667 1 14.5c0 1.146.845 2.246 2.379 3.098C5.006 18.502 7.18 19 9.5 19s4.494-.498 6.121-1.402C17.155 16.746 18 15.645 18 14.5c0-.833-.45-1.52-1.071-2.071.047.188.071.378.071.571 0 1.134-.826 2.172-2.327 2.922C13.283 16.617 11.446 17 9.5 17s-3.783-.383-5.173-1.078C2.827 15.172 2 14.134 2 13c0-.193.024-.383.071-.571z"></path></svg><strong class="DropdownMenuCTA_itemTitle__px_Fc">Dashboard Login</strong><span class="DropdownMenuCTA_description__hKxNU">Legacy Login &amp; Teleport Enterprise Downloads</span></a></div></div></div></div><a href="/pricing/" data-testid="get-started" class="Button_wrapper__lzW7u Button_variant-primary__go4ph Button_shape-md__gOiUg HeaderCTA_cta__fZYb5">Get Started</a></div></div></header><main class="DocsPage_wrapper__n_ElH"><div class="DocsPage_navigation__1Q4ed"><div class="Navigation_wrapper__oMx9x"><div class="Navigation_searchbar__PFVC1"><div class="Search_wrapper-autocomplete__nR_OJ"></div><button class="HeadlessButton_wrapper__L3jt_ Navigation_menu__wuHWQ"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 32 32" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M4 7h24v3H4V7Zm0 8h24v3H4v-3Zm24 8H4v3h24v-3Z"></path></svg></button></div><nav class="Navigation_nav__yCWcq"><ul class="Navigation_categories__45fSt"><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" d="M.6 14.249a.575.575 0 0 1-.402-.166.676.676 0 0 1-.042-.91L10.75.605C11.08.215 11.523 0 12 0s.92.215 1.25.605l10.595 12.568a.678.678 0 0 1-.042.91.572.572 0 0 1-.847-.046L12.362 1.47a.472.472 0 0 0-.36-.182.472.472 0 0 0-.36.182L1.047 14.037a.583.583 0 0 1-.445.213zm17.882 9.001H5.518c-.975 0-1.768-.808-1.768-1.8v-9.6c0-.331.264-.6.59-.6.325 0 .589.269.589.6v9.6c0 .331.264.6.589.6h12.964c.325 0 .59-.269.59-.6v-9.6c0-.331.263-.6.589-.6.325 0 .589.269.589.6v9.6c0 .992-.793 1.8-1.768 1.8z"></path></svg><div class="Navigation_category-title__UJR2k">Home</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" d="M8.387 19.355a.65.65 0 0 1-.312-.08.632.632 0 0 1-.333-.554V6.052a.63.63 0 0 1 .333-.553.656.656 0 0 1 .654.016l10.323 6.335a.631.631 0 0 1 .303.537.632.632 0 0 1-.303.537L8.729 19.26a.65.65 0 0 1-.342.096zm.645-12.16V17.58l8.46-5.192zM12 24a11.924 11.924 0 0 1-8.486-3.514A11.916 11.916 0 0 1 0 12c0-3.206 1.248-6.218 3.514-8.486A11.918 11.918 0 0 1 12 0a11.92 11.92 0 0 1 8.486 3.515A11.92 11.92 0 0 1 24 12.001a11.92 11.92 0 0 1-3.514 8.485A11.922 11.922 0 0 1 12 24zm0-22.737C6.08 1.263 1.263 6.08 1.263 12S6.08 22.737 12 22.737 22.737 17.92 22.737 12 17.92 1.263 12 1.263z"></path></svg><div class="Navigation_category-title__UJR2k">Try out Teleport</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 32 32" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" d="m11.435 22.763-5.182-4.876a.78.78 0 0 1 0-1.149.903.903 0 0 1 1.221 0l4.571 4.3 11.481-10.8a.903.903 0 0 1 1.221 0 .78.78 0 0 1 0 1.149L12.655 22.763a.889.889 0 0 1-.61.237.896.896 0 0 1-.61-.237zM16 32a15.9 15.9 0 0 1-11.315-4.685A15.888 15.888 0 0 1 0 16.002 15.9 15.9 0 0 1 4.685 4.687 15.891 15.891 0 0 1 16 0c4.275 0 8.291 1.664 11.315 4.687A15.892 15.892 0 0 1 32 16.002c0 4.274-1.664 8.291-4.685 11.313A15.896 15.896 0 0 1 16 32zm0-30.316C8.106 1.684 1.684 8.106 1.684 16c0 7.894 6.422 14.316 14.316 14.316 7.894 0 14.316-6.422 14.316-14.316 0-7.894-6.422-14.316-14.316-14.316z"></path></svg><div class="Navigation_category-title__UJR2k">Choose an Edition</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" d="M6.179 15c.696 0 1.346.299 1.935.886.93.93.963 1.856.827 2.469-.426 1.925-3.146 3.811-8.084 5.607A.65.65 0 0 1 .639 24v-.001a.637.637 0 0 1-.6-.856C2.004 17.74 4.071 15 6.179 15ZM24 0v.592c0 3.073-.521 5.812-1.55 8.14-.847 1.92-2.036 3.564-3.535 4.886a13.22 13.22 0 0 1-.847.687c-.069 1.021-.474 2.064-1.208 3.108-.62.882-1.48 1.768-2.555 2.635-1.805 1.456-3.585 2.351-3.66 2.39a.593.593 0 0 1-.683-.949c.005-.005.56-.57 1.108-1.536.45-.796.98-2.023 1.073-3.507-.96-.375-2.11-1.45-2.625-1.964-.515-.515-1.589-1.664-1.964-2.625-1.484.094-2.711.623-3.507 1.073-.965.546-1.531 1.103-1.537 1.109a.594.594 0 0 1-.765.059.592.592 0 0 1-.183-.744c.038-.074.933-1.854 2.39-3.659.867-1.074 1.753-1.934 2.635-2.554 1.042-.734 2.087-1.14 3.108-1.208.212-.284.44-.567.687-.847 1.323-1.499 2.966-2.688 4.886-3.536C17.598.522 20.336.001 23.409.001L23.408 0H24ZM6.18 16.276c-.632 0-1.376.554-2.152 1.602-.762 1.03-1.528 2.5-2.283 4.376 1.705-.685 3.075-1.381 4.085-2.075 1.363-.936 1.767-1.66 1.865-2.102.098-.441-.06-.864-.484-1.288-.345-.345-.682-.512-1.032-.512l.001-.001Zm10.512-1.068c-1.346.767-2.583 1.165-3.366 1.308a9.19 9.19 0 0 1-.94 3.487V20l.225-.156c1.517-1.075 3.292-2.628 3.985-4.374Zm6.119-14.014c-4.959.12-8.94 1.731-11.54 4.677-2.173 2.463-2.665 5.014-2.665 5.381 0 .003.005.245.466.9.32.455.778.987 1.285 1.494a11.99 11.99 0 0 0 1.494 1.285c.654.46.897.465.9.465.366 0 2.917-.492 5.38-2.665 2.95-2.599 4.56-6.579 4.68-11.537ZM8.794 7.309c-1.945.638-3.67 2.67-4.8 4.307a9.22 9.22 0 0 1 3.49-.94c.143-.784.541-2.02 1.31-3.367ZM16.125 6a2.629 2.629 0 0 1 2.625 2.625 2.629 2.629 0 0 1-2.625 2.625A2.629 2.629 0 0 1 13.5 8.625 2.629 2.629 0 0 1 16.125 6Zm0 1.05c-.868 0-1.575.707-1.575 1.575s.707 1.575 1.575 1.575S17.7 9.493 17.7 8.625s-.707-1.575-1.575-1.575Z"></path></svg><div class="Navigation_category-title__UJR2k">Deploy a Cluster</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" d="M9.5 11C6.467 11 4 8.533 4 5.5S6.467 0 9.5 0 15 2.467 15 5.5 12.533 11 9.5 11zm0-10C7.019 1 5 3.019 5 5.5S7.019 10 9.5 10 14 7.981 14 5.5 11.981 1 9.5 1zm2 19h-10C.673 20 0 19.327 0 18.5c0-.068.014-1.685 1.225-3.3.705-.94 1.67-1.687 2.869-2.219C5.558 12.33 7.377 12 9.5 12c1.104 0 2.135.09 3.064.267a.501.501 0 0 1-.187.983 15.495 15.495 0 0 0-2.877-.249c-3.516 0-6.101.968-7.475 2.8C1.012 17.152 1 18.488 1 18.501a.5.5 0 0 0 .5.5h10a.5.5 0 0 1 0 1zm7.5-5.914V13.5c0-1.378-1.122-2.5-2.5-2.5S14 12.122 14 13.5v.586c-.582.206-1 .762-1 1.414v3c0 .827.673 1.5 1.5 1.5h4c.827 0 1.5-.673 1.5-1.5v-3c0-.652-.418-1.208-1-1.414zM16.5 12c.827 0 1.5.673 1.5 1.5v.5h-3v-.5c0-.827.673-1.5 1.5-1.5zm2.5 6.5a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v3z"></path></svg><div class="Navigation_category-title__UJR2k">Manage Access</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs Navigation_opened__0a4da"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" d="M16.75 20.013a2.257 2.257 0 0 1-1.597-.655l-.002-.002-7.71-7.709A5.506 5.506 0 0 1 .486 4.235a.5.5 0 0 1 .809-.148l2.912 2.912H6V5.206L3.081 2.287a.498.498 0 0 1 .148-.809A5.555 5.555 0 0 1 5.501.999c3.033 0 5.5 2.467 5.5 5.5 0 .663-.12 1.312-.357 1.936l7.704 7.704c.43.425.668.992.671 1.596s-.231 1.173-.656 1.604a2.248 2.248 0 0 1-1.613.673zm-.894-1.365c.239.236.557.366.894.366.342 0 .662-.133.901-.376a1.264 1.264 0 0 0-.007-1.787l-.002-.002L9.7 8.907a.5.5 0 0 1-.102-.56A4.458 4.458 0 0 0 10 6.5C10 4.019 7.981 2 5.5 2c-.392 0-.78.049-1.15.143l2.504 2.504A.5.5 0 0 1 7 5.001v2.5a.5.5 0 0 1-.5.5H4a.504.504 0 0 1-.354-.146l-2.5-2.5a4.505 4.505 0 0 0 6.205 5.249.5.5 0 0 1 .56.102l7.944 7.943z"></path></svg><div class="Navigation_category-title__UJR2k">Manage your Cluster</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button><ul class="Navigation_category-links__WjAY9"><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/introduction/">Introduction<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB Navigation_active__N4ige" href="/docs/management/admin/">Admin Guides<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_ellipsis__CnFw5"><g fill="currentColor"><circle cx="57.264" cy="256" r="57.264"></circle><circle cx="256" cy="256" r="57.264"></circle><circle cx="454.736" cy="256" r="57.264"></circle></g></svg></a><ul class="Navigation_submenu__f9ctS Navigation_opened__0a4da"><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/admin/adding-nodes/">Adding Nodes<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB Navigation_active__N4ige Navigation_selected__CPqGG" href="/docs/management/admin/trustedclusters/">Trusted Clusters<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/admin/labels/">Labels<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/admin/users/">Local Users<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/admin/troubleshooting/">Troubleshooting<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/admin/upgrading-the-teleport-binary/">Upgrading the Teleport Binary<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/admin/daemon/">Run Teleport as a Daemon<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/admin/self-signed-certs/">Run Teleport with Self-Signed Certificates<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/admin/uninstall-teleport/">Uninstall Teleport<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li></ul></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/operations/">Operations<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_ellipsis__CnFw5"><g fill="currentColor"><circle cx="57.264" cy="256" r="57.264"></circle><circle cx="256" cy="256" r="57.264"></circle><circle cx="454.736" cy="256" r="57.264"></circle></g></svg></a><ul class="Navigation_submenu__f9ctS"><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/operations/scaling/">Scaling<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ Navigation_non-visible__Lb5_n" aria-label="" aria-hidden="true"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/operations/upgrading/">Upgrading a Cluster<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/operations/backup-restore/">Backup and Restore<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ Navigation_non-visible__Lb5_n" aria-label="" aria-hidden="true"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/operations/ca-rotation/">Cert Authority Rotation<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/operations/tls-routing/">TLS Routing Migration<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ Navigation_non-visible__Lb5_n" aria-label="" aria-hidden="true"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/operations/proxy-peering/">Proxy Peering Migration (Preview)<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ Navigation_non-visible__Lb5_n" aria-label="" aria-hidden="true"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ Navigation_non-visible__Lb5_n" aria-label="" aria-hidden="true"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li></ul></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/security/">Security<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_ellipsis__CnFw5"><g fill="currentColor"><circle cx="57.264" cy="256" r="57.264"></circle><circle cx="256" cy="256" r="57.264"></circle><circle cx="454.736" cy="256" r="57.264"></circle></g></svg></a><ul class="Navigation_submenu__f9ctS"><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/security/reduce-blast-radius/">Reducing the Blast Radius of Attacks<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li></ul></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/guides/">Integrations<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_ellipsis__CnFw5"><g fill="currentColor"><circle cx="57.264" cy="256" r="57.264"></circle><circle cx="256" cy="256" r="57.264"></circle><circle cx="454.736" cy="256" r="57.264"></circle></g></svg></a><ul class="Navigation_submenu__f9ctS"><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/guides/teleport-operator/">Kubernetes Operator (Preview)<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/guides/terraform-provider/">Terraform Provider<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/guides/docker/">Docker<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/guides/ec2-tags/">EC2 Tags<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/guides/joining-nodes-aws-iam/">Joining Nodes via AWS IAM<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/guides/joining-nodes-aws-ec2/">Joining Nodes via AWS EC2<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ Navigation_non-visible__Lb5_n" aria-label="" aria-hidden="true"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/guides/joining-nodes-azure/">Joining Nodes via Azure<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/guides/ssh-key-extensions/">Using Teleport&#x27;s CA with GitHub<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li></ul></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/diagnostics/">Diagnostics<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_ellipsis__CnFw5"><g fill="currentColor"><circle cx="57.264" cy="256" r="57.264"></circle><circle cx="256" cy="256" r="57.264"></circle><circle cx="454.736" cy="256" r="57.264"></circle></g></svg></a><ul class="Navigation_submenu__f9ctS"><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/diagnostics/monitoring/">Health Monitoring<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/diagnostics/metrics/">Metrics<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/diagnostics/profiles/">Collecting Profiles<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/diagnostics/tracing/">Distributed Tracing<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ" aria-label="oss" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li></ul></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/export-audit-events/">Exporting Audit Events<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_ellipsis__CnFw5"><g fill="currentColor"><circle cx="57.264" cy="256" r="57.264"></circle><circle cx="256" cy="256" r="57.264"></circle><circle cx="454.736" cy="256" r="57.264"></circle></g></svg></a><ul class="Navigation_submenu__f9ctS"><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/export-audit-events/fluentd/">Export Audit Events to Fluentd<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ Navigation_non-visible__Lb5_n" aria-label="" aria-hidden="true"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/export-audit-events/datadog/">Export Audit Events to Datadog<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ Navigation_non-visible__Lb5_n" aria-label="" aria-hidden="true"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/export-audit-events/elastic-stack/">Export Audit Events to the Elastic Stack<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ Navigation_non-visible__Lb5_n" aria-label="" aria-hidden="true"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li><li><a class="Link_wrapper__d2hcr Navigation_link__KUYoB" href="/docs/management/export-audit-events/splunk/">Export Audit Events to Splunk<ul class="Navigation_scope-list__DOwml"><li class="Navigation_scope-item__4ZQzQ Navigation_non-visible__Lb5_n" aria-label="" aria-hidden="true"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="enterprise" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg></li><li class="Navigation_scope-item__4ZQzQ" aria-label="cloud" aria-hidden="false"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_xxs__eAIRp"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg></li></ul></a></li></ul></li></ul></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="1em" height="1em" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" d="m15.98 9.15.39-2.16s.09.01.13.01C18.43 7 20 5.43 20 3.5S18.43 0 16.5 0c-1.68 0-3.08 1.19-3.42 2.77L5.94 4.42A3.003 3.003 0 0 0 3 2C1.35 2 0 3.35 0 5s1.35 3 3 3c.08 0 .15 0 .22-.01l.57 6.27A3.01 3.01 0 0 0 2 17c0 1.65 1.35 3 3 3s3-1.35 3-3c0-.23-.03-.45-.08-.67l1.25-.25c.68 2.3 2.82 3.98 5.33 3.98 3.06 0 5.56-2.5 5.56-5.56 0-2.55-1.73-4.71-4.08-5.35ZM16.5 1a2.5 2.5 0 0 1 0 5 2.5 2.5 0 0 1 0-5ZM5.96 5.45l7.06-1.63c.12 1.4 1.08 2.57 2.37 2.99L15 8.97c-.17-.02-.33-.03-.5-.03-1.54 0-2.94.63-3.95 1.65L5.6 6.49c.18-.32.31-.67.36-1.04ZM3.13 6.99S3.04 7 3 7c-1.1 0-2-.9-2-2s.9-2 2-2a2.007 2.007 0 0 1 2 2c0 .25-.04.48-.13.7-.01.05-.03.09-.06.14-.14.31-.36.58-.64.78-.02.02-.04.03-.06.05-.29.19-.62.3-.98.32ZM5 19c-1.1 0-2-.9-2-2 0-.69.36-1.3.89-1.67.29-.19.62-.3.98-.32.04-.01.09-.01.13-.01.56 0 1.07.23 1.42.61.26.25.44.56.52.91.04.15.06.31.06.48 0 1.1-.9 2-2 2Zm3.94-4.5c0 .2.01.4.03.6l-1.44.28A3.014 3.014 0 0 0 5 14c-.08 0-.15 0-.22.01l-.57-6.27c.27-.12.52-.28.74-.47l4.96 4.1c-.61.89-.97 1.97-.97 3.13Zm5.56 4.44c-1.98 0-3.65-1.29-4.23-3.08-.1-.32-.17-.65-.19-.99-.01-.12-.02-.24-.02-.37 0-.89.27-1.73.72-2.42.18-.28.4-.54.64-.78a4.46 4.46 0 0 1 3.38-1.23c.34.02.67.08.98.18 1.83.55 3.16 2.25 3.16 4.25 0 2.45-1.99 4.44-4.44 4.44Z"></path></svg><div class="Navigation_category-title__UJR2k">Connect your Client</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 18" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><g fill="currentColor" fill-rule="evenodd"><path d="M18.5 17h-17a.5.5 0 0 1-.5-.5V5h18v11.5a.5.5 0 0 1-.5.5M1.5 1h17a.5.5 0 0 1 .5.5V4H1V1.5a.5.5 0 0 1 .5-.5m17-1h-17C.673 0 0 .673 0 1.5v15c0 .827.673 1.5 1.5 1.5h17c.827 0 1.5-.673 1.5-1.5v-15c0-.827-.673-1.5-1.5-1.5"></path><path d="M3 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m2 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m2 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0"></path></g></svg><div class="Navigation_category-title__UJR2k">Application Access</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 18 20" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" fill-rule="evenodd" d="M16.105 1H1.895c-.523 0-.948.448-.948 1v2c0 .552.425 1 .948 1h14.21c.523 0 .948-.448.948-1V2c0-.552-.425-1-.948-1ZM1.895 0C.848 0 0 .895 0 2v2c0 1.105.848 2 1.895 2h14.21C17.152 6 18 5.105 18 4V2c0-1.105-.848-2-1.895-2H1.895Z"></path><path fill="currentColor" fill-rule="evenodd" d="M16 3a1 1 0 0 1-1 1h-2a1 1 0 1 1 0-2h2a1 1 0 0 1 1 1Zm0 14a1 1 0 0 0-1-1h-2a1 1 0 1 0 0 2h2a1 1 0 0 0 1-1Z"></path><path fill="currentColor" fill-rule="evenodd" d="M16.105 19H1.895c-.523 0-.948-.448-.948-1v-2c0-.552.425-1 .948-1h14.21c.523 0 .948.448.948 1v2c0 .552-.425 1-.948 1Zm-14.21 1C.848 20 0 19.105 0 18v-2c0-1.105.848-2 1.895-2h14.21c1.047 0 1.895.895 1.895 2v2c0 1.105-.848 2-1.895 2H1.895Z"></path><path fill="currentColor" fill-rule="evenodd" d="M16 17a1 1 0 0 0-1-1h-2a1 1 0 1 0 0 2h2a1 1 0 0 0 1-1Z"></path><path fill="currentColor" d="M11 17a1 1 0 1 0-2 0 1 1 0 0 0 2 0Zm-3 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0Z"></path><path fill="currentColor" fill-rule="evenodd" d="M16.105 8H1.895c-.523 0-.948.448-.948 1v2c0 .552.425 1 .948 1h14.21c.523 0 .948-.448.948-1V9c0-.552-.425-1-.948-1ZM1.895 7C.848 7 0 7.895 0 9v2c0 1.105.848 2 1.895 2h14.21C17.152 13 18 12.105 18 11V9c0-1.105-.848-2-1.895-2H1.895Z"></path><path fill="currentColor" fill-rule="evenodd" d="M16 10a1 1 0 0 1-1 1h-2a1 1 0 1 1 0-2h2a1 1 0 0 1 1 1Z"></path><path fill="currentColor" d="M11 10a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm0-7a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm-3 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm0-7a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path><path fill="currentColor" fill-rule="evenodd" d="M9 8V6h1v2H9Zm0 6v-2h1v2H9Z"></path></svg><div class="Navigation_category-title__UJR2k">Server Access</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" d="m10.204 14.35.007.01-.999 2.413a5.171 5.171 0 0 1-2.075-2.597l2.578-.437.004.005a.44.44 0 0 1 .484.606zm-.833-2.129a.44.44 0 0 0 .173-.756l.002-.011L7.585 9.7a5.143 5.143 0 0 0-.73 3.255l2.514-.725.002-.009zm1.145-1.98a.44.44 0 0 0 .699-.337l.01-.005.15-2.62a5.144 5.144 0 0 0-3.01 1.442l2.147 1.523.004-.002zm.76 2.75.723.349.722-.347.18-.78-.5-.623h-.804l-.5.623.179.779zm1.5-3.095a.44.44 0 0 0 .7.336l.008.003 2.134-1.513a5.188 5.188 0 0 0-2.992-1.442l.148 2.615.002.001zm10.876 5.97-5.773 7.181a1.6 1.6 0 0 1-1.248.594l-9.261.003a1.6 1.6 0 0 1-1.247-.596l-5.776-7.18a1.583 1.583 0 0 1-.307-1.34L2.1 5.573c.108-.47.425-.864.863-1.073L11.305.513a1.606 1.606 0 0 1 1.385 0l8.345 3.985c.438.209.755.604.863 1.073l2.062 8.955c.108.47-.005.963-.308 1.34zm-3.289-2.057c-.042-.01-.103-.026-.145-.034-.174-.033-.315-.025-.479-.038-.35-.037-.638-.067-.895-.148-.105-.04-.18-.165-.216-.216l-.201-.059a6.45 6.45 0 0 0-.105-2.332 6.465 6.465 0 0 0-.936-2.163c.052-.047.15-.133.177-.159.008-.09.001-.183.094-.282.197-.185.444-.338.743-.522.142-.084.273-.137.415-.242.032-.024.076-.062.11-.089.24-.191.295-.52.123-.736-.172-.216-.506-.236-.745-.045-.034.027-.08.062-.111.088-.134.116-.217.23-.33.35-.246.25-.45.458-.673.609-.097.056-.239.037-.303.033l-.19.135a6.545 6.545 0 0 0-4.146-2.003l-.012-.223c-.065-.062-.143-.115-.163-.25-.022-.268.015-.557.057-.905.023-.163.061-.298.068-.475.001-.04-.001-.099-.001-.142 0-.306-.224-.555-.5-.555-.275 0-.499.249-.499.555l.001.014c0 .041-.002.092 0 .128.006.177.044.312.067.475.042.348.078.637.056.906a.545.545 0 0 1-.162.258l-.012.211a6.424 6.424 0 0 0-4.166 2.003 8.373 8.373 0 0 1-.18-.128c-.09.012-.18.04-.297-.029-.223-.15-.427-.358-.673-.608-.113-.12-.195-.234-.329-.349a2.691 2.691 0 0 0-.111-.088.594.594 0 0 0-.348-.132.481.481 0 0 0-.398.176c-.172.216-.117.546.123.737l.007.005.104.083c.142.105.272.159.414.242.299.185.546.338.743.522.076.082.09.226.1.288l.16.143a6.462 6.462 0 0 0-1.02 4.506l-.208.06c-.055.072-.133.184-.215.217-.257.081-.546.11-.895.147-.164.014-.305.006-.48.039-.037.007-.09.02-.133.03l-.004.002-.007.002c-.295.071-.484.342-.423.608.061.267.349.429.645.365l.007-.001.01-.003.129-.029c.17-.046.294-.113.448-.172.33-.118.604-.217.87-.256.112-.009.23.069.288.101l.217-.037a6.5 6.5 0 0 0 2.88 3.596l-.09.218c.033.084.069.199.044.282-.097.252-.263.517-.452.813-.091.136-.185.242-.268.399-.02.037-.045.095-.064.134-.128.275-.034.591.213.71.248.12.556-.007.69-.282v-.002c.02-.039.046-.09.062-.127.07-.162.094-.301.144-.458.132-.332.205-.68.387-.897.05-.06.13-.082.215-.105l.113-.205a6.453 6.453 0 0 0 4.609.012l.106.192c.086.028.18.042.256.155.136.232.229.507.342.84.05.156.074.295.145.457.016.037.043.09.062.129.133.276.442.402.69.282.247-.118.341-.435.213-.71-.02-.039-.045-.096-.065-.134-.083-.156-.177-.261-.268-.398-.19-.296-.346-.541-.443-.793-.04-.13.007-.21.038-.294-.018-.022-.059-.144-.083-.202a6.499 6.499 0 0 0 2.88-3.622c.064.01.176.03.213.038.075-.05.144-.114.28-.104.266.039.54.138.87.256.154.06.277.128.448.173.036.01.088.019.13.028l.009.003.007.001c.297.064.584-.098.645-.365.06-.266-.128-.537-.423-.608zM16.4 9.701l-1.95 1.746v.005a.44.44 0 0 0 .173.757l.003.01 2.526.728a5.199 5.199 0 0 0-.108-1.674A5.208 5.208 0 0 0 16.4 9.7zm-4.013 5.325a.437.437 0 0 0-.404-.232.44.44 0 0 0-.372.233h-.002l-1.268 2.292a5.164 5.164 0 0 0 3.326.003l-1.27-2.296h-.01zm1.888-1.293a.44.44 0 0 0-.27.036.44.44 0 0 0-.214.572l-.003.004 1.01 2.438a5.15 5.15 0 0 0 2.081-2.615l-2.6-.44-.004.005z"></path></svg><div class="Navigation_category-title__UJR2k">Kubernetes Access</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" d="M18.067 1.609c-.497-.326-1.193-.615-2.069-.858-1.742-.484-4.05-.75-6.498-.75s-4.756.267-6.498.75c-.877.243-1.573.532-2.069.858C.314 2.016 0 2.483 0 3v12c0 .517.314.985.933 1.391.497.326 1.193.615 2.069.858 1.742.484 4.05.75 6.498.75s4.756-.267 6.498-.751c.877-.243 1.573-.532 2.069-.858.619-.406.933-.874.933-1.391v-12c0-.517-.314-.985-.933-1.391zM3.27 1.714C4.928 1.254 7.14 1 9.5 1s4.573.254 6.23.714C17.525 2.213 18 2.773 18 3s-.474.787-2.27 1.286C14.072 4.746 11.86 5 9.5 5s-4.573-.254-6.23-.714C1.475 3.787 1 3.227 1 3s.474-.787 2.27-1.286zm12.46 14.572c-1.658.46-3.87.714-6.23.714s-4.573-.254-6.23-.714C1.475 15.787 1 15.227 1 15v-2.566c.492.309 1.164.583 2.002.816 1.742.484 4.05.75 6.498.75s4.756-.267 6.498-.751c.838-.233 1.511-.507 2.002-.816v2.566c0 .227-.474.787-2.27 1.286zm0-4c-1.658.46-3.87.714-6.23.714s-4.573-.254-6.23-.714C1.475 11.787 1 11.227 1 11V8.434c.492.309 1.164.583 2.002.816 1.742.484 4.05.75 6.498.75s4.756-.267 6.498-.75c.838-.233 1.511-.507 2.002-.816V11c0 .227-.474.787-2.27 1.286zm0-4C14.072 8.746 11.86 9 9.5 9s-4.573-.254-6.23-.714C1.475 7.787 1 7.227 1 7V4.434c.492.309 1.164.583 2.002.816C4.744 5.734 7.052 6 9.5 6s4.756-.267 6.498-.75c.838-.233 1.511-.507 2.002-.816V7c0 .227-.474.787-2.27 1.286z"></path></svg><div class="Navigation_category-title__UJR2k">Database Access</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" d="M18.5 1h-17C.673 1 0 1.673 0 2.5v13c0 .827.673 1.5 1.5 1.5h5.191L6 18.382a2.983 2.983 0 0 1-.409.635.501.501 0 0 0 .128.983h8.561a.5.5 0 0 0 .128-.983 2.996 2.996 0 0 1-.409-.635L13.308 17h5.191c.827 0 1.5-.673 1.5-1.5v-13c0-.827-.673-1.5-1.5-1.5zm-17 1h17a.5.5 0 0 1 .5.5V12H1V2.5a.5.5 0 0 1 .5-.5zm11.606 16.829c.029.058.059.115.09.171h-6.39c.031-.056.061-.113.09-.171L7.811 17h4.382l.915 1.829zM18.5 16h-17a.5.5 0 0 1-.5-.5V13h18v2.5a.5.5 0 0 1-.5.5z"></path><path fill="currentColor" d="M10.5 15h-1a.5.5 0 0 1 0-1h1a.5.5 0 0 1 0 1z"></path></svg><div class="Navigation_category-title__UJR2k">Desktop Access</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" d="M18.5 10a.5.5 0 0 0 0-1H17V8h1.5a.5.5 0 0 0 0-1H17V5.5a.504.504 0 0 0-.146-.354l-2-2A.5.5 0 0 0 14.5 3H13V1.5a.5.5 0 0 0-1 0V3h-1V1.5a.5.5 0 0 0-1 0V3H9V1.5a.5.5 0 0 0-1 0V3H7V1.5a.5.5 0 0 0-1 0V3H4.5a.504.504 0 0 0-.354.146l-2 2A.5.5 0 0 0 2 5.5V7H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2v1.5c0 .133.053.26.146.354l2 2A.5.5 0 0 0 4.5 18H6v1.5a.5.5 0 0 0 1 0V18h1v1.5a.5.5 0 0 0 1 0V18h1v1.5a.5.5 0 0 0 1 0V18h1v1.5a.5.5 0 0 0 1 0V18h1.5c.133 0 .26-.053.354-.146l2-2A.5.5 0 0 0 17 15.5V14h1.5a.5.5 0 0 0 0-1H17v-1h1.5a.5.5 0 0 0 0-1H17v-1h1.5zM16 15.293 14.293 17H4.707L3 15.293V5.707L4.707 4h9.586L16 5.707v9.586z"></path><path fill="currentColor" d="M5.5 16c-.827 0-1.5-.673-1.5-1.5S4.673 13 5.5 13s1.5.673 1.5 1.5S6.327 16 5.5 16zm0-2a.5.5 0 1 0 0 1 .5.5 0 0 0 0-1z"></path></svg><div class="Navigation_category-title__UJR2k">Machine ID</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" fill-rule="evenodd" d="M1.875 8.25A1.877 1.877 0 0 1 0 6.375C0 5.341.841 4.5 1.875 4.5s1.875.841 1.875 1.875A1.877 1.877 0 0 1 1.875 8.25Zm0-2.5a.625.625 0 1 0 0 1.25.625.625 0 0 0 0-1.25Zm21.516 1H5.109c-.336 0-.609-.336-.609-.75s.273-.75.61-.75h18.28c.337 0 .61.336.61.75s-.273.75-.61.75ZM5.109 13.5h18.282c.336 0 .609-.336.609-.75s-.273-.75-.61-.75H5.11c-.337 0-.61.336-.61.75s.273.75.61.75Zm0 6h18.282c.336 0 .609-.336.609-.75s-.273-.75-.61-.75H5.11c-.337 0-.61.336-.61.75s.273.75.61.75ZM0 12.375c0 1.034.841 1.875 1.875 1.875a1.877 1.877 0 0 0 1.875-1.875A1.877 1.877 0 0 0 1.875 10.5 1.877 1.877 0 0 0 0 12.375Zm1.25 0a.625.625 0 1 1 1.25 0 .625.625 0 0 1-1.25 0Zm.625 7.875A1.877 1.877 0 0 1 0 18.375C0 17.341.841 16.5 1.875 16.5s1.875.841 1.875 1.875a1.877 1.877 0 0 1-1.875 1.875Zm0-2.5a.625.625 0 1 0 0 1.25.625.625 0 0 0 0-1.25Z"></path></svg><div class="Navigation_category-title__UJR2k">API</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" fill-rule="evenodd" d="M14.067 8.174c0 .347.271.629.605.629a.618.618 0 0 0 .606-.629c0-1.733 1.358-3.144 3.027-3.144a.618.618 0 0 0 .605-.629.618.618 0 0 0-.605-.628c-1.669 0-3.027-1.411-3.027-3.144A.618.618 0 0 0 14.672 0a.618.618 0 0 0-.605.629c0 1.733-1.358 3.144-3.026 3.144a.618.618 0 0 0-.606.628c0 .347.271.63.606.63 1.668 0 3.026 1.41 3.026 3.143Zm.605-2.265a4.366 4.366 0 0 0-1.451-1.508 4.366 4.366 0 0 0 1.451-1.507A4.368 4.368 0 0 0 16.124 4.4a4.368 4.368 0 0 0-1.451 1.508ZM2.566 12.575a.618.618 0 0 1-.605-.628.618.618 0 0 0-.606-.63.618.618 0 0 1-.605-.628c0-.347.271-.629.605-.629a.618.618 0 0 0 .606-.629c0-.347.27-.628.605-.628.334 0 .605.281.605.628 0 .348.271.63.606.63.334 0 .605.28.605.628a.618.618 0 0 1-.605.629.618.618 0 0 0-.606.629.618.618 0 0 1-.605.628Zm7.338-5.843L22.72 20.044c.341.356.53.828.53 1.334 0 .506-.188.978-.53 1.334l-.71.737a1.773 1.773 0 0 1-2.569 0L6.625 10.137a1.914 1.914 0 0 1-.53-1.334c0-.506.188-.979.53-1.335l.71-.736a1.773 1.773 0 0 1 2.569 0Zm-1.712.889-.71.737h.002a.647.647 0 0 0 0 .889l1.742 1.81L10.79 9.43 9.05 7.62a.593.593 0 0 0-.857 0Zm13.67 14.202-.709.737a.59.59 0 0 1-.855 0L10.082 11.948l1.565-1.626 10.217 10.612a.647.647 0 0 1 0 .89h-.001ZM4.383 5.66c0 .347.271.629.605.629a.618.618 0 0 0 .606-.63c0-1.04.814-1.885 1.816-1.885a.618.618 0 0 0 .605-.63.618.618 0 0 0-.605-.628c-1.002 0-1.816-.846-1.816-1.886A.618.618 0 0 0 4.987 0a.618.618 0 0 0-.605.629c0 1.04-.815 1.886-1.816 1.886a.618.618 0 0 0-.605.629c0 .347.27.629.605.629 1.001 0 1.816.846 1.816 1.886Zm.605-1.884a3.138 3.138 0 0 0-.607-.631c.23-.18.434-.393.607-.631.173.238.378.451.608.63-.23.18-.435.393-.608.632Zm0 15.088a.618.618 0 0 1-.605-.629c0-1.04-.815-1.886-1.816-1.886a.618.618 0 0 1-.605-.629c0-.347.27-.629.605-.629 1.001 0 1.816-.846 1.816-1.886 0-.347.271-.629.605-.629.334 0 .606.282.606.63 0 1.04.814 1.885 1.816 1.885.334 0 .605.282.605.63a.618.618 0 0 1-.605.628c-1.002 0-1.816.846-1.816 1.886a.618.618 0 0 1-.606.629Zm-.607-3.144c.23.18.434.393.607.631a3.14 3.14 0 0 1 .608-.63 3.137 3.137 0 0 1-.608-.632 3.137 3.137 0 0 1-.607.631Z"></path></svg><div class="Navigation_category-title__UJR2k">Preview</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" d="M22.746 18.338c-1.161-.692-2.9-1.283-5.057-1.283-2.158 0-3.896.59-5.057 1.283v-12.5c.763-.647 2.503-1.56 5.057-1.56 2.553 0 4.293.912 5.057 1.559zM1.263 5.838c.764-.647 2.505-1.559 5.057-1.559 2.552 0 4.294.912 5.057 1.56v12.493c-1.161-.692-2.898-1.282-5.057-1.282-2.16 0-3.896.588-5.057 1.282zm22.554-.735C22.858 4.133 20.677 3 17.685 3c-2.592 0-4.577.852-5.684 1.71C10.893 3.853 8.908 3 6.316 3 3.326 3 1.144 4.133.184 5.103A.642.642 0 0 0 0 5.556V19.61c0 .258.154.492.39.59a.627.627 0 0 0 .689-.138c.635-.643 2.453-1.73 5.237-1.73 2.784 0 4.603 1.087 5.237 1.73.247.25.647.25.894 0 .635-.643 2.453-1.73 5.237-1.73 2.784 0 4.603 1.087 5.237 1.73a.625.625 0 0 0 .689.138.639.639 0 0 0 .39-.59V5.556a.647.647 0 0 0-.184-.453z"></path></svg><div class="Navigation_category-title__UJR2k">Reference</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" d="M20.336 20.5h-3.678v-3.75h3.678zM8.1 20.5H4.42v-3.75H8.1zm2.44-16.25h3.678V8h-3.679zm12.848 7.5H12.987v-2.5h1.835c.338 0 .612-.28.612-.625v-5A.619.619 0 0 0 14.822 3H9.928a.619.619 0 0 0-.612.625v5c0 .345.274.625.612.625h1.835v2.5H1.362a.619.619 0 0 0-.612.625c0 .345.274.625.612.625h4.283v2.5H3.809a.619.619 0 0 0-.612.625v5c0 .345.274.625.612.625h4.895c.338 0 .612-.28.612-.625v-5a.619.619 0 0 0-.612-.625H6.868V13h11.014v2.5h-1.836a.619.619 0 0 0-.612.625v5c0 .345.274.625.612.625h4.895c.338 0 .612-.28.612-.625v-5a.619.619 0 0 0-.612-.625h-1.836V13h4.283c.338 0 .612-.28.612-.625a.619.619 0 0 0-.612-.625z"></path></svg><div class="Navigation_category-title__UJR2k">Architecture</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li><li><button class="HeadlessButton_wrapper__L3jt_ Navigation_category-header__542xs"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" class="Icon_wrapper__8ru25 Icon_md__bLDVV Navigation_icon-category__4RO7O"><path fill="currentColor" d="M16.75 20.013a2.257 2.257 0 0 1-1.597-.655l-.002-.002-7.71-7.709A5.506 5.506 0 0 1 .486 4.235a.5.5 0 0 1 .809-.148l2.912 2.912H6V5.206L3.081 2.287a.498.498 0 0 1 .148-.809A5.555 5.555 0 0 1 5.501.999c3.033 0 5.5 2.467 5.5 5.5 0 .663-.12 1.312-.357 1.936l7.704 7.704c.43.425.668.992.671 1.596s-.231 1.173-.656 1.604a2.248 2.248 0 0 1-1.613.673zm-.894-1.365c.239.236.557.366.894.366.342 0 .662-.133.901-.376a1.264 1.264 0 0 0-.007-1.787l-.002-.002L9.7 8.907a.5.5 0 0 1-.102-.56A4.458 4.458 0 0 0 10 6.5C10 4.019 7.981 2 5.5 2c-.392 0-.78.049-1.15.143l2.504 2.504A.5.5 0 0 1 7 5.001v2.5a.5.5 0 0 1-.5.5H4a.504.504 0 0 1-.354-.146l-2.5-2.5a4.505 4.505 0 0 0 6.205 5.249.5.5 0 0 1 .56.102l7.944 7.943z"></path></svg><div class="Navigation_category-title__UJR2k">Contribute</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da Navigation_icon-arrow__Y8eP6"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></button></li></ul></nav></div></div><div class="DocsPage_body__PDAHV"><section class="Header_wrapper__DSH42"><a href="https://github.com/gravitational/teleport" class="Header_github-link__LVgIP"><img alt="Fork me on GitHub" loading="lazy" width="112" height="112" decoding="async" data-nimg="1" style="color:transparent" srcSet="/docs/_next/image/?url=%2Fdocs%2F_next%2Fstatic%2Fmedia%2Fforkme.b9234619.webp&amp;w=128&amp;q=75 1x, /docs/_next/image/?url=%2Fdocs%2F_next%2Fstatic%2Fmedia%2Fforkme.b9234619.webp&amp;w=256&amp;q=75 2x" src="/docs/_next/image/?url=%2Fdocs%2F_next%2Fstatic%2Fmedia%2Fforkme.b9234619.webp&amp;w=256&amp;q=75"/></a><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" class="Icon_wrapper__8ru25 Icon_xl__v_AfM Header_icon__R76wi"><path fill="currentColor" d="M16.75 20.013a2.257 2.257 0 0 1-1.597-.655l-.002-.002-7.71-7.709A5.506 5.506 0 0 1 .486 4.235a.5.5 0 0 1 .809-.148l2.912 2.912H6V5.206L3.081 2.287a.498.498 0 0 1 .148-.809A5.555 5.555 0 0 1 5.501.999c3.033 0 5.5 2.467 5.5 5.5 0 .663-.12 1.312-.357 1.936l7.704 7.704c.43.425.668.992.671 1.596s-.231 1.173-.656 1.604a2.248 2.248 0 0 1-1.613.673zm-.894-1.365c.239.236.557.366.894.366.342 0 .662-.133.901-.376a1.264 1.264 0 0 0-.007-1.787l-.002-.002L9.7 8.907a.5.5 0 0 1-.102-.56A4.458 4.458 0 0 0 10 6.5C10 4.019 7.981 2 5.5 2c-.392 0-.78.049-1.15.143l2.504 2.504A.5.5 0 0 1 7 5.001v2.5a.5.5 0 0 1-.5.5H4a.504.504 0 0 1-.354-.146l-2.5-2.5a4.505 4.505 0 0 0 6.205 5.249.5.5 0 0 1 .56.102l7.944 7.943z"></path></svg><div class="Header_description__vqnMz"><p class="Header_subtitle__jPVZ9">Teleport</p><h1 class="Header_title__xPxYK">Trusted Clusters</h1><div class="Header_dropdowns__xAYg8"><div class="Dropdown_input__LKs6J Dropdown_purple__AgQYY Versions_wrapper__inU_P Header_versions___mPQx" data-reach-listbox-input="" data-state="closed" data-value="12.x" id="listbox-input--:R7pn6:"><span aria-haspopup="listbox" aria-labelledby="button--listbox-input--:R7pn6:" role="button" tabindex="0" class="Dropdown_button__6iEGg Dropdown_purple__AgQYY" data-reach-listbox-button="" id="button--listbox-input--:R7pn6:">Version 12.x<span aria-hidden="true" data-reach-listbox-arrow=""><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg></span></span></div><ul class="Scopes_list___6GU4 Header_scopes__po4Cp"><li class="Scopes_item__AkXae"><div class="RadioButton_wrapper___OEbF"><input class="RadioButton_input__kphxx" type="radio" name="scope" id="oss" checked="" value="oss"/><label class="RadioButton_label__lIluF RadioButton_variant-gray__hdrY_" for="oss"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_md__bLDVV RadioButton_icon__oYL27"><g stroke="#667c89" stroke-linecap="round"><path d="M3.5 1.5 1 5l2.5 3.5M6.5 8.5 9 5 6.5 1.5"></path></g></svg> <!-- -->OpenSource</label></div></li><li class="Scopes_item__AkXae"><div class="RadioButton_wrapper___OEbF"><input class="RadioButton_input__kphxx" type="radio" name="scope" id="enterprise" value="enterprise"/><label class="RadioButton_label__lIluF RadioButton_variant-green__dysvd" for="enterprise"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_md__bLDVV RadioButton_icon__oYL27"><path d="M1.5 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v6.5h-7z" stroke="#56bca5"></path><g fill="#56bca5"><rect height="1" rx="0.5" width="6" x="1" y="3"></rect><rect height="1" rx="0.5" width="6" x="1" y="5"></rect></g></svg> <!-- -->Enterprise</label></div></li><li class="Scopes_item__AkXae"><div class="RadioButton_wrapper___OEbF"><input class="RadioButton_input__kphxx" type="radio" name="scope" id="cloud" value="cloud"/><label class="RadioButton_label__lIluF RadioButton_variant-blue__DbftL" for="cloud"><svg fill="none" height="1em" viewBox="0 0 10 10" width="1em" xmlns="http://www.w3.org/2000/svg" class="Icon_wrapper__8ru25 Icon_md__bLDVV RadioButton_icon__oYL27"><mask id="simple-cloud_svg__a" fill="#fff"><path clip-rule="evenodd" d="M0 5a4 4 0 0 0 3.5 3.969V9h4a2.5 2.5 0 0 0 1.447-4.54 2 2 0 0 0-2.271-2.435A4 4 0 0 0 0 5z" fill-rule="evenodd"></path></mask><path d="M3.5 8.969h1v-.883l-.876-.11zM3.5 9h-1v1h1zm5.447-4.54-.974-.229-.154.655.548.39zM6.675 2.027l-.669.743.357.321.473-.077zm-3.051 5.95A3 3 0 0 1 1 5h-2a5 5 0 0 0 4.376 4.961zM4.5 9v-.03h-2v.03zM4 8h-.5v2H4zm3.5 0H4v2h3.5zM9 6.5A1.5 1.5 0 0 1 7.5 8v2A3.5 3.5 0 0 0 11 6.5zm-.633-1.224c.385.273.633.72.633 1.224h2c0-1.18-.584-2.222-1.474-2.854zM8 4c0 .08-.01.158-.027.231l1.947.46c.052-.223.08-.455.08-.691zM7 3a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3zm-.164.013C6.89 3.005 6.944 3 7 3V1c-.165 0-.327.013-.486.04zM4 2c.772 0 1.474.29 2.006.77l1.338-1.487A4.985 4.985 0 0 0 4 0zM1 5a3 3 0 0 1 3-3V0a5 5 0 0 0-5 5z" fill="#3f8fe3" mask="url(#simple-cloud_svg__a)"></path></svg> <!-- -->Cloud</label></div></li></ul><a href="https://github.com/gravitational/teleport/issues/new?labels=documentation&amp;template=documentation.md&amp;title=[v.12.x]%20/docs/pages/management/admin/trustedclusters.mdx" target="_blank" rel="noopener noreferrer" class="Button_wrapper__lzW7u Button_variant-secondary__t9qc1 Button_shape-md__gOiUg Header_button__JXLxh">Improve</a></div></div></section><div class="DocsPage_main-wrapper__LEr2L"><div class="DocsPage_main__7GmXl"><div class="DocsPage_text__r5q0_"><div><p class="Tags_p__rxpze">Teleport can partition compute infrastructure into multiple clusters. A cluster
is a group of resources connected to a Teleport Auth Server. Each cluster
manages a separate certificate authority (CA) for all users and resources.</p>
<p class="Tags_p__rxpze">Trusted Clusters allow the users of one cluster, the <strong>root cluster</strong>, to
seamlessly connect to resources in another cluster, the <strong>leaf cluster</strong>, while
remaining authenticated with only a single Auth Service. The leaf cluster can
run behind a firewall without any ingress ports open.</p>
<p class="Tags_p__rxpze">Uses for Trusted Clusters include:</p>
<ul class="Tags_ul__a2l5n">
<li class="Tags_li__NI3VS">Managed service providers (MSP) remotely managing the infrastructure of their clients.</li>
<li class="Tags_li__NI3VS">Device manufacturers remotely maintaining computing appliances deployed on premises.</li>
<li class="Tags_li__NI3VS">Large cloud software vendors managing multiple data centers using a common proxy.</li>
</ul>
<p class="Tags_p__rxpze">Here is an example of an MSP using Trusted Clusters to obtain access to client clusters:
</p><span class="Image_wrapper__D8KA8 Image_left__OoTrR"><img alt="MSP Example" loading="lazy" width="960" height="1057.3333333333333" decoding="async" data-nimg="1" class="Image_image__Q4CAn" style="color:transparent" src="/docs/_next/static/assets/trusted-clusters@1.5x-b3064bc46e.svg"/></span>
<p class="Tags_p__rxpze">A leaf cluster always creates an outbound reverse SSH tunnel to the root cluster and keeps the tunnel open.</p>
<div class="Notice_wrapper__X6nzO Notice_tip__UTNLx"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 32 32" class="Icon_wrapper__8ru25 Icon_md__bLDVV Notice_icon__ibsG7"><path fill="currentColor" d="m11.435 22.763-5.182-4.876a.78.78 0 0 1 0-1.149.903.903 0 0 1 1.221 0l4.571 4.3 11.481-10.8a.903.903 0 0 1 1.221 0 .78.78 0 0 1 0 1.149L12.655 22.763a.889.889 0 0 1-.61.237.896.896 0 0 1-.61-.237zM16 32a15.9 15.9 0 0 1-11.315-4.685A15.888 15.888 0 0 1 0 16.002 15.9 15.9 0 0 1 4.685 4.687 15.891 15.891 0 0 1 16 0c4.275 0 8.291 1.664 11.315 4.687A15.892 15.892 0 0 1 32 16.002c0 4.274-1.664 8.291-4.685 11.313A15.896 15.896 0 0 1 16 32zm0-30.316C8.106 1.684 1.684 8.106 1.684 16c0 7.894 6.422 14.316 14.316 14.316 7.894 0 14.316-6.422 14.316-14.316 0-7.894-6.422-14.316-14.316-14.316z"></path></svg><div class="Notice_body__w7z99"><p class="Tags_p__rxpze">Individual nodes and proxies can create reverse tunnels to proxy services without creating a new cluster.
You don&#x27;t need to set up a trusted cluster just to connect a couple of servers, kubernetes clusters or
databases behind a firewall. For more information, see <a class="Link_wrapper__d2hcr Link_docs__y8XJ8" href="/docs/management/admin/adding-nodes/">Adding Nodes to the Cluster</a>.</p></div></div>
<p class="Tags_p__rxpze">When a user tries to connect to any resource inside the leaf cluster using the root&#x27;s proxy
the connection goes through the reverse tunnel.</p>
<p class="Tags_p__rxpze">This guide will explain how to:</p>
<ul class="Tags_ul__a2l5n">
<li class="Tags_li__NI3VS">Add and remove Trusted Clusters using CLI commands.</li>
<li class="Tags_li__NI3VS">Enable/disable trust between clusters.</li>
<li class="Tags_li__NI3VS">Establish permission mapping between clusters using Teleport roles.</li>
</ul>
<h2 class="Headers_wrapper__3kKzt Headers_h2__1ZiBu" id="prerequisites">Prerequisites<!-- --> <a class="Headers_anchor__MXvpy" href="#prerequisites"></a></h2>
<div class="Tabs_wrapper__fSVhx"><ul class="TabLabel_header__b6rSk"><li><button disabled="" class="HeadlessButton_wrapper__L3jt_ TabLabel_label__g5DwO TabLabel_selected__KMdAy">Open Source</button></li><li><button class="HeadlessButton_wrapper__L3jt_ TabLabel_label__g5DwO TabLabel_default__XN_rg">Enterprise</button></li><li><button class="HeadlessButton_wrapper__L3jt_ TabLabel_label__g5DwO TabLabel_default__XN_rg">Teleport Cloud</button></li></ul><div><div class="TabItem_item__NgSOc"><ul class="Tags_ul__a2l5n">
<li class="Tags_li__NI3VS">
<p class="Tags_p__rxpze">Two running Teleport clusters. For details on how to set up your clusters, see
one of our <a class="Link_wrapper__d2hcr Link_docs__y8XJ8" href="/docs/getting-started/">Getting Started</a> guides.</p>
</li>
<li class="Tags_li__NI3VS">
<p class="Tags_p__rxpze">The <code class="Code_wrapper__imYlP">tctl</code> admin tool and <code class="Code_wrapper__imYlP">tsh</code> client tool version &gt;= 12.2.1.</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl version</span></div><p class="Command_comment__CylBg" data-type="descr">Teleport v12.2.1 go1.20</p><p class="Command_comment__CylBg"></p><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh version</span></div><p class="Command_comment__CylBg" data-type="descr">Teleport v12.2.1 go1.20</p></div></pre></div></div>
<p class="Tags_p__rxpze">See <a class="Link_wrapper__d2hcr Link_docs__y8XJ8" href="/docs/installation/">Installation</a> for details.</p>
</li>
<li class="Tags_li__NI3VS">
<p class="Tags_p__rxpze">A Teleport Node that is joined to one of your clusters. We will refer to this
cluster as the <strong>leaf cluster</strong> throughout this guide.</p>
<p class="Tags_p__rxpze">See <a class="Link_wrapper__d2hcr Link_docs__y8XJ8" href="/docs/management/admin/adding-nodes/">Adding Nodes</a> for how to launch a Teleport Node in
your cluster.</p>
</li>
</ul></div></div><div class="TabItem_hidden__FiJ6y"><div class="TabItem_item__NgSOc"><ul class="Tags_ul__a2l5n">
<li class="Tags_li__NI3VS">
<p class="Tags_p__rxpze">Two running Teleport clusters. For details on how to set up your clusters, see
our Enterprise <a class="Link_wrapper__d2hcr Link_docs__y8XJ8" href="/docs/enterprise/getting-started/">Getting Started</a> guide.</p>
</li>
<li class="Tags_li__NI3VS">
<p class="Tags_p__rxpze">The <code class="Code_wrapper__imYlP">tctl</code> admin tool and <code class="Code_wrapper__imYlP">tsh</code> client tool version &gt;= 12.2.1,
which you can download by visiting the
<a href="https://dashboard.gravitational.com/web/login" target="_blank" rel="noopener noreferrer" class="Link_wrapper__d2hcr Link_docs__y8XJ8">customer portal</a>.</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl version</span></div><p class="Command_comment__CylBg" data-type="descr">Teleport v12.2.1 go1.20</p><p class="Command_comment__CylBg"></p><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh version</span></div><p class="Command_comment__CylBg" data-type="descr">Teleport v12.2.1 go1.20</p></div></pre></div></div>
</li>
<li class="Tags_li__NI3VS">
<p class="Tags_p__rxpze">A Teleport Node that is joined to one of your clusters. We will refer to this
cluster as the <strong>leaf cluster</strong> throughout this guide.</p>
<p class="Tags_p__rxpze">See <a class="Link_wrapper__d2hcr Link_docs__y8XJ8" href="/docs/management/admin/adding-nodes/">Adding Nodes</a> for how to launch a Teleport Node in
your cluster.</p>
</li>
</ul></div></div><div class="TabItem_hidden__FiJ6y"><div class="TabItem_item__NgSOc"><div class="VersionWarning_wrapper__cY_wg"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 32 32" class="Icon_wrapper__8ru25 Icon_md__bLDVV VersionWarning_icon___OO_3"><path fill="currentColor" d="M25.009 26.5H10c-3.216 0-5.965-2.037-7.029-4.889A8.982 8.982 0 0 0 10 25h15.009a5.975 5.975 0 0 0 4.351-1.877 4.497 4.497 0 0 1-4.35 3.377Zm4.351-6.377a4.497 4.497 0 0 1-4.35 3.377H10c-3.216 0-5.965-2.037-7.029-4.889A8.982 8.982 0 0 0 10 22h15.009a5.975 5.975 0 0 0 4.351-1.877ZM10 5.5a7.511 7.511 0 0 1 6.141 3.192.75.75 0 0 0 1.362-.386 2.99 2.99 0 0 1 .582-1.585A2.982 2.982 0 0 1 20.501 5.5a2.996 2.996 0 0 1 2.169 5.069.751.751 0 0 0 .803 1.22 4.496 4.496 0 0 1 6.029 4.221 4.496 4.496 0 0 1-4.491 4.492H10c-4.135 0-7.5-3.365-7.5-7.5 0-4.136 3.365-7.5 7.5-7.5V5.5Zm15.009 4.52c-.093 0-.184.001-.276.005A4.43 4.43 0 0 0 25 8.5C25 6.019 22.981 4 20.5 4a4.523 4.523 0 0 0-4.11 2.662A9.01 9.01 0 0 0 10 4c-4.96 0-9 4.038-9 9v6c0 4.962 4.04 9 9 9h15.009A5.998 5.998 0 0 0 31 22.009v-6a5.998 5.998 0 0 0-5.991-5.991v.002Z"></path></svg>Cloud is not available for Teleport v<!-- -->.<br/>Please use the<!-- --> <a class="Link_wrapper__d2hcr Link_docs__y8XJ8" href="/docs/">latest version of Teleport Enterprise documentation</a>.</div></div></div></div>
<div class="Details_wrapper__MX6Iv Details_opened__VaU_Y" id="before-you-begin-read-security-tips"><button class="HeadlessButton_wrapper__L3jt_ Details_header__6xc7O"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_md__bLDVV Details_icon__gixIB"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg><div class="Details_description__OUAC9"><div class="Details_title__dvnfB">Before you begin: read security tips</div></div><a class="Details_anchor__XEvS8" href="#before-you-begin-read-security-tips"></a></button><div class="Details_body__8bS3R"><p class="Tags_p__rxpze">When running Teleport in production, we recommend that you follow the
practices below to avoid security incidents. These practices may differ from
the examples used in this guide, which are intended for demo environments:</p><ul class="Tags_ul__a2l5n">
<li class="Tags_li__NI3VS">Avoid using <code class="Code_wrapper__imYlP">sudo</code> in production environments unless it&#x27;s necessary.</li>
<li class="Tags_li__NI3VS">Create new, non-root, users and use test instances for experimenting with Teleport.</li>
<li class="Tags_li__NI3VS">Run Teleport&#x27;s services as a non-root user unless required. Only the SSH
Service requires root access. Note that you will need root permissions (or
the <code class="Code_wrapper__imYlP">CAP_NET_BIND_SERVICE</code> capability) to make Teleport listen on a port
numbered &lt; <code class="Code_wrapper__imYlP">1024</code> (e.g. <code class="Code_wrapper__imYlP">443</code>).</li>
<li class="Tags_li__NI3VS">Follow the &quot;Principle of Least Privilege&quot; (PoLP). Don&#x27;t give users
permissive roles when giving them more restrictive roles will do instead.
For example, assign users the built-in <code class="Code_wrapper__imYlP">access,editor</code> roles.</li>
<li class="Tags_li__NI3VS">When joining a Teleport resource service (e.g., the Database Service or
Application Service) to a cluster, save the invitation token to a file.
Otherwise, the token will be visible when examining the <code class="Code_wrapper__imYlP">teleport</code> command
that started the agent, e.g., via the <code class="Code_wrapper__imYlP">history</code> command on a compromised
system.</li>
</ul></div></div>
<h2 class="Headers_wrapper__3kKzt Headers_h2__1ZiBu" id="step-15-prepare-your-environment">Step 1/5. Prepare your environment<!-- --> <a class="Headers_anchor__MXvpy" href="#step-15-prepare-your-environment"></a></h2>
<p class="Tags_p__rxpze">In this guide, we will enable users of your root cluster to SSH into the
Teleport Node in your leaf cluster as the user <code class="Code_wrapper__imYlP">visitor</code>. First, we will create
the <code class="Code_wrapper__imYlP">visitor</code> user and a Teleport role that can assume this username when
logging in to your Node.</p>
<h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="add-a-user-to-your-node">Add a user to your Node<!-- --> <a class="Headers_anchor__MXvpy" href="#add-a-user-to-your-node"></a></h3>
<p class="Tags_p__rxpze">On your Node, run the following command to add the <code class="Code_wrapper__imYlP">visitor</code> user:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">sudo useradd --create-home visitor</span></div></div></pre></div></div>
<div class="Notice_wrapper__X6nzO Notice_warning__rKiLW"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 32 28" class="Icon_wrapper__8ru25 Icon_md__bLDVV Notice_icon__ibsG7"><path fill="currentColor" d="M16 24c-.552 0-1-.336-1-.75v-1.5c0-.414.448-.75 1-.75s1 .336 1 .75v1.5c0 .414-.448.75-1 .75zm0-4c-.552 0-1-.373-1-.833v-8.334c0-.46.448-.833 1-.833s1 .373 1 .833v8.334c0 .46-.448.833-1 .833zm15.158 8H.843a.845.845 0 0 1-.728-.408.808.808 0 0 1-.007-.82L15.266.42c.15-.259.43-.42.734-.42.305 0 .585.16.735.42l15.157 26.351a.812.812 0 0 1-.007.82.843.843 0 0 1-.727.409zM2.283 26.353h27.435L16 2.505z"></path></svg><div class="Notice_body__w7z99"><p class="Tags_p__rxpze">This command also creates a home directory for the <code class="Code_wrapper__imYlP">visitor</code> user, which is
required for accessing a shell on the Node.</p></div></div>
<h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="create-a-role-to-access-your-node">Create a role to access your Node<!-- --> <a class="Headers_anchor__MXvpy" href="#create-a-role-to-access-your-node"></a></h3>
<p class="Tags_p__rxpze">On your local machine, log in to your leaf cluster using your Teleport username:</p>
<!-- -->
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><p class="Command_comment__CylBg" data-type="descr">Log out of all clusters to begin this guide from a clean state</p><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh logout</span></div><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh login --proxy=leafcluster.example.com --user=myuser</span></div></div></pre></div></div>
<p class="Tags_p__rxpze">Create a file called <code class="Code_wrapper__imYlP">visitor.yaml</code> with the
following content:</p>
<div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-yaml"><span class="hljs-attr">kind:</span> <span class="hljs-string">role</span>
<span class="hljs-attr">version:</span> <span class="hljs-string">v5</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">visitor</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">allow:</span>
    <span class="hljs-attr">logins:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">visitor</span>
    <span class="hljs-comment"># In case your Node is labeled, you will need to explicitly allow access</span>
    <span class="hljs-comment"># to Nodes with labels in order to SSH into your Node.</span>
    <span class="hljs-attr">node_labels:</span>
      <span class="hljs-string">&#x27;*&#x27;</span><span class="hljs-string">:</span> <span class="hljs-string">&#x27;*&#x27;</span>
</code></pre></div></div>
<p class="Tags_p__rxpze">Create the role:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl create visitor.yaml</span></div><p class="Command_comment__CylBg">role &#x27;visitor&#x27; has been created</p></div></pre></div></div>
<p class="Tags_p__rxpze">Now you have a <code class="Code_wrapper__imYlP">visitor</code> role on your leaf cluster that enables users to assume
the <code class="Code_wrapper__imYlP">visitor</code> login on your Node.</p>
<h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="add-a-login-to-your-root-cluster-user">Add a login to your root cluster user<!-- --> <a class="Headers_anchor__MXvpy" href="#add-a-login-to-your-root-cluster-user"></a></h3>
<p class="Tags_p__rxpze">The <code class="Code_wrapper__imYlP">visitor</code> role allows users with the <code class="Code_wrapper__imYlP">visitor</code> login to access Nodes in the
leaf cluster. In the next step, we will add the <code class="Code_wrapper__imYlP">visitor</code> login to your user so
you can satisfy the conditions of the role and access the Node.</p>
<p class="Tags_p__rxpze">Make sure that you are logged in to your root cluster.</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh logout</span></div><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh login --proxy=rootcluster.example.com --user=myuser</span></div></div></pre></div></div>
<!-- -->
<p class="Tags_p__rxpze">Create a file called <code class="Code_wrapper__imYlP">user.yaml</code> with your current user configuration. Replace
<code class="Code_wrapper__imYlP">myuser</code> with your Teleport username:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl get user/myuser &gt; user.yaml</span></div></div></pre></div></div>
<p class="Tags_p__rxpze">Make the following change to <code class="Code_wrapper__imYlP">user.yaml</code>:</p>
<div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-diff">   traits:
     logins:
<span class="hljs-addition">+    - visitor</span>
     - ubuntu
     - root
</code></pre></div></div>
<p class="Tags_p__rxpze">Apply your changes:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl create -f user.yaml</span></div></div></pre></div></div>
<p class="Tags_p__rxpze">In the next section, we will allow users on the root cluster to access your Node
while assuming the <code class="Code_wrapper__imYlP">visitor</code> role.</p>
<h2 class="Headers_wrapper__3kKzt Headers_h2__1ZiBu" id="step-25-establish-trust-between-clusters">Step 2/5. Establish trust between clusters<!-- --> <a class="Headers_anchor__MXvpy" href="#step-25-establish-trust-between-clusters"></a></h2>
<p class="Tags_p__rxpze">Teleport establishes trust between the root cluster and a leaf cluster using
a <strong>join token</strong>.</p>
<p class="Tags_p__rxpze">To set up trust between clusters, you will first create a join token via the
root cluster&#x27;s Auth Service. You will then use the Auth Service on the leaf
cluster to create a <code class="Code_wrapper__imYlP">trusted_cluster</code> resource.</p>
<p class="Tags_p__rxpze">The <code class="Code_wrapper__imYlP">trusted_cluster</code> resource will include the join token, proving to the root
cluster that the leaf cluster is the one you expected to register.</p>
<h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="create-a-join-token">Create a join token<!-- --> <a class="Headers_anchor__MXvpy" href="#create-a-join-token"></a></h3>
<p class="Tags_p__rxpze">You can create a join token using the <code class="Code_wrapper__imYlP">tctl</code> tool.</p>
<p class="Tags_p__rxpze">First, log out of all clusters and log in to the root cluster.</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh logout</span></div><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh login --user=myuser --proxy=rootcluster.example.com</span></div><p class="Command_comment__CylBg">&gt; Profile URL:        https://rootcluster.example.com:443</p><p class="Command_comment__CylBg">  Logged in as:       myuser</p><p class="Command_comment__CylBg">  Cluster:            rootcluster.example.com</p><p class="Command_comment__CylBg">  Roles:              access, auditor, editor</p><p class="Command_comment__CylBg">  Logins:             root</p><p class="Command_comment__CylBg">  Kubernetes:         enabled</p><p class="Command_comment__CylBg">  Valid until:        2022-04-29 03:07:22 -0400 EDT [valid for 12h0m0s]</p><p class="Command_comment__CylBg">  Extensions:         permit-agent-forwarding, permit-port-forwarding, permit-pty</p></div></pre></div></div>
<!-- -->
<p class="Tags_p__rxpze">Execute the following command on your development machine:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><p class="Command_comment__CylBg" data-type="descr">Generates a Trusted Cluster token to allow an inbound connection from a leaf cluster:</p><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl tokens add --type=trusted_cluster --ttl=15m</span></div><p class="Command_comment__CylBg">The cluster invite token: abcd123-insecure-do-not-use-this</p><p class="Command_comment__CylBg">This token will expire in 15 minutes</p><p class="Command_comment__CylBg"></p><p class="Command_comment__CylBg">Use this token when defining a trusted cluster resource on a remote cluster.</p></div></pre></div></div>
<p class="Tags_p__rxpze">This command generates a Trusted Cluster join token. The token can be used
multiple times and has an expiration time of 5 minutes.</p>
<p class="Tags_p__rxpze">Copy the join token for later use. If you need to display your join token again,
run the following command against your root cluster:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl tokens ls</span></div><p class="Command_comment__CylBg">Token                                                            Type            Labels   Expiry Time (UTC)</p><p class="Command_comment__CylBg">---------------------------------------------------------------- --------------- -------- ---------------------------</p><p class="Command_comment__CylBg">abcd123-insecure-do-not-use-this                                 trusted_cluster          28 Apr 22 19:19 UTC (4m48s)</p></div></pre></div></div>
<div class="Details_wrapper__MX6Iv Details_opened__VaU_Y" id="revoking-join-tokens"><button class="HeadlessButton_wrapper__L3jt_ Details_header__6xc7O"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_md__bLDVV Details_icon__gixIB"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg><div class="Details_description__OUAC9"><div class="Details_title__dvnfB">Revoking join tokens</div></div><a class="Details_anchor__XEvS8" href="#revoking-join-tokens"></a></button><div class="Details_body__8bS3R"><p class="Tags_p__rxpze">You can revoke a join token with the following command:</p><div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl tokens rm abcd123-insecure-do-not-use-this</span></div></div></pre></div></div></div></div>
<div class="Notice_wrapper__X6nzO Notice_tip__UTNLx"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 32 32" class="Icon_wrapper__8ru25 Icon_md__bLDVV Notice_icon__ibsG7"><path fill="currentColor" d="m11.435 22.763-5.182-4.876a.78.78 0 0 1 0-1.149.903.903 0 0 1 1.221 0l4.571 4.3 11.481-10.8a.903.903 0 0 1 1.221 0 .78.78 0 0 1 0 1.149L12.655 22.763a.889.889 0 0 1-.61.237.896.896 0 0 1-.61-.237zM16 32a15.9 15.9 0 0 1-11.315-4.685A15.888 15.888 0 0 1 0 16.002 15.9 15.9 0 0 1 4.685 4.687 15.891 15.891 0 0 1 16 0c4.275 0 8.291 1.664 11.315 4.687A15.892 15.892 0 0 1 32 16.002c0 4.274-1.664 8.291-4.685 11.313A15.896 15.896 0 0 1 16 32zm0-30.316C8.106 1.684 1.684 8.106 1.684 16c0 7.894 6.422 14.316 14.316 14.316 7.894 0 14.316-6.422 14.316-14.316 0-7.894-6.422-14.316-14.316-14.316z"></path></svg><div class="Notice_body__w7z99"><p class="Tags_p__rxpze">It&#x27;s important to note that join tokens are only used to establish a
connection for the first time. Clusters will exchange certificates and
won&#x27;t use tokens to re-establish their connection afterward.</p></div></div>
<h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="define-a-trusted-cluster-resource">Define a Trusted Cluster resource<!-- --> <a class="Headers_anchor__MXvpy" href="#define-a-trusted-cluster-resource"></a></h3>
<p class="Tags_p__rxpze">On your local machine, create a file called <code class="Code_wrapper__imYlP">trusted_cluster.yaml</code> with the
following content:</p>
<div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-yaml"><span class="hljs-comment"># trusted_cluster.yaml</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">trusted_cluster</span>
<span class="hljs-attr">version:</span> <span class="hljs-string">v2</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rootcluster.example.com</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">token:</span> <span class="hljs-string">abcd123-insecure-do-not-use-this</span>
  <span class="hljs-attr">tunnel_addr:</span> <span class="hljs-string">rootcluster.example.com:11106</span>
  <span class="hljs-attr">web_proxy_addr:</span> <span class="hljs-string">rootcluster.example.com:443</span>
  <span class="hljs-attr">role_map:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">remote:</span> <span class="hljs-string">&quot;access&quot;</span>
      <span class="hljs-attr">local:</span> [<span class="hljs-string">&quot;visitor&quot;</span>]
</code></pre></div></div>
<p class="Tags_p__rxpze">Change the fields of <code class="Code_wrapper__imYlP">trusted_cluster.yaml</code> as follows:</p>
<h4 class="Headers_wrapper__3kKzt Headers_h4__cGer3" id="metadataname"><code class="Code_wrapper__imYlP">metadata.name</code> <a class="Headers_anchor__MXvpy" href="#metadataname"></a></h4>
<p class="Tags_p__rxpze">Use the name of your root cluster, e.g., <code class="Code_wrapper__imYlP">teleport.example.com</code>.</p>
<h4 class="Headers_wrapper__3kKzt Headers_h4__cGer3" id="spectoken"><code class="Code_wrapper__imYlP">spec.token</code> <a class="Headers_anchor__MXvpy" href="#spectoken"></a></h4>
<p class="Tags_p__rxpze">This is join token you created earlier.</p>
<h4 class="Headers_wrapper__3kKzt Headers_h4__cGer3" id="spectunnel_addr"><code class="Code_wrapper__imYlP">spec.tunnel_addr</code> <a class="Headers_anchor__MXvpy" href="#spectunnel_addr"></a></h4>
<p class="Tags_p__rxpze">This is the reverse tunnel address of the Proxy Service in the root cluster. Run
the following command to retrieve the value you should use:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">PROXY=rootcluster.example.com</span></div><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">curl https://${PROXY?}/webapi/ping | jq &#x27;if .proxy.tls_routing_enabled == true then .proxy.ssh.public_addr else .proxy.ssh.ssh_tunnel_public_addr end&#x27;</span></div><p class="Command_comment__CylBg">&quot;rootcluster.example.com:443&quot;</p></div></pre></div></div>
<!-- -->
<h4 class="Headers_wrapper__3kKzt Headers_h4__cGer3" id="web_proxy_addr"><code class="Code_wrapper__imYlP">web_proxy_addr</code> <a class="Headers_anchor__MXvpy" href="#web_proxy_addr"></a></h4>
<p class="Tags_p__rxpze">This is the address of the Proxy Service on the root cluster. Obtain this with the
following command:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">curl https://${PROXY?}/webapi/ping | jq .proxy.ssh.public_addr</span></div><p class="Command_comment__CylBg">&quot;teleport.example.com:443&quot;</p></div></pre></div></div>
<!-- -->
<h4 class="Headers_wrapper__3kKzt Headers_h4__cGer3" id="specrole_map"><code class="Code_wrapper__imYlP">spec.role_map</code> <a class="Headers_anchor__MXvpy" href="#specrole_map"></a></h4>
<p class="Tags_p__rxpze">When a leaf cluster establishes trust with a root cluster, it needs a way to
configure access from users in the root cluster. Teleport enables you to limit
access to Trusted Clusters by mapping Teleport roles to cluster labels.</p>
<p class="Tags_p__rxpze">When creating a <code class="Code_wrapper__imYlP">trusted_cluster</code> resource, the administrator of the leaf
cluster must define how roles from the root cluster map to roles on the leaf
cluster.</p>
<p class="Tags_p__rxpze"><code class="Code_wrapper__imYlP">trusted_cluster.yaml</code> uses the following configuration:</p>
<div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-yaml">  <span class="hljs-attr">role_map:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">remote:</span> <span class="hljs-string">&quot;access&quot;</span>
      <span class="hljs-attr">local:</span> [<span class="hljs-string">&quot;visitor&quot;</span>]
</code></pre></div></div>
<p class="Tags_p__rxpze">Here, if a user has the <code class="Code_wrapper__imYlP">access</code> role on the root cluster, the leaf cluster will grant
them the <code class="Code_wrapper__imYlP">visitor</code> role when they attempt to log in to a Node.</p>
<p class="Tags_p__rxpze">If your user on the root cluster has the <code class="Code_wrapper__imYlP">access</code> role, leave this as it is. If
not, change <code class="Code_wrapper__imYlP">access</code> to one of your user&#x27;s roles.</p>
<div class="Details_wrapper__MX6Iv" id="role-mapping-syntax"><button class="HeadlessButton_wrapper__L3jt_ Details_header__6xc7O"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_md__bLDVV Details_icon__gixIB"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg><div class="Details_description__OUAC9"><div class="Details_title__dvnfB">Role mapping syntax</div></div><a class="Details_anchor__XEvS8" href="#role-mapping-syntax"></a></button><div class="Details_body__8bS3R"><h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="wildcard-characters">Wildcard characters<!-- --> <a class="Headers_anchor__MXvpy" href="#wildcard-characters"></a></h3><p class="Tags_p__rxpze">In role mappings, the wildcard character <code class="Code_wrapper__imYlP">*</code> is used to match any number of
characters in a string.</p><p class="Tags_p__rxpze">For example, if we wanted to let <em>any</em> user from the root cluster connect to the
leaf cluster, we can use a wildcard <code class="Code_wrapper__imYlP">*</code> in the <code class="Code_wrapper__imYlP">role_map</code> like this:</p><div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-yaml"><span class="hljs-attr">role_map:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">remote:</span> <span class="hljs-string">&quot;*&quot;</span>
    <span class="hljs-attr">local:</span> [<span class="hljs-string">access</span>]
</code></pre></div></div><p class="Tags_p__rxpze">In this example, we are mapping any roles on the root cluster that begin with
<code class="Code_wrapper__imYlP">cluster-</code> to the role <code class="Code_wrapper__imYlP">clusteradmin</code> on the leaf cluster.</p><div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-yaml"><span class="hljs-attr">role_map:</span>
   <span class="hljs-bullet">-</span> <span class="hljs-attr">remote:</span> <span class="hljs-string">&#x27;cluster-*&#x27;</span>
     <span class="hljs-attr">local:</span> [<span class="hljs-string">clusteradmin</span>]
</code></pre></div></div><h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="regular-expressions">Regular expressions<!-- --> <a class="Headers_anchor__MXvpy" href="#regular-expressions"></a></h3><p class="Tags_p__rxpze">You can also use regular expressions to map user roles from one cluster to
another. Our regular expression syntax enables you to use capture groups to
reference part of an remote role name that matches a regular expression in the
corresponding local role:</p><div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-yaml">  <span class="hljs-comment"># In this example, remote users with a remote role called &#x27;remote-one&#x27; will be</span>
  <span class="hljs-comment"># mapped to a local role called &#x27;local-one&#x27;, and `remote-two` becomes `local-two`, etc:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">remote:</span> <span class="hljs-string">&quot;^remote-(.*)$&quot;</span>
    <span class="hljs-attr">local:</span> [<span class="hljs-string">local-$1</span>]
</code></pre></div></div><p class="Tags_p__rxpze">Regular expression matching is activated only when the expression starts
with <code class="Code_wrapper__imYlP">^</code> and ends with <code class="Code_wrapper__imYlP">$</code>.</p><p class="Tags_p__rxpze">Regular expressions use Google&#x27;s re2 syntax, which you can read about in the re2 <a href="https://github.com/google/re2/wiki/Syntax" target="_blank" rel="noopener noreferrer" class="Link_wrapper__d2hcr Link_docs__y8XJ8">syntax guide</a>.</p></div></div>
<div class="Details_wrapper__MX6Iv" id="sharing-user-traits-between-trusted-clusters"><button class="HeadlessButton_wrapper__L3jt_ Details_header__6xc7O"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_md__bLDVV Details_icon__gixIB"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg><div class="Details_description__OUAC9"><div class="Details_title__dvnfB">Sharing user traits between Trusted Clusters</div></div><a class="Details_anchor__XEvS8" href="#sharing-user-traits-between-trusted-clusters"></a></button><div class="Details_body__8bS3R"><p class="Tags_p__rxpze">You can share user SSH logins, Kubernetes users/groups, and database users/names between Trusted Clusters.</p><p class="Tags_p__rxpze">Suppose you have a root cluster with a role named <code class="Code_wrapper__imYlP">root</code> and the following
allow rules:</p><div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-yaml"><span class="hljs-attr">logins:</span> [<span class="hljs-string">&quot;root&quot;</span>]
<span class="hljs-attr">kubernetes_groups:</span> [<span class="hljs-string">&quot;system:masters&quot;</span>]
<span class="hljs-attr">kubernetes_users:</span> [<span class="hljs-string">&quot;alice&quot;</span>]
<span class="hljs-attr">db_users:</span> [<span class="hljs-string">&quot;postgres&quot;</span>]
<span class="hljs-attr">db_names:</span> [<span class="hljs-string">&quot;dev&quot;</span>, <span class="hljs-string">&quot;metrics&quot;</span>]
</code></pre></div></div><p class="Tags_p__rxpze">When setting up the Trusted Cluster relationship, the leaf cluster can choose
to map this <code class="Code_wrapper__imYlP">root</code> cluster role to its own <code class="Code_wrapper__imYlP">admin</code> role:</p><div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-yaml"><span class="hljs-attr">role_map:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">remote:</span> <span class="hljs-string">&quot;root&quot;</span>
  <span class="hljs-attr">local:</span> [<span class="hljs-string">&quot;admin&quot;</span>]
</code></pre></div></div><p class="Tags_p__rxpze">The role <code class="Code_wrapper__imYlP">admin</code> of the leaf cluster can now be set up to use the root cluster&#x27;s
role logins, Kubernetes groups and other traits using the following variables:</p><div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-yaml"><span class="hljs-attr">logins:</span> [<span class="hljs-string">&quot;<span class="hljs-template-variable">{{internal.logins}}</span>&quot;</span>]
<span class="hljs-attr">kubernetes_groups:</span> [<span class="hljs-string">&quot;<span class="hljs-template-variable">{{internal.kubernetes_groups}}</span>&quot;</span>]
<span class="hljs-attr">kubernetes_users:</span> [<span class="hljs-string">&quot;<span class="hljs-template-variable">{{internal.kubernetes_users}}</span>&quot;</span>]
<span class="hljs-attr">db_users:</span> [<span class="hljs-string">&quot;<span class="hljs-template-variable">{{internal.db_users}}</span>&quot;</span>]
<span class="hljs-attr">db_names:</span> [<span class="hljs-string">&quot;<span class="hljs-template-variable">{{internal.db_names}}</span>&quot;</span>]
</code></pre></div></div><p class="Tags_p__rxpze">User traits that come from the identity provider (such as OIDC claims or SAML
attributes) are also passed to the leaf clusters and can be access in the role
templates using <code class="Code_wrapper__imYlP">external</code> variable prefix:</p><div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-yaml"><span class="hljs-attr">logins:</span> [<span class="hljs-string">&quot;<span class="hljs-template-variable">{{internal.logins}}</span>&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-template-variable">{{external.logins_from_okta}}</span>&quot;</span>]
<span class="hljs-attr">node_labels:</span>
  <span class="hljs-attr">env:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">{{external.env_from_okta}}</span>&quot;</span>
</code></pre></div></div></div></div>
<h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="create-your-trusted-cluster-resource">Create your Trusted Cluster resource<!-- --> <a class="Headers_anchor__MXvpy" href="#create-your-trusted-cluster-resource"></a></h3>
<p class="Tags_p__rxpze">Log out of the root cluster.</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh logout</span></div></div></pre></div></div>
<p class="Tags_p__rxpze">Log in to the leaf cluster:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh login --user=myuser --proxy=leafcluster.example.com</span></div></div></pre></div></div>
<!-- -->
<p class="Tags_p__rxpze">Create the Trusted Cluster:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl create trusted_cluster.yaml</span></div></div></pre></div></div>
<div class="Details_wrapper__MX6Iv Details_opened__VaU_Y" id="creating-trusted-clusters-via-the-web-ui"><button class="HeadlessButton_wrapper__L3jt_ Details_header__6xc7O"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_md__bLDVV Details_icon__gixIB"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg><div class="Details_description__OUAC9"><div class="Details_title__dvnfB">Creating Trusted Clusters via the Web UI</div></div><a class="Details_anchor__XEvS8" href="#creating-trusted-clusters-via-the-web-ui"></a></button><div class="Details_body__8bS3R"><p class="Tags_p__rxpze">You can easily configure leaf nodes using the Teleport Web UI.</p><p class="Tags_p__rxpze">Here is an example of creating trust between a leaf and a root node.
</p><span class="Image_wrapper__D8KA8 Image_left__OoTrR"><img alt="Tunnels" loading="lazy" width="2342" height="1534" decoding="async" data-nimg="1" class="Image_image__Q4CAn" style="color:transparent" srcSet="/docs/_next/image/?url=%2Fdocs%2F_next%2Fstatic%2Fassets%2Fsetting-up-trust-35cbee3222.png&amp;w=3840&amp;q=75 1x" src="/docs/_next/image/?url=%2Fdocs%2F_next%2Fstatic%2Fassets%2Fsetting-up-trust-35cbee3222.png&amp;w=3840&amp;q=75"/></span></div></div>
<div class="Details_wrapper__MX6Iv" id="update-role-mappings"><button class="HeadlessButton_wrapper__L3jt_ Details_header__6xc7O"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_md__bLDVV Details_icon__gixIB"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg><div class="Details_description__OUAC9"><div class="Details_title__dvnfB">Update role mappings</div></div><a class="Details_anchor__XEvS8" href="#update-role-mappings"></a></button><div class="Details_body__8bS3R"><p class="Tags_p__rxpze">You can update the role mappings within the <code class="Code_wrapper__imYlP">trusted_cluster</code> resource we created earlier by modifying the resource definition (<code class="Code_wrapper__imYlP">trusted_cluster.yaml</code>) to indicate the new role mappings in the <code class="Code_wrapper__imYlP">role_map</code> field.</p><p class="Tags_p__rxpze">Then, update the trusted cluster resource on the leaf cluster side:</p><div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl create --force trusted_cluster.yaml</span></div></div></pre></div></div></div></div>
<p class="Tags_p__rxpze">Log out of the leaf cluster and log back in to the root cluster. When you run
<code class="Code_wrapper__imYlP">tsh clusters</code>, you should see listings for both the root cluster and the leaf
cluster:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh clusters</span></div><p class="Command_comment__CylBg">tsh clusters</p><p class="Command_comment__CylBg">Cluster Name                                          Status Cluster Type Selected</p><p class="Command_comment__CylBg">----------------------------------------------------- ------ ------------ --------</p><p class="Command_comment__CylBg">rootcluster.example.com                               online root         *</p><p class="Command_comment__CylBg">leafcluster.example.com                               online leaf</p></div></pre></div></div>
<!-- -->
<h2 class="Headers_wrapper__3kKzt Headers_h2__1ZiBu" id="step-35-manage-access-to-your-trusted-cluster">Step 3/5. Manage access to your Trusted Cluster<!-- --> <a class="Headers_anchor__MXvpy" href="#step-35-manage-access-to-your-trusted-cluster"></a></h2>
<h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="apply-labels">Apply labels<!-- --> <a class="Headers_anchor__MXvpy" href="#apply-labels"></a></h3>
<p class="Tags_p__rxpze">When you created a <code class="Code_wrapper__imYlP">trusted_cluster</code> resource on the leaf cluster, the leaf
cluster&#x27;s Auth Service sent a request to the root cluster&#x27;s Proxy Service to
validate the Trusted Cluster. After validating the request, the root cluster&#x27;s
Auth Service created a <code class="Code_wrapper__imYlP">remote_cluster</code> resource to represent the Trusted
Cluster.</p>
<p class="Tags_p__rxpze">By applying labels to the <code class="Code_wrapper__imYlP">remote_cluster</code> resource on the root cluster, you can
manage access to the leaf cluster. It is not possible to manage labels on the
leaf clusterallowing leaf clusters to propagate their own labels could create a
problem with rogue clusters updating their labels to unexpected values.</p>
<p class="Tags_p__rxpze">To retrieve a <code class="Code_wrapper__imYlP">remote_cluster</code>, make sure you are logged in to the root cluster
and run the following command:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl get rc</span></div><p class="Command_comment__CylBg"></p><p class="Command_comment__CylBg">kind: remote_cluster</p><p class="Command_comment__CylBg">metadata:</p><p class="Command_comment__CylBg">  id: 1651261581522597792</p><p class="Command_comment__CylBg">  name: leafcluster.teleport.sh</p><p class="Command_comment__CylBg">status:</p><p class="Command_comment__CylBg">  connection: online</p><p class="Command_comment__CylBg">  last_heartbeat: &quot;2022-04-29T19:45:35.052864534Z&quot;</p><p class="Command_comment__CylBg">version: v3</p></div></pre></div></div>
<p class="Tags_p__rxpze">Still logged in to the root cluster, use <code class="Code_wrapper__imYlP">tctl</code> to update the labels on the leaf
cluster:</p>
<!-- -->
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl update rc/leafcluster.example.com --set-labels=env=demo</span></div><p class="Command_comment__CylBg"></p><p class="Command_comment__CylBg" data-type="descr">Cluster leafcluster.example.com has been updated</p></div></pre></div></div>
<h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="change-cluster-access-privileges">Change cluster access privileges<!-- --> <a class="Headers_anchor__MXvpy" href="#change-cluster-access-privileges"></a></h3>
<p class="Tags_p__rxpze">At this point, the <code class="Code_wrapper__imYlP">tctl get rc</code> command may return an empty result, and
<code class="Code_wrapper__imYlP">tsh clusters</code> may only display the root cluster.</p>
<p class="Tags_p__rxpze">This is because, if a Trusted Cluster has a label, a user must have explicit
permission to access clusters with that label. Otherwise, the Auth Service will
not return information about that cluster when a user runs <code class="Code_wrapper__imYlP">tctl get rc</code> or
<code class="Code_wrapper__imYlP">tsh clusters</code>.</p>
<p class="Tags_p__rxpze">While logged in to the root cluster, create a role that allows access to your
Trusted Cluster by adding the following content to a file called
<code class="Code_wrapper__imYlP">demo-cluster-access.yaml</code>:</p>
<div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-yaml"><span class="hljs-attr">kind:</span> <span class="hljs-string">role</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">demo-cluster-access</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">allow:</span>
    <span class="hljs-attr">cluster_labels:</span>
      <span class="hljs-attr">&#x27;env&#x27;:</span> <span class="hljs-string">&#x27;demo&#x27;</span>
<span class="hljs-attr">version:</span> <span class="hljs-string">v5</span>
</code></pre></div></div>
<p class="Tags_p__rxpze">Create the role:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl create demo-cluster-access.yaml</span></div><p class="Command_comment__CylBg">role &#x27;demo-cluster-access&#x27; has been created</p></div></pre></div></div>
<p class="Tags_p__rxpze">Assign the <code class="Code_wrapper__imYlP">demo-cluster-access</code> role to your Teleport user by running the following
commands, depending on whether you authenticate as a local Teleport user or via
the <code class="Code_wrapper__imYlP">github</code>, <code class="Code_wrapper__imYlP">saml</code>, or <code class="Code_wrapper__imYlP">oidc</code> authentication connectors:</p>
<div class="Tabs_wrapper__fSVhx"><ul class="TabLabel_header__b6rSk"><li><button disabled="" class="HeadlessButton_wrapper__L3jt_ TabLabel_label__g5DwO TabLabel_selected__KMdAy">Local User</button></li><li><button class="HeadlessButton_wrapper__L3jt_ TabLabel_label__g5DwO TabLabel_default__XN_rg">GitHub</button></li><li><button class="HeadlessButton_wrapper__L3jt_ TabLabel_label__g5DwO TabLabel_default__XN_rg">SAML</button></li><li><button class="HeadlessButton_wrapper__L3jt_ TabLabel_label__g5DwO TabLabel_default__XN_rg">OIDC</button></li></ul><div><div class="TabItem_item__NgSOc"><p class="Tags_p__rxpze">Retrieve your local user&#x27;s configuration resource:</p><div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl get users/$(tsh status -f json | jq -r &#x27;.active.username&#x27;) &gt; out.yaml</span></div></div></pre></div></div><p class="Tags_p__rxpze">Edit <code class="Code_wrapper__imYlP">out.yaml</code>, adding <code class="Code_wrapper__imYlP">demo-cluster-access</code> to the list of existing roles:</p><div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-diff">  roles:
   - access
   - auditor
   - editor
<span class="hljs-addition">+  - demo-cluster-access</span>
</code></pre></div></div><p class="Tags_p__rxpze">Apply your changes:</p><div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl create -f out.yaml</span></div></div></pre></div></div></div></div><div class="TabItem_hidden__FiJ6y"><div class="TabItem_item__NgSOc"><p class="Tags_p__rxpze">Retrieve your <code class="Code_wrapper__imYlP">github</code>  configuration resource:</p><div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl get github/github --with-secrets &gt; github.yaml</span></div></div></pre></div></div><p class="Tags_p__rxpze">Edit <code class="Code_wrapper__imYlP">github.yaml</code>, adding <code class="Code_wrapper__imYlP">demo-cluster-access</code> to the
<code class="Code_wrapper__imYlP">teams_to_roles</code> section. The team you will map to this role will depend on how
you have designed your organization&#x27;s RBAC, but it should be the smallest team
possible within your organization. This team must also include your user.</p><p class="Tags_p__rxpze">Here is an example:</p><div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-diff">  teams_to_roles:
    - organization: octocats
      team: admins
      roles:
        - access
<span class="hljs-addition">+       - demo-cluster-access</span>
</code></pre></div></div><p class="Tags_p__rxpze">Apply your changes:</p><div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl create -f github.yaml</span></div></div></pre></div></div><div class="Admonition_wrapper__XWnZD Admonition_warning__V3OvL"><div class="Admonition_header__Gai9l">Warning</div><div class="Admonition_body__ooUKA"><p class="Tags_p__rxpze">Note the <code class="Code_wrapper__imYlP">--with-secrets</code> flag in the <code class="Code_wrapper__imYlP">tctl get</code> command. This adds the value of
<code class="Code_wrapper__imYlP">spec.signing_key_pair.private_key</code> to <code class="Code_wrapper__imYlP">saml.yaml</code>. This is a sensitive value,
so take precautions when creating this file and remove it after updating the resource.</p></div></div></div></div><div class="TabItem_hidden__FiJ6y"><div class="TabItem_item__NgSOc"><p class="Tags_p__rxpze">Retrieve your <code class="Code_wrapper__imYlP">saml</code>  configuration resource:</p><div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl get --with-secrets saml/mysaml &gt; saml.yaml</span></div></div></pre></div></div><p class="Tags_p__rxpze">Edit <code class="Code_wrapper__imYlP">saml.yaml</code>, adding <code class="Code_wrapper__imYlP">demo-cluster-access</code> to the
<code class="Code_wrapper__imYlP">attributes_to_roles</code> section. The attribute you will map to this role will
depend on how you have designed your organization&#x27;s RBAC, but it should be the
smallest group possible within your organization. This group must also include
your user.</p><p class="Tags_p__rxpze">Here is an example:</p><div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-diff">  attributes_to_roles:
    - name: &quot;groups&quot;
      value: &quot;my-group&quot;
      roles:
        - access
<span class="hljs-addition">+       - demo-cluster-access</span>
</code></pre></div></div><p class="Tags_p__rxpze">Apply your changes:</p><div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl create -f saml.yaml</span></div></div></pre></div></div><div class="Admonition_wrapper__XWnZD Admonition_warning__V3OvL"><div class="Admonition_header__Gai9l">Warning</div><div class="Admonition_body__ooUKA"><p class="Tags_p__rxpze">Note the <code class="Code_wrapper__imYlP">--with-secrets</code> flag in the <code class="Code_wrapper__imYlP">tctl get</code> command. This adds the value of
<code class="Code_wrapper__imYlP">spec.signing_key_pair.private_key</code> to <code class="Code_wrapper__imYlP">saml.yaml</code>. This is a sensitive value,
so take precautions when creating this file and remove it after updating the resource.</p></div></div></div></div><div class="TabItem_hidden__FiJ6y"><div class="TabItem_item__NgSOc"><p class="Tags_p__rxpze">Retrieve your <code class="Code_wrapper__imYlP">oidc</code>  configuration resource:</p><div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl get oidc/myoidc --with-secrets &gt; oidc.yaml</span></div></div></pre></div></div><p class="Tags_p__rxpze">Edit <code class="Code_wrapper__imYlP">oidc.yaml</code>, adding <code class="Code_wrapper__imYlP">demo-cluster-access</code> to the
<code class="Code_wrapper__imYlP">claims_to_roles</code> section. The claim you will map to this role will depend on
how you have designed your organization&#x27;s RBAC, but it should be the smallest
group possible within your organization. This group must also include your
user.</p><p class="Tags_p__rxpze">Here is an example:</p><div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-diff">  claims_to_roles:
    - name: &quot;groups&quot;
      value: &quot;my-group&quot;
      roles:
        - access
<span class="hljs-addition">+       - demo-cluster-access</span>
</code></pre></div></div><p class="Tags_p__rxpze">Apply your changes:</p><div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl create -f saml.yaml</span></div></div></pre></div></div><div class="Admonition_wrapper__XWnZD Admonition_warning__V3OvL"><div class="Admonition_header__Gai9l">Warning</div><div class="Admonition_body__ooUKA"><p class="Tags_p__rxpze">Note the <code class="Code_wrapper__imYlP">--with-secrets</code> flag in the <code class="Code_wrapper__imYlP">tctl get</code> command. This adds the value of
<code class="Code_wrapper__imYlP">spec.signing_key_pair.private_key</code> to <code class="Code_wrapper__imYlP">saml.yaml</code>. This is a sensitive value,
so take precautions when creating this file and remove it after updating the resource.</p></div></div></div></div></div>
<p class="Tags_p__rxpze">Log out of your Teleport cluster and log in again to assume the new role.</p>
<p class="Tags_p__rxpze">Confirm that the updated labels have been set:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl get rc</span></div><p class="Command_comment__CylBg"></p><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">sudo tctl get rc</span></div><p class="Command_comment__CylBg">kind: remote_cluster</p><p class="Command_comment__CylBg">metadata:</p><p class="Command_comment__CylBg">  id: 1651262381521336026</p><p class="Command_comment__CylBg">  labels:</p><p class="Command_comment__CylBg">    env: demo</p><p class="Command_comment__CylBg">  name: rootcluster.example.com</p><p class="Command_comment__CylBg">status:</p><p class="Command_comment__CylBg">  connection: online</p><p class="Command_comment__CylBg">  last_heartbeat: &quot;2022-04-29T19:55:35.053054594Z&quot;</p><p class="Command_comment__CylBg">version: v3</p></div></pre></div></div>
<h2 class="Headers_wrapper__3kKzt Headers_h2__1ZiBu" id="step-45-access-a-node-in-your-remote-cluster">Step 4/5. Access a Node in your remote cluster<!-- --> <a class="Headers_anchor__MXvpy" href="#step-45-access-a-node-in-your-remote-cluster"></a></h2>
<p class="Tags_p__rxpze">With the <code class="Code_wrapper__imYlP">trusted_cluster</code> resource you created earlier, you can log in to the
Node in your leaf cluster as a user of your root cluster.</p>
<p class="Tags_p__rxpze">First, make sure that you are logged in to root cluster:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh logout</span></div><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh --proxy=rootcluster.example.com --user=myuser login</span></div></div></pre></div></div>
<!-- -->
<p class="Tags_p__rxpze">To log in to your Node, confirm that your Node is joined to your leaf cluster:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh ls --cluster=leafcluster.example.com</span></div><p class="Command_comment__CylBg"></p><p class="Command_comment__CylBg">Node Name       Address        Labels</p><p class="Command_comment__CylBg">--------------- -------------- ------------------------------------</p><p class="Command_comment__CylBg">mynode          127.0.0.1:3022 env=demo,hostname=ip-172-30-13-38</p></div></pre></div></div>
<p class="Tags_p__rxpze">SSH into your Node:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tsh ssh --cluster=leafcluster.example.com <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d8aeb1abb1acb7aa98b5a1b6b7bcbd">[email&#160;protected]</a></span></div></div></pre></div></div>
<div class="Details_wrapper__MX6Iv" id="how-does-this-work"><button class="HeadlessButton_wrapper__L3jt_ Details_header__6xc7O"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_md__bLDVV Details_icon__gixIB"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg><div class="Details_description__OUAC9"><div class="Details_title__dvnfB">How does this work?</div></div><a class="Details_anchor__XEvS8" href="#how-does-this-work"></a></button><div class="Details_body__8bS3R"><p class="Tags_p__rxpze">The Teleport Auth Service on the leaf cluster checks the permissions of users in
remote clusters similarly to how it checks permissions for users in the same
cluster: using certificate-based SSH authentication.</p><p class="Tags_p__rxpze">You can think of an SSH certificate as a &quot;permit&quot; issued and time-stamped by a
certificate authority. A certificate contains four important pieces of data:</p><ul class="Tags_ul__a2l5n">
<li class="Tags_li__NI3VS">List of allowed Unix logins a user can use. They are called &quot;principals&quot; in
the certificate.</li>
<li class="Tags_li__NI3VS">Signature of the certificate authority that issued it (the Teleport Auth Service)</li>
<li class="Tags_li__NI3VS">Metadata (certificate extensions): additional data protected by the signature
above. Teleport uses the metadata to store the list of user roles and SSH
options like &quot;permit-agent-forwarding&quot;.</li>
<li class="Tags_li__NI3VS">The expiration date.</li>
</ul><p class="Tags_p__rxpze">When a user from the root cluster attempts to access a Node in the leaf cluster,
the leaf cluster&#x27;s Auth Service authenticates the user&#x27;s certificate and reads
these pieces of data from it. It then performs the following actions:</p><ul class="Tags_ul__a2l5n">
<li class="Tags_li__NI3VS">Checks that the certificate signature matches one of its Trusted Clusters.</li>
<li class="Tags_li__NI3VS">Applies role mapping (as discussed earlier) to associate a role on the leaf
cluster with one of the remote user&#x27;s roles.</li>
<li class="Tags_li__NI3VS">Checks if the local role allows the requested identity (Unix login) to have
access.</li>
<li class="Tags_li__NI3VS">Checks that the certificate has not expired.</li>
</ul></div></div>
<div class="Details_wrapper__MX6Iv" id="what-if-youre-using-a-load-balancer"><button class="HeadlessButton_wrapper__L3jt_ Details_header__6xc7O"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" class="Icon_wrapper__8ru25 Icon_md__bLDVV Details_icon__gixIB"><path fill="currentColor" d="M0 4.4c0-.102.042-.205.124-.283a.437.437 0 0 1 .595 0L8 11.034l7.281-6.917a.437.437 0 0 1 .596 0 .386.386 0 0 1 0 .566l-7.58 7.2a.437.437 0 0 1-.595 0l-7.579-7.2A.388.388 0 0 1 0 4.399V4.4Z"></path></svg><div class="Details_description__OUAC9"><div class="Details_title__dvnfB">What if you&#x27;re using a load balancer?</div></div><a class="Details_anchor__XEvS8" href="#what-if-youre-using-a-load-balancer"></a></button><div class="Details_body__8bS3R"><p class="Tags_p__rxpze">The leaf cluster establishes a reverse tunnel to the root cluster even if the
root cluster uses multiple proxies behind a load balancer (LB) or a DNS entry
with multiple values. In this case, the leaf cluster establishes a tunnel to
<em>every</em> proxy in the root cluster.</p><p class="Tags_p__rxpze">This requires that an LB use a round-robin or a similar balancing algorithm.
Do not use sticky load balancing algorithms (i.e., &quot;session affinity&quot; or
&quot;sticky sessions&quot;) with Teleport Proxies.</p></div></div>
<div class="Admonition_wrapper__XWnZD Admonition_tip__8KHjE"><div class="Admonition_header__Gai9l">Note</div><div class="Admonition_body__ooUKA"><p class="Tags_p__rxpze">Trusted Clusters work only in one direction. In the example above, users from
the leaf cluster cannot see or connect to Nodes in the root cluster.</p></div></div>
<h2 class="Headers_wrapper__3kKzt Headers_h2__1ZiBu" id="step-55-remove-trust-between-your-clusters">Step 5/5. Remove trust between your clusters<!-- --> <a class="Headers_anchor__MXvpy" href="#step-55-remove-trust-between-your-clusters"></a></h2>
<h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="temporarily-disable-a-trusted-cluster">Temporarily disable a Trusted Cluster<!-- --> <a class="Headers_anchor__MXvpy" href="#temporarily-disable-a-trusted-cluster"></a></h3>
<p class="Tags_p__rxpze">You can temporarily disable the trust relationship by logging in to the leaf
cluster and editing the <code class="Code_wrapper__imYlP">trusted_cluster</code> resource you created earlier.</p>
<p class="Tags_p__rxpze">Retrieve the Trusted Cluster resource you created earlier:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl get trusted_cluster/rootcluster.example.com &gt; trusted_cluster.yaml</span></div></div></pre></div></div>
<!-- -->
<p class="Tags_p__rxpze">Make the following change to the resource:</p>
<div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-diff"> spec:
<span class="hljs-deletion">-  enabled: true</span>
<span class="hljs-addition">+  enabled: false</span>
   role_map:
   - local:
     - visitor
</code></pre></div></div>
<p class="Tags_p__rxpze">Update the Trusted Cluster:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl create --force trusted_cluster.yaml</span></div></div></pre></div></div>
<p class="Tags_p__rxpze">This closes the reverse tunnel between your leaf cluster and your root cluster.
It also deactivates the root cluster&#x27;s certificate authority on
the leaf cluster.</p>
<p class="Tags_p__rxpze">You can enable the trust relationship again by setting <code class="Code_wrapper__imYlP">enabled</code> to <code class="Code_wrapper__imYlP">true</code>.</p>
<h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="remove-a-leaf-cluster-relationship-from-both-sides">Remove a leaf cluster relationship from both sides<!-- --> <a class="Headers_anchor__MXvpy" href="#remove-a-leaf-cluster-relationship-from-both-sides"></a></h3>
<p class="Tags_p__rxpze">If you want to remove a trust relationship without the possibility of restoring
it later, you can take the following steps.</p>
<p class="Tags_p__rxpze">On the leaf cluster, run the following command. This performs the same tasks as
setting <code class="Code_wrapper__imYlP">enabled</code> to <code class="Code_wrapper__imYlP">false</code> in a <code class="Code_wrapper__imYlP">trusted_cluster</code> resource, but also removes
the Trusted Cluster resource from the Auth Service backend:</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl rm trusted_cluster/rootcluster.example.com</span></div></div></pre></div></div>
<!-- -->
<p class="Tags_p__rxpze">Next, run the following command on the root cluster. This command deletes the
certificate authorities associated with the remote cluster and removes the
<code class="Code_wrapper__imYlP">remote_cluster</code> resource from the root cluster&#x27;s Auth Service backend.</p>
<div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">tctl rm rc/leafcluster.example.com</span></div></div></pre></div></div>
<!-- -->
<div class="Admonition_wrapper__XWnZD Admonition_tip__8KHjE"><div class="Admonition_header__Gai9l">Removing the relationship from the root side only</div><div class="Admonition_body__ooUKA"><p class="Tags_p__rxpze">You can remove the relationship by running only <code class="Code_wrapper__imYlP">tctl rm rc/leaf.example.com</code>.</p><p class="Tags_p__rxpze">The leaf cluster will continue to try and ping the root cluster, but will not
be able to connect. To re-establish the Trusted Cluster relationship, the
Trusted Cluster has to be created again from the leaf cluster.</p></div></div>
<h2 class="Headers_wrapper__3kKzt Headers_h2__1ZiBu" id="troubleshooting">Troubleshooting<!-- --> <a class="Headers_anchor__MXvpy" href="#troubleshooting"></a></h2>
<div class="Tabs_wrapper__fSVhx"><ul class="TabLabel_header__b6rSk"><li><button disabled="" class="HeadlessButton_wrapper__L3jt_ TabLabel_label__g5DwO TabLabel_selected__KMdAy">Self-Hosted</button></li><li><button class="HeadlessButton_wrapper__L3jt_ TabLabel_label__g5DwO TabLabel_default__XN_rg">Teleport Cloud</button></li></ul><div><div class="TabItem_item__NgSOc"><p class="Tags_p__rxpze">There are three common types of problems Teleport administrators can run into when configuring
trust between two clusters:</p><ul class="Tags_ul__a2l5n">
<li class="Tags_li__NI3VS"><strong>HTTPS configuration</strong>: when the root cluster uses a self-signed or invalid HTTPS certificate.</li>
<li class="Tags_li__NI3VS"><strong>Connectivity problems</strong>: when a leaf cluster does not show up in the output
of <code class="Code_wrapper__imYlP">tsh clusters</code> on the root cluster.</li>
<li class="Tags_li__NI3VS"><strong>Access problems</strong>: when users from the root cluster get &quot;access denied&quot; error messages
trying to connect to nodes on the leaf cluster.</li>
</ul><h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="https-configuration">HTTPS configuration<!-- --> <a class="Headers_anchor__MXvpy" href="#https-configuration"></a></h3><p class="Tags_p__rxpze">If the <code class="Code_wrapper__imYlP">web_proxy_addr</code> endpoint of the root cluster uses a self-signed or
invalid HTTPS certificate, you will get an error: &quot;the trusted cluster uses
misconfigured HTTP/TLS certificate&quot;. For ease of testing, the <code class="Code_wrapper__imYlP">teleport</code> daemon
on the leaf cluster can be started with the <code class="Code_wrapper__imYlP">--insecure</code> CLI flag to accept
self-signed certificates. Make sure to configure HTTPS properly and remove the
insecure flag for production use.</p><h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="connectivity-problems">Connectivity problems<!-- --> <a class="Headers_anchor__MXvpy" href="#connectivity-problems"></a></h3><p class="Tags_p__rxpze">To troubleshoot connectivity problems, enable verbose output for the Auth
Servers on both clusters. Usually this can be done by adding <code class="Code_wrapper__imYlP">--debug</code> flag to
<code class="Code_wrapper__imYlP">teleport start --debug</code>. You can also do this by updating the configuration
file for both Auth Servers:</p><div class="Pre_wrapper__S_iDY"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><code class="hljs language-yaml"><span class="hljs-comment"># Snippet from /etc/teleport.yaml</span>
<span class="hljs-attr">teleport:</span>
  <span class="hljs-attr">log:</span>
    <span class="hljs-attr">output:</span> <span class="hljs-string">stderr</span>
    <span class="hljs-attr">severity:</span> <span class="hljs-string">DEBUG</span>
</code></pre></div></div><p class="Tags_p__rxpze">On systemd-based distributions, you can watch the log output via:</p><div class="Pre_wrapper__S_iDY Snippet_wrapper__QlEzo"><button class="HeadlessButton_wrapper__L3jt_ Pre_button__dIlBw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_md__bLDVV"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><div><pre class="Code_wrapper___RON_ Pre_code__8ki72"><div class="Snippet_scroll__PG5sN"><div class="Command_command__rqeSg"><button class="HeadlessButton_wrapper__L3jt_ Command_button__n9Wzu"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="Icon_wrapper__8ru25 Icon_sm__0u4Da"><path fill="currentColor" fill-rule="evenodd" d="M20.713 4.8h-2.978v-3c0-.992-.801-1.8-1.787-1.8H7.015a.598.598 0 0 0-.422.175l-4.17 4.2a.602.602 0 0 0-.173.425v12.6c0 .992.802 1.8 1.787 1.8h2.978v3c0 .992.801 1.8 1.786 1.8h11.912c.985 0 1.787-.808 1.787-1.8V6.6c0-.992-.802-1.8-1.787-1.8ZM7.015 1.448V4.2c0 .331-.267.6-.596.6H3.688l3.327-3.352ZM3.44 17.4c0 .331.267.6.596.6h2.978V9.6c0-.16.062-.312.174-.425l4.169-4.2a.598.598 0 0 1 .421-.175h4.765v-3c0-.331-.267-.6-.596-.6H8.206v3c0 .992-.802 1.8-1.787 1.8H3.441v11.4Zm8.34-11.152V9c0 .331-.266.6-.595.6H8.452l3.327-3.352ZM20.713 22.8a.598.598 0 0 0 .596-.6V6.6c0-.331-.267-.6-.596-.6h-7.742v3c0 .992-.802 1.8-1.787 1.8H8.206v11.4c0 .331.267.6.595.6h11.912Z"></path></svg></button><span class="Command_line__6ezKE" data-content="$ ">journalctl -fu teleport</span></div></div></pre></div></div><p class="Tags_p__rxpze">Most of the time you will find out that either a join token is
mismatched/expired, or the network addresses for <code class="Code_wrapper__imYlP">tunnel_addr</code> or
<code class="Code_wrapper__imYlP">web_proxy_addr</code> cannot be reached due to pre-existing firewall rules or
how your network security groups are configured on AWS.</p><h3 class="Headers_wrapper__3kKzt Headers_h3__HXmV0" id="access-problems">Access problems<!-- --> <a class="Headers_anchor__MXvpy" href="#access-problems"></a></h3><p class="Tags_p__rxpze">Troubleshooting access denied messages can be challenging. A Teleport administrator
should check to see the following:</p><ul class="Tags_ul__a2l5n">
<li class="Tags_li__NI3VS">Which roles a user is assigned on the root cluster when they retrieve their SSH
certificate via <code class="Code_wrapper__imYlP">tsh login</code>. You can inspect the retrieved certificate with the
<code class="Code_wrapper__imYlP">tsh status</code> command on the client-side.</li>
<li class="Tags_li__NI3VS">Which roles a user is assigned on the leaf cluster when the role mapping takes
place. The role mapping result is reflected in the Teleport audit log. By
default, it is stored in <code class="Code_wrapper__imYlP">/var/lib/teleport/log</code> on the Auth Server of a
cluster. Check the audit log messages on both clusters to get answers for the
questions above.</li>
</ul></div></div><div class="TabItem_hidden__FiJ6y"><div class="TabItem_item__NgSOc"><div class="VersionWarning_wrapper__cY_wg"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 32 32" class="Icon_wrapper__8ru25 Icon_md__bLDVV VersionWarning_icon___OO_3"><path fill="currentColor" d="M25.009 26.5H10c-3.216 0-5.965-2.037-7.029-4.889A8.982 8.982 0 0 0 10 25h15.009a5.975 5.975 0 0 0 4.351-1.877 4.497 4.497 0 0 1-4.35 3.377Zm4.351-6.377a4.497 4.497 0 0 1-4.35 3.377H10c-3.216 0-5.965-2.037-7.029-4.889A8.982 8.982 0 0 0 10 22h15.009a5.975 5.975 0 0 0 4.351-1.877ZM10 5.5a7.511 7.511 0 0 1 6.141 3.192.75.75 0 0 0 1.362-.386 2.99 2.99 0 0 1 .582-1.585A2.982 2.982 0 0 1 20.501 5.5a2.996 2.996 0 0 1 2.169 5.069.751.751 0 0 0 .803 1.22 4.496 4.496 0 0 1 6.029 4.221 4.496 4.496 0 0 1-4.491 4.492H10c-4.135 0-7.5-3.365-7.5-7.5 0-4.136 3.365-7.5 7.5-7.5V5.5Zm15.009 4.52c-.093 0-.184.001-.276.005A4.43 4.43 0 0 0 25 8.5C25 6.019 22.981 4 20.5 4a4.523 4.523 0 0 0-4.11 2.662A9.01 9.01 0 0 0 10 4c-4.96 0-9 4.038-9 9v6c0 4.962 4.04 9 9 9h15.009A5.998 5.998 0 0 0 31 22.009v-6a5.998 5.998 0 0 0-5.991-5.991v.002Z"></path></svg>Cloud is not available for Teleport v<!-- -->.<br/>Please use the<!-- --> <a class="Link_wrapper__d2hcr Link_docs__y8XJ8" href="/docs/">latest version of Teleport Enterprise documentation</a>.</div></div></div></div>
<h2 class="Headers_wrapper__3kKzt Headers_h2__1ZiBu" id="further-reading">Further reading<!-- --> <a class="Headers_anchor__MXvpy" href="#further-reading"></a></h2>
<ul class="Tags_ul__a2l5n">
<li class="Tags_li__NI3VS">Read more about how Trusted Clusters fit into Teleport&#x27;s overall architecture:
<a class="Link_wrapper__d2hcr Link_docs__y8XJ8" href="/docs/architecture/trustedclusters/">Architecture Introduction</a>.</li>
</ul></div></div></div><nav class="AnchorNavigation_wrapper__8EZX9 DocsPage_anchor-navigation__5Vxwj"><div class="AnchorNavigation_menu__vVkf1"><div class="AnchorNavigation_header__nKqoC">Table of Contents</div><ul class="AnchorNavigation_ul__O_TZu"><li><a href="#prerequisites" class="Link_wrapper__d2hcr AnchorNavigation_link___9AHJ">Prerequisites</a></li><li><a href="#step-15-prepare-your-environment" class="Link_wrapper__d2hcr AnchorNavigation_link___9AHJ">Step 1/5. Prepare your environment</a></li><li><a href="#step-25-establish-trust-between-clusters" class="Link_wrapper__d2hcr AnchorNavigation_link___9AHJ">Step 2/5. Establish trust between clusters</a></li><li><a href="#step-35-manage-access-to-your-trusted-cluster" class="Link_wrapper__d2hcr AnchorNavigation_link___9AHJ">Step 3/5. Manage access to your Trusted Cluster</a></li><li><a href="#step-45-access-a-node-in-your-remote-cluster" class="Link_wrapper__d2hcr AnchorNavigation_link___9AHJ">Step 4/5. Access a Node in your remote cluster</a></li><li><a href="#step-55-remove-trust-between-your-clusters" class="Link_wrapper__d2hcr AnchorNavigation_link___9AHJ">Step 5/5. Remove trust between your clusters</a></li><li><a href="#troubleshooting" class="Link_wrapper__d2hcr AnchorNavigation_link___9AHJ">Troubleshooting</a></li><li><a href="#further-reading" class="Link_wrapper__d2hcr AnchorNavigation_link___9AHJ">Further reading</a></li></ul></div></nav></div><div class="Footer_wrapper__ppBFJ"><div class="DocsPage_footer__XHNSI">Have a suggestion or cant find something?</div><a href="https://github.com/gravitational/teleport/issues/new?labels=documentation&amp;template=documentation.md&amp;title=[v.12.x]%20/docs/pages/management/admin/trustedclusters.mdx" target="_blank" rel="noopener noreferrer" class="Button_wrapper__lzW7u Button_variant-secondary__t9qc1 Button_shape-lg__bdSSu">IMPROVE THE DOCS</a></div></div></main></div><script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"meta":{"title":"Teleport Trusted Clusters","description":"How to configure access and trust between two Teleport Clusters.","h1":"Trusted Clusters","navigation":[{"icon":"home","title":"Home","entries":[{"title":"Introduction","slug":"/","forScopes":["oss","enterprise","cloud"]},{"title":"Core Concepts","slug":"/core-concepts/","forScopes":["oss","enterprise","cloud"]},{"title":"Adopters","slug":"/adopters/","forScopes":["oss","enterprise","cloud"]},{"title":"Installation","slug":"/installation/","forScopes":["oss","enterprise","cloud"]},{"title":"FAQ","slug":"/faq/","forScopes":["oss","enterprise","cloud"]},{"title":"Changelog","slug":"/changelog/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"icon":"play","title":"Try out Teleport","entries":[{"title":"Introduction","slug":"/try-out-teleport/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"Linux Server","slug":"/try-out-teleport/linux-server/","forScopes":["oss","enterprise","cloud"]},{"title":"Digital Ocean","slug":"/try-out-teleport/digitalocean/","forScopes":["oss","enterprise","cloud"]},{"title":"Browser Labs","slug":"/try-out-teleport/browser-labs/","forScopes":["oss","enterprise","cloud"]},{"title":"Docker Compose","slug":"/try-out-teleport/docker-compose/","forScopes":["oss","enterprise","cloud"]},{"title":"Local Kubernetes Lab","slug":"/try-out-teleport/local-kubernetes/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"icon":"success","title":"Choose an Edition","entries":[{"title":"Introduction","slug":"/choose-an-edition/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"Teleport Enterprise Cloud","slug":"/choose-an-edition/teleport-cloud/introduction/","forScopes":["cloud"],"entries":[{"title":"Getting Started","slug":"/choose-an-edition/teleport-cloud/getting-started/","forScopes":["cloud"]},{"title":"Architecture","slug":"/choose-an-edition/teleport-cloud/architecture/","forScopes":["cloud"]},{"title":"Downloads","slug":"/choose-an-edition/teleport-cloud/downloads/","forScopes":["cloud"]},{"title":"FAQ","slug":"/choose-an-edition/teleport-cloud/faq/","forScopes":["cloud"]}]},{"title":"Teleport Enterprise","slug":"/choose-an-edition/teleport-enterprise/introduction/","forScopes":["enterprise"],"entries":[{"title":"Getting Started","slug":"/choose-an-edition/teleport-enterprise/getting-started/","forScopes":["enterprise"]},{"title":"HSM","slug":"/choose-an-edition/teleport-enterprise/hsm/","forScopes":["enterprise"]},{"title":"Google Cloud KMS","slug":"/choose-an-edition/teleport-enterprise/gcp-kms/","forScopes":["enterprise"]},{"title":"Enterprise License File","slug":"/choose-an-edition/teleport-enterprise/license/","forScopes":["enterprise"]}]}],"forScopes":["noScope"]},{"icon":"quickstart","title":"Deploy a Cluster","entries":[{"title":"Introduction","slug":"/deploy-a-cluster/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"High Availability Deployments","slug":"/deploy-a-cluster/high-availability/","forScopes":["oss","enterprise"]},{"title":"Deploy with Helm","slug":"/deploy-a-cluster/helm-deployments/","forScopes":["oss","enterprise"],"entries":[{"title":"Deploy Teleport on Kubernetes","slug":"/deploy-a-cluster/helm-deployments/kubernetes-cluster/","forScopes":["oss","enterprise"]},{"title":"AWS EKS Cluster","slug":"/deploy-a-cluster/helm-deployments/aws/","forScopes":["oss","enterprise"]},{"title":"Google Cloud GKE Cluster","slug":"/deploy-a-cluster/helm-deployments/gcp/","forScopes":["oss","enterprise"]},{"title":"DigitalOcean Kubernetes Cluster","slug":"/deploy-a-cluster/helm-deployments/digitalocean/","forScopes":["oss","enterprise"]},{"title":"Customize Deployment Config","slug":"/deploy-a-cluster/helm-deployments/custom/","forScopes":["oss","enterprise"]},{"title":"Migrating from v11 to v12","slug":"/deploy-a-cluster/helm-deployments/migration-v12/","forScopes":["oss","enterprise"]},{"title":"Kubernetes 1.25 and PSP removal","slug":"/deploy-a-cluster/helm-deployments/migration-kubernetes-1-25-psp/","forScopes":["oss","enterprise"]}]},{"title":"Deploy to your Cloud","slug":"/deploy-a-cluster/deployments/","forScopes":["oss","enterprise"],"entries":[{"title":"AWS Terraform","slug":"/deploy-a-cluster/deployments/aws-terraform/","forScopes":["oss","enterprise"]},{"title":"GCP","slug":"/deploy-a-cluster/deployments/gcp/","forScopes":["oss","enterprise"]},{"title":"IBM","slug":"/deploy-a-cluster/deployments/ibm/","forScopes":["oss","enterprise"]}]}],"forScopes":["noScope"]},{"icon":"lock","title":"Manage Access","entries":[{"title":"Introduction","slug":"/access-controls/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"Getting Started","slug":"/access-controls/getting-started/","forScopes":["oss","enterprise","cloud"]},{"title":"Cluster Access and RBAC","slug":"/access-controls/guides/","entries":[{"title":"Role Templates","slug":"/access-controls/guides/role-templates/","forScopes":["oss","enterprise","cloud"]},{"title":"Session Locking","slug":"/access-controls/guides/locking/","forScopes":["oss","enterprise","cloud"]},{"title":"Passwordless","slug":"/access-controls/guides/passwordless/","forScopes":["oss","enterprise","cloud"]},{"title":"Second Factor - WebAuthn","slug":"/access-controls/guides/webauthn/","forScopes":["oss","enterprise","cloud"]},{"title":"Per-session MFA","slug":"/access-controls/guides/per-session-mfa/","forScopes":["oss","enterprise","cloud"]},{"title":"Dual Authorization","slug":"/access-controls/guides/dual-authz/","forScopes":["enterprise","cloud"]},{"title":"Impersonation","slug":"/access-controls/guides/impersonation/","forScopes":["oss","enterprise","cloud"]},{"title":"Moderated Sessions","slug":"/access-controls/guides/moderated-sessions/","forScopes":["enterprise","cloud"]},{"title":"Hardware Key Support (Preview)","slug":"/access-controls/guides/hardware-key-support/","forScopes":["enterprise","cloud"]},{"title":"Device Trust (Preview)","slug":"/access-controls/guides/device-trust/","forScopes":["enterprise","cloud"]},{"title":"Headless WebAuthn (Preview)","slug":"/access-controls/guides/headless/","forScopes":["oss","enterprise","cloud"]},{"title":"IP Pinning (Preview)","slug":"/access-controls/guides/ip-pinning/","forScopes":["enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Single Sign-On (SSO)","slug":"/access-controls/sso/","forScopes":["enterprise","oss","cloud"],"entries":[{"title":"GitHub SSO","slug":"/access-controls/sso/github-sso/","forScopes":["enterprise","cloud","oss"]},{"title":"Azure Active Directory (AD)","slug":"/access-controls/sso/azuread/","forScopes":["enterprise","cloud"]},{"title":"Active Directory (ADFS)","slug":"/access-controls/sso/adfs/","forScopes":["enterprise","cloud"]},{"title":"Google Workspace","slug":"/access-controls/sso/google-workspace/","forScopes":["enterprise","cloud"]},{"title":"GitLab","slug":"/access-controls/sso/gitlab/","forScopes":["enterprise","cloud"]},{"title":"OneLogin","slug":"/access-controls/sso/one-login/","forScopes":["enterprise","cloud"]},{"title":"OIDC","slug":"/access-controls/sso/oidc/","forScopes":["enterprise","cloud"]},{"title":"Okta","slug":"/access-controls/sso/okta/","forScopes":["enterprise","cloud"]}]},{"title":"Teleport as an IdP (Preview)","slug":"/access-controls/idps/","forScopes":["enterprise","cloud"],"entries":[{"title":"SAML Identity Provider Guide","slug":"/access-controls/idps/saml-guide/","forScopes":["enterprise","cloud"]},{"title":"Authenticate to Grafana with Teleport SAML","slug":"/access-controls/idps/saml-grafana/","forScopes":["enterprise","cloud"]},{"title":"SAML Identity Provider Reference","slug":"/access-controls/idps/saml-reference/","forScopes":["enterprise","cloud"]}]},{"title":"Login Rules","slug":"/access-controls/login-rules/","forScopes":["enterprise","oss","cloud"],"entries":[{"title":"Set Up Login Rules","slug":"/access-controls/login-rules/guide/","forScopes":["enterprise","cloud"]},{"title":"Login Rules Reference","slug":"/access-controls/login-rules/reference/","forScopes":["enterprise","cloud"]}]},{"title":"Access Requests","slug":"/access-controls/access-requests/","forScopes":["oss","enterprise","cloud"],"entries":[{"title":"Role Requests","slug":"/access-controls/access-requests/role-requests/"},{"title":"Resource Requests","slug":"/access-controls/access-requests/resource-requests/","forScopes":["enterprise","cloud"]},{"title":"Role Requests in OSS Teleport","slug":"/access-controls/access-requests/oss-role-requests/","forScopes":["oss","enterprise","cloud"]}]},{"title":"Access Request Plugins","slug":"/access-controls/access-request-plugins/","forScopes":["enterprise","cloud"],"entries":[{"title":"Mattermost","slug":"/access-controls/access-request-plugins/ssh-approval-mattermost/","forScopes":["enterprise","cloud"]},{"title":"Microsoft Teams","slug":"/access-controls/access-request-plugins/ssh-approval-msteams/","forScopes":["enterprise","cloud"]},{"title":"PagerDuty","slug":"/access-controls/access-request-plugins/ssh-approval-pagerduty/","forScopes":["enterprise","cloud"]},{"title":"Jira","slug":"/access-controls/access-request-plugins/ssh-approval-jira/","forScopes":["enterprise","cloud"]},{"title":"Slack","slug":"/access-controls/access-request-plugins/ssh-approval-slack/","forScopes":["enterprise","cloud"]},{"title":"Email","slug":"/access-controls/access-request-plugins/ssh-approval-email/","forScopes":["enterprise","cloud"]},{"title":"Discord","slug":"/access-controls/access-request-plugins/ssh-approval-discord/","forScopes":["enterprise","cloud"]}]},{"title":"Compliance Frameworks","slug":"/access-controls/compliance-frameworks/","forScopes":["enterprise","cloud"],"entries":[{"title":"FedRAMP","slug":"/access-controls/compliance-frameworks/fedramp/","forScopes":["enterprise"]},{"title":"SOC 2","slug":"/access-controls/compliance-frameworks/soc2/","forScopes":["enterprise","cloud"]}]},{"title":"Reference","slug":"/access-controls/reference/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"icon":"wrench","title":"Manage your Cluster","entries":[{"title":"Introduction","slug":"/management/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"Admin Guides","slug":"/management/admin/","entries":[{"title":"Adding Nodes","slug":"/management/admin/adding-nodes/","forScopes":["oss","enterprise","cloud"]},{"title":"Trusted Clusters","slug":"/management/admin/trustedclusters/","forScopes":["oss","enterprise","cloud"]},{"title":"Labels","slug":"/management/admin/labels/","forScopes":["oss","enterprise","cloud"]},{"title":"Local Users","slug":"/management/admin/users/","forScopes":["oss","enterprise","cloud"]},{"title":"Troubleshooting","slug":"/management/admin/troubleshooting/","forScopes":["oss","enterprise","cloud"]},{"title":"Upgrading the Teleport Binary","slug":"/management/admin/upgrading-the-teleport-binary/","forScopes":["oss","enterprise","cloud"]},{"title":"Run Teleport as a Daemon","slug":"/management/admin/daemon/","forScopes":["oss","enterprise","cloud"]},{"title":"Run Teleport with Self-Signed Certificates","slug":"/management/admin/self-signed-certs/","forScopes":["oss","enterprise","cloud"]},{"title":"Uninstall Teleport","slug":"/management/admin/uninstall-teleport/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Operations","slug":"/management/operations/","entries":[{"title":"Scaling","slug":"/management/operations/scaling/","forScopes":["oss","enterprise"]},{"title":"Upgrading a Cluster","slug":"/management/operations/upgrading/","forScopes":["oss","enterprise","cloud"]},{"title":"Backup and Restore","slug":"/management/operations/backup-restore/","forScopes":["oss","enterprise"]},{"title":"Cert Authority Rotation","slug":"/management/operations/ca-rotation/","forScopes":["oss","enterprise","cloud"]},{"title":"TLS Routing Migration","slug":"/management/operations/tls-routing/","forScopes":["oss","enterprise"]},{"title":"Proxy Peering Migration (Preview)","slug":"/management/operations/proxy-peering/","forScopes":["enterprise"]}],"forScopes":["noScope"]},{"title":"Security","slug":"/management/security/","entries":[{"title":"Reducing the Blast Radius of Attacks","slug":"/management/security/reduce-blast-radius/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Integrations","slug":"/management/guides/","entries":[{"title":"Kubernetes Operator (Preview)","slug":"/management/guides/teleport-operator/","forScopes":["oss","enterprise","cloud"]},{"title":"Terraform Provider","slug":"/management/guides/terraform-provider/","forScopes":["oss","enterprise","cloud"]},{"title":"Docker","slug":"/management/guides/docker/","forScopes":["oss","enterprise","cloud"]},{"title":"EC2 Tags","slug":"/management/guides/ec2-tags/","forScopes":["oss","enterprise","cloud"]},{"title":"Joining Nodes via AWS IAM","slug":"/management/guides/joining-nodes-aws-iam/","forScopes":["oss","enterprise","cloud"]},{"title":"Joining Nodes via AWS EC2","slug":"/management/guides/joining-nodes-aws-ec2/","forScopes":["oss","enterprise"]},{"title":"Joining Nodes via Azure","slug":"/management/guides/joining-nodes-azure/","forScopes":["oss","enterprise","cloud"]},{"title":"Using Teleport's CA with GitHub","slug":"/management/guides/ssh-key-extensions/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Diagnostics","slug":"/management/diagnostics/","entries":[{"title":"Health Monitoring","slug":"/management/diagnostics/monitoring/","forScopes":["oss","enterprise","cloud"]},{"title":"Metrics","slug":"/management/diagnostics/metrics/","forScopes":["oss","enterprise","cloud"]},{"title":"Collecting Profiles","slug":"/management/diagnostics/profiles/","forScopes":["oss","enterprise","cloud"]},{"title":"Distributed Tracing","slug":"/management/diagnostics/tracing/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Exporting Audit Events","slug":"/management/export-audit-events/","entries":[{"title":"Export Audit Events to Fluentd","slug":"/management/export-audit-events/fluentd/","forScopes":["enterprise","cloud"]},{"title":"Export Audit Events to Datadog","slug":"/management/export-audit-events/datadog/","forScopes":["enterprise","cloud"]},{"title":"Export Audit Events to the Elastic Stack","slug":"/management/export-audit-events/elastic-stack/","forScopes":["enterprise","cloud"]},{"title":"Export Audit Events to Splunk","slug":"/management/export-audit-events/splunk/","forScopes":["enterprise","cloud"]}],"forScopes":["noScope"]}],"forScopes":["noScope"]},{"icon":"connect","title":"Connect your Client","entries":[{"title":"Introduction","slug":"/connect-your-client/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"Using tsh","slug":"/connect-your-client/tsh/","forScopes":["oss","enterprise","cloud"]},{"title":"Using the Web UI","slug":"/connect-your-client/web-ui/","forScopes":["oss","enterprise","cloud"]},{"title":"Using Teleport Connect","slug":"/connect-your-client/teleport-connect/","forScopes":["oss","enterprise","cloud"]},{"title":"Database GUI Clients","slug":"/connect-your-client/gui-clients/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"icon":"window","title":"Application Access","entries":[{"title":"Introduction","slug":"/application-access/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"Getting Started","slug":"/application-access/getting-started/","forScopes":["oss","enterprise","cloud"]},{"title":"Securing Cloud Provider APIs","slug":"/application-access/cloud-apis/","entries":[{"title":"Google Cloud CLI Access","slug":"/application-access/cloud-apis/google-cloud/","forScopes":["oss","enterprise","cloud"]},{"title":"AWS CLI and Console Access","slug":"/application-access/cloud-apis/aws-console/","forScopes":["oss","enterprise","cloud"]},{"title":"Azure CLI Access","slug":"/application-access/cloud-apis/azure/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Securing Internal Applications","slug":"/application-access/guides/","entries":[{"title":"Web App Access","slug":"/application-access/guides/connecting-apps/","forScopes":["oss","enterprise","cloud"]},{"title":"TCP App Access (Preview)","slug":"/application-access/guides/tcp/","forScopes":["oss","enterprise","cloud"]},{"title":"API Access","slug":"/application-access/guides/api-access/","forScopes":["oss","enterprise","cloud"]},{"title":"Dynamic Registration","slug":"/application-access/guides/dynamic-registration/","forScopes":["oss","enterprise","cloud"]},{"title":"AWS DynamoDB","slug":"/application-access/guides/dynamodb/","forScopes":["oss","enterprise","cloud"]},{"title":"High Availability","slug":"/application-access/guides/ha/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Using Teleport-Signed JWTs","slug":"/application-access/jwt/","entries":[{"title":"Introduction","slug":"/application-access/jwt/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"ElasticSearch","slug":"/application-access/jwt/elasticsearch/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Access Controls","slug":"/application-access/controls/","forScopes":["oss","enterprise","cloud"]},{"title":"Reference","slug":"/application-access/reference/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"icon":"server","title":"Server Access","entries":[{"title":"Introduction","slug":"/server-access/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"Getting Started","slug":"/server-access/getting-started/","forScopes":["oss","enterprise","cloud"]},{"title":"Guides","slug":"/server-access/guides/","entries":[{"title":"Using Teleport with PAM","slug":"/server-access/guides/ssh-pam/","forScopes":["oss","enterprise","cloud"]},{"title":"OpenSSH Guide","slug":"/server-access/guides/openssh/","forScopes":["oss","enterprise","cloud"]},{"title":"Recording Proxy Mode","slug":"/server-access/guides/recording-proxy-mode/","forScopes":["oss","enterprise"]},{"title":"BPF Session Recording","slug":"/server-access/guides/bpf-session-recording/","forScopes":["oss","enterprise","cloud"]},{"title":"Restricted Session","slug":"/server-access/guides/restricted-session/","forScopes":["oss","enterprise","cloud"]},{"title":"Visual Studio Code","slug":"/server-access/guides/vscode/","forScopes":["oss","enterprise","cloud"]},{"title":"JetBrains SFTP","slug":"/server-access/guides/jetbrains-sftp/","forScopes":["oss","enterprise","cloud"]},{"title":"Host User Creation","slug":"/server-access/guides/host-user-creation/","forScopes":["oss","enterprise","cloud"]},{"title":"Linux Auditing System","slug":"/server-access/guides/auditd/","forScopes":["oss","enterprise","cloud"]},{"title":"EC2 Instance Discovery (Preview)","slug":"/server-access/guides/ec2-discovery/","forScopes":["oss","enterprise","cloud"]},{"title":"Azure Instance Discovery (Preview)","slug":"/server-access/guides/azure-discovery/","forScopes":["oss","enterprise","cloud"]},{"title":"Using Teleport with Ansible","slug":"/server-access/guides/ansible/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Access Controls","slug":"/server-access/rbac/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"icon":"kubernetes","title":"Kubernetes Access","entries":[{"title":"Introduction","slug":"/kubernetes-access/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"Getting Started","slug":"/kubernetes-access/getting-started/","forScopes":["oss","enterprise","cloud"]},{"title":"Kubernetes Discovery (Preview)","slug":"/kubernetes-access/discovery/","entries":[{"title":"AWS","slug":"/kubernetes-access/discovery/aws/","forScopes":["oss","enterprise","cloud"]},{"title":"Azure","slug":"/kubernetes-access/discovery/azure/","forScopes":["oss","enterprise","cloud"]},{"title":"Google Cloud","slug":"/kubernetes-access/discovery/google-cloud/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Manual Cluster Registration","slug":"/kubernetes-access/register-clusters/","entries":[{"title":"Register a Cluster by Deploying Teleport","slug":"/kubernetes-access/register-clusters/register-via-deployment/","forScopes":["oss","enterprise","cloud"]},{"title":"Register a Cluster with Static kubeconfigs","slug":"/kubernetes-access/register-clusters/static-kubeconfig/","forScopes":["oss","enterprise","cloud"]},{"title":"Register a Cluster with IAM Joining","slug":"/kubernetes-access/register-clusters/iam-joining/","forScopes":["oss","enterprise","cloud"]},{"title":"Register Clusters Dynamically","slug":"/kubernetes-access/register-clusters/dynamic-registration/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Configuring Access","slug":"/kubernetes-access/manage-access/","entries":[{"title":"Setting up Role-Based Access Controls","slug":"/kubernetes-access/manage-access/rbac/","forScopes":["oss","enterprise","cloud"]},{"title":"Federation","slug":"/kubernetes-access/manage-access/federation/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Access Controls Reference","slug":"/kubernetes-access/controls/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"icon":"database","title":"Database Access","entries":[{"title":"Introduction","slug":"/database-access/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"Getting Started","slug":"/database-access/getting-started/","forScopes":["oss","enterprise","cloud"]},{"title":"Guides","slug":"/database-access/guides/","entries":[{"title":"AWS DynamoDB","slug":"/database-access/guides/aws-dynamodb/","forScopes":["oss","enterprise","cloud"]},{"title":"AWS ElastiCache \u0026 MemoryDB","slug":"/database-access/guides/redis-aws/","forScopes":["oss","enterprise","cloud"]},{"title":"AWS Keyspaces (Apache Cassandra)","slug":"/database-access/guides/aws-cassandra-keyspaces/","forScopes":["oss","enterprise","cloud"]},{"title":"AWS RDS \u0026 Aurora","slug":"/database-access/guides/rds/","forScopes":["oss","enterprise","cloud"]},{"title":"AWS RDS Proxy","slug":"/database-access/guides/rds-proxy/","forScopes":["oss","enterprise","cloud"]},{"title":"AWS Redshift","slug":"/database-access/guides/postgres-redshift/","forScopes":["oss","enterprise","cloud"]},{"title":"AWS Redshift Serverless","slug":"/database-access/guides/redshift-serverless/","forScopes":["oss","enterprise","cloud"]},{"title":"Azure Cache for Redis","slug":"/database-access/guides/azure-redis/","forScopes":["oss","enterprise","cloud"]},{"title":"Azure PostgreSQL \u0026 MySQL","slug":"/database-access/guides/azure-postgres-mysql/","forScopes":["oss","enterprise","cloud"]},{"title":"Azure SQL Server (Preview)","slug":"/database-access/guides/azure-sql-server-ad/","forScopes":["oss","enterprise","cloud"]},{"title":"Dynamic Registration","slug":"/database-access/guides/dynamic-registration/","forScopes":["oss","enterprise","cloud"]},{"title":"GCP Cloud SQL MySQL","slug":"/database-access/guides/mysql-cloudsql/","forScopes":["oss","enterprise","cloud"]},{"title":"GCP Cloud SQL PostgreSQL","slug":"/database-access/guides/postgres-cloudsql/","forScopes":["oss","enterprise","cloud"]},{"title":"High Availability","slug":"/database-access/guides/ha/","forScopes":["oss","enterprise","cloud"]},{"title":"MongoDB Atlas","slug":"/database-access/guides/mongodb-atlas/","forScopes":["oss","enterprise","cloud"]},{"title":"SQL Server (Preview)","slug":"/database-access/guides/sql-server-ad/","forScopes":["oss","enterprise","cloud"]},{"title":"Self-Hosted Cassandra \u0026 ScyllaDB","slug":"/database-access/guides/cassandra-self-hosted/","forScopes":["oss","enterprise","cloud"]},{"title":"Self-Hosted CockroachDB","slug":"/database-access/guides/cockroachdb-self-hosted/","forScopes":["oss","enterprise","cloud"]},{"title":"Self-Hosted Elasticsearch","slug":"/database-access/guides/elastic/","forScopes":["oss","enterprise","cloud"]},{"title":"Self-Hosted MongoDB","slug":"/database-access/guides/mongodb-self-hosted/","forScopes":["oss","enterprise","cloud"]},{"title":"Self-Hosted MySQL/MariaDB","slug":"/database-access/guides/mysql-self-hosted/","forScopes":["oss","enterprise","cloud"]},{"title":"Self-Hosted PostgreSQL","slug":"/database-access/guides/postgres-self-hosted/","forScopes":["oss","enterprise","cloud"]},{"title":"Self-Hosted Redis","slug":"/database-access/guides/redis/","forScopes":["oss","enterprise","cloud"]},{"title":"Self-Hosted Redis Cluster","slug":"/database-access/guides/redis-cluster/","forScopes":["oss","enterprise","cloud"]},{"title":"Self-Hosted Oracle (Preview)","forScopes":["enterprise","cloud"],"slug":"/database-access/guides/oracle-self-hosted/"},{"title":"Snowflake (Preview)","slug":"/database-access/guides/snowflake/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Access Controls","slug":"/database-access/rbac/","forScopes":["oss","enterprise","cloud"]},{"title":"Architecture","slug":"/database-access/architecture/","forScopes":["oss","enterprise","cloud"]},{"title":"Reference","slug":"/database-access/reference/","entries":[{"title":"Configuration","slug":"/database-access/reference/configuration/","forScopes":["oss","enterprise","cloud"]},{"title":"CLI","slug":"/database-access/reference/cli/","forScopes":["oss","enterprise","cloud"]},{"title":"Audit Events","slug":"/database-access/reference/audit/","forScopes":["oss","enterprise","cloud"]},{"title":"AWS IAM","slug":"/database-access/reference/aws/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"FAQ","slug":"/database-access/faq/","forScopes":["oss","enterprise","cloud"]},{"title":"Troubleshooting","slug":"/database-access/troubleshooting/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"icon":"desktop","title":"Desktop Access","entries":[{"title":"Introduction","slug":"/desktop-access/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"Getting Started","slug":"/desktop-access/getting-started/","forScopes":["enterprise","cloud"]},{"title":"Active Directory","slug":"/desktop-access/active-directory/","forScopes":["oss","enterprise","cloud"]},{"title":"Active Directory (Manual)","slug":"/desktop-access/active-directory-manual/","forScopes":["oss","enterprise","cloud"]},{"title":"Access Controls","slug":"/desktop-access/rbac/","forScopes":["oss","enterprise","cloud"]},{"title":"Directory Sharing","slug":"/desktop-access/directory-sharing/","forScopes":["oss","enterprise","cloud"]},{"title":"Reference","slug":"/desktop-access/reference/","entries":[{"title":"Configuration","slug":"/desktop-access/reference/configuration/","forScopes":["oss","enterprise","cloud"]},{"title":"Audit Events","slug":"/desktop-access/reference/audit/","forScopes":["oss","enterprise","cloud"]},{"title":"Clipboard Sharing","slug":"/desktop-access/reference/clipboard/","forScopes":["oss","enterprise","cloud"]},{"title":"Session Recording","slug":"/desktop-access/reference/sessions/","forScopes":["oss","enterprise","cloud"]},{"title":"CLI","slug":"/desktop-access/reference/cli/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Troubleshooting","slug":"/desktop-access/troubleshooting/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"icon":"chip","title":"Machine ID","entries":[{"title":"Introduction","slug":"/machine-id/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"Getting Started","slug":"/machine-id/getting-started/","forScopes":["oss","enterprise","cloud"]},{"title":"Guides","slug":"/machine-id/guides/","entries":[{"title":"Ansible","slug":"/machine-id/guides/ansible/","forScopes":["oss","enterprise","cloud"]},{"title":"GitHub Actions","slug":"/machine-id/guides/github-actions/","forScopes":["oss","enterprise","cloud"]},{"title":"CircleCI","slug":"/machine-id/guides/circleci/","forScopes":["oss","enterprise","cloud"]},{"title":"GitHub Actions \u0026 Kubernetes","slug":"/machine-id/guides/github-actions-kubernetes/","forScopes":["oss","enterprise","cloud"]},{"title":"GitLab CI","slug":"/machine-id/guides/gitlab/","forScopes":["oss","enterprise","cloud"]},{"title":"Jenkins","slug":"/machine-id/guides/jenkins/","forScopes":["oss","enterprise","cloud"]},{"title":"Databases","slug":"/machine-id/guides/databases/","forScopes":["oss","enterprise","cloud"]},{"title":"Kubernetes","slug":"/machine-id/guides/kubernetes/","forScopes":["oss","enterprise","cloud"]},{"title":"Applications","slug":"/machine-id/guides/applications/","forScopes":["oss","enterprise","cloud"]},{"title":"Host Certificates","slug":"/machine-id/guides/host-certificate/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"Architecture","slug":"/machine-id/architecture/","forScopes":["oss","enterprise","cloud"]},{"title":"Reference","slug":"/machine-id/reference/","entries":[{"title":"Configuration","slug":"/machine-id/reference/configuration/","forScopes":["oss","enterprise","cloud"]},{"title":"GitHub Actions","slug":"/machine-id/reference/github-actions/","forScopes":["oss","enterprise","cloud"]},{"title":"Telemetry","slug":"/machine-id/reference/telemetry/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"title":"FAQ","slug":"/machine-id/faq/","forScopes":["oss","enterprise","cloud"]},{"title":"Troubleshooting","slug":"/machine-id/troubleshooting/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"icon":"list","title":"API","entries":[{"title":"Introduction","slug":"/api/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"Getting Started","slug":"/api/getting-started/","forScopes":["oss","enterprise","cloud"]},{"title":"Architecture","slug":"/api/architecture/","forScopes":["oss","enterprise","cloud"]},{"title":"How to Build an Access Request Plugin","slug":"/api/access-plugin/","forScopes":["oss","enterprise","cloud"]},{"title":"Automatically Register Teleport Agents","slug":"/api/automatically-register-agents/","forScopes":["oss","enterprise","cloud"]},{"title":"Automatically Generate Roles","slug":"/api/rbac/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"icon":"wand","title":"Preview","entries":[{"title":"Upcoming Releases","slug":"/preview/upcoming-releases/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"icon":"book","title":"Reference","entries":[{"title":"Introduction","slug":"/reference/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"Config File","slug":"/reference/config/","forScopes":["oss","enterprise","cloud"]},{"title":"Config Resources","slug":"/reference/resources/","forScopes":["oss","enterprise","cloud"]},{"title":"Command Line","slug":"/reference/cli/","forScopes":["oss","enterprise","cloud"]},{"title":"Metrics","slug":"/reference/metrics/","forScopes":["oss","enterprise","cloud"]},{"title":"Terraform Resources","slug":"/reference/terraform-provider/","forScopes":["oss","enterprise","cloud"]},{"title":"Audit Events and Records","slug":"/reference/audit/","forScopes":["oss","enterprise","cloud"]},{"title":"Authentication","slug":"/reference/authentication/","forScopes":["oss","enterprise","cloud"]},{"title":"Storage Backends","slug":"/reference/backends/","forScopes":["oss","enterprise"]},{"title":"Networking","slug":"/reference/networking/","forScopes":["oss","enterprise","cloud"]},{"title":"Predicate Language","slug":"/reference/predicate-language/","forScopes":["oss","enterprise","cloud"]},{"title":"Signals","slug":"/reference/signals/","forScopes":["oss","enterprise","cloud"]},{"title":"Helm Charts","slug":"/reference/helm-reference/","entries":[{"title":"teleport-cluster","slug":"/reference/helm-reference/teleport-cluster/","forScopes":["oss","enterprise","cloud"]},{"title":"teleport-kube-agent","slug":"/reference/helm-reference/teleport-kube-agent/","forScopes":["oss","enterprise","cloud"]},{"title":"teleport-plugin-event-handler","slug":"/reference/helm-reference/teleport-plugin-event-handler/","forScopes":["oss","enterprise","cloud"]},{"title":"teleport-plugin-jira","slug":"/reference/helm-reference/teleport-plugin-jira/","forScopes":["oss","enterprise","cloud"]},{"title":"teleport-plugin-pagerduty","slug":"/reference/helm-reference/teleport-plugin-pagerduty/","forScopes":["oss","enterprise","cloud"]},{"title":"teleport-plugin-mattermost","slug":"/reference/helm-reference/teleport-plugin-mattermost/","forScopes":["oss","enterprise","cloud"]},{"title":"teleport-plugin-slack","slug":"/reference/helm-reference/teleport-plugin-slack/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]}],"forScopes":["noScope"]},{"icon":"integrations","title":"Architecture","entries":[{"title":"Introduction","slug":"/architecture/introduction/","forScopes":["oss","enterprise","cloud"]},{"title":"Authentication","slug":"/architecture/authentication/","forScopes":["oss","enterprise","cloud"]},{"title":"Authorization","slug":"/architecture/authorization/","forScopes":["oss","enterprise","cloud"]},{"title":"Teleport Proxy","slug":"/architecture/proxy/","forScopes":["oss","enterprise","cloud"]},{"title":"Trusted Clusters","slug":"/architecture/trustedclusters/","forScopes":["oss","enterprise","cloud"]},{"title":"Teleport Nodes","slug":"/architecture/nodes/","forScopes":["oss","enterprise","cloud"]},{"title":"Session Recording","slug":"/architecture/session-recording/","forScopes":["oss","enterprise","cloud"]},{"title":"TLS Routing","slug":"/architecture/tls-routing/","forScopes":["oss","enterprise","cloud"]},{"title":"Proxy Peering (Preview)","slug":"/architecture/proxy-peering/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]},{"icon":"wrench","title":"Contribute","entries":[{"title":"Documentation","slug":"/contributing/documentation/","entries":[{"title":"How to Contribute","slug":"/contributing/documentation/how-to-contribute/","forScopes":["oss","enterprise","cloud"]},{"title":"Creating Documentation Issues","slug":"/contributing/documentation/issues/","forScopes":["oss","enterprise","cloud"]},{"title":"Style Guide","slug":"/contributing/documentation/style-guide/","forScopes":["oss","enterprise","cloud"]},{"title":"UI Reference","slug":"/contributing/documentation/reference/","forScopes":["oss","enterprise","cloud"]}],"forScopes":["noScope"]}],"forScopes":["noScope"]}],"githubUrl":"https://github.com/gravitational/teleport/issues/new?labels=documentation\u0026template=documentation.md\u0026title=[v.12.x]%20/docs/pages/management/admin/trustedclusters.mdx","versions":{"current":"12.x","latest":"12.x","available":["10.x","11.x","12.x","13.x"]},"scopes":["oss","enterprise","cloud"]},"AST":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Teleport can partition compute infrastructure into multiple clusters. A cluster\nis a group of resources connected to a Teleport Auth Server. Each cluster\nmanages a separate certificate authority (CA) for all users and resources.","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":4,"column":75,"offset":229}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":4,"column":75,"offset":229}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Trusted Clusters allow the users of one cluster, the ","position":{"start":{"line":6,"column":1,"offset":231},"end":{"line":6,"column":54,"offset":284}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"root cluster","position":{"start":{"line":6,"column":56,"offset":286},"end":{"line":6,"column":68,"offset":298}}}],"position":{"start":{"line":6,"column":54,"offset":284},"end":{"line":6,"column":70,"offset":300}}},{"type":"text","value":", to\nseamlessly connect to resources in another cluster, the ","position":{"start":{"line":6,"column":70,"offset":300},"end":{"line":7,"column":57,"offset":361}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"leaf cluster","position":{"start":{"line":7,"column":59,"offset":363},"end":{"line":7,"column":71,"offset":375}}}],"position":{"start":{"line":7,"column":57,"offset":361},"end":{"line":7,"column":73,"offset":377}}},{"type":"text","value":", while\nremaining authenticated with only a single Auth Service. The leaf cluster can\nrun behind a firewall without any ingress ports open.","position":{"start":{"line":7,"column":73,"offset":377},"end":{"line":9,"column":54,"offset":516}}}],"position":{"start":{"line":6,"column":1,"offset":231},"end":{"line":9,"column":54,"offset":516}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Uses for Trusted Clusters include:","position":{"start":{"line":11,"column":1,"offset":518},"end":{"line":11,"column":35,"offset":552}}}],"position":{"start":{"line":11,"column":1,"offset":518},"end":{"line":11,"column":35,"offset":552}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Managed service providers (MSP) remotely managing the infrastructure of their clients.","position":{"start":{"line":13,"column":3,"offset":556},"end":{"line":13,"column":89,"offset":642}}}],"position":{"start":{"line":13,"column":1,"offset":554},"end":{"line":13,"column":89,"offset":642}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Device manufacturers remotely maintaining computing appliances deployed on premises.","position":{"start":{"line":14,"column":3,"offset":645},"end":{"line":14,"column":87,"offset":729}}}],"position":{"start":{"line":14,"column":1,"offset":643},"end":{"line":14,"column":87,"offset":729}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Large cloud software vendors managing multiple data centers using a common proxy.","position":{"start":{"line":15,"column":3,"offset":732},"end":{"line":15,"column":84,"offset":813}}}],"position":{"start":{"line":15,"column":1,"offset":730},"end":{"line":15,"column":84,"offset":813}}},{"type":"text","value":"\n"}],"position":{"start":{"line":13,"column":1,"offset":554},"end":{"line":15,"column":84,"offset":813}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","children":[{"type":"text","value":"Here is an example of an MSP using Trusted Clusters to obtain access to client clusters:\n","position":{"start":{"line":17,"column":1,"offset":815},"end":{"line":18,"column":1,"offset":904}}}]},{"type":"element","tagName":"img","properties":{"src":"/docs/_next/static/assets/trusted-clusters@1.5x-b3064bc46e.svg","alt":"MSP Example","width":960,"height":1057.3333333333333},"children":[],"position":{"start":{"line":18,"column":1,"offset":904},"end":{"line":18,"column":72,"offset":975}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A leaf cluster always creates an outbound reverse SSH tunnel to the root cluster and keeps the tunnel open.","position":{"start":{"line":20,"column":1,"offset":977},"end":{"line":20,"column":108,"offset":1084}}}],"position":{"start":{"line":20,"column":1,"offset":977},"end":{"line":20,"column":108,"offset":1084}}},{"type":"text","value":"\n"},{"type":"element","tagName":"notice","properties":{"type":"tip"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Individual nodes and proxies can create reverse tunnels to proxy services without creating a new cluster.\nYou don't need to set up a trusted cluster just to connect a couple of servers, kubernetes clusters or\ndatabases behind a firewall. For more information, see ","position":{"start":{"line":23,"column":1,"offset":1106},"end":{"line":25,"column":56,"offset":1370}}},{"type":"element","tagName":"a","properties":{"href":".././adding-nodes/"},"children":[{"type":"text","value":"Adding Nodes to the Cluster","position":{"start":{"line":25,"column":57,"offset":1371},"end":{"line":25,"column":84,"offset":1398}}}],"position":{"start":{"line":25,"column":56,"offset":1370},"end":{"line":25,"column":105,"offset":1419}}},{"type":"text","value":".","position":{"start":{"line":25,"column":105,"offset":1419},"end":{"line":25,"column":106,"offset":1420}}}],"position":{"start":{"line":23,"column":1,"offset":1106},"end":{"line":25,"column":106,"offset":1420}}}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When a user tries to connect to any resource inside the leaf cluster using the root's proxy\nthe connection goes through the reverse tunnel.","position":{"start":{"line":28,"column":1,"offset":1432},"end":{"line":29,"column":48,"offset":1571}}}],"position":{"start":{"line":28,"column":1,"offset":1432},"end":{"line":29,"column":48,"offset":1571}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This guide will explain how to:","position":{"start":{"line":31,"column":1,"offset":1573},"end":{"line":31,"column":32,"offset":1604}}}],"position":{"start":{"line":31,"column":1,"offset":1573},"end":{"line":31,"column":32,"offset":1604}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Add and remove Trusted Clusters using CLI commands.","position":{"start":{"line":33,"column":3,"offset":1608},"end":{"line":33,"column":54,"offset":1659}}}],"position":{"start":{"line":33,"column":1,"offset":1606},"end":{"line":33,"column":54,"offset":1659}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Enable/disable trust between clusters.","position":{"start":{"line":34,"column":3,"offset":1662},"end":{"line":34,"column":41,"offset":1700}}}],"position":{"start":{"line":34,"column":1,"offset":1660},"end":{"line":34,"column":41,"offset":1700}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Establish permission mapping between clusters using Teleport roles.","position":{"start":{"line":35,"column":3,"offset":1703},"end":{"line":35,"column":70,"offset":1770}}}],"position":{"start":{"line":35,"column":1,"offset":1701},"end":{"line":35,"column":70,"offset":1770}}},{"type":"text","value":"\n"}],"position":{"start":{"line":33,"column":1,"offset":1606},"end":{"line":35,"column":70,"offset":1770}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"prerequisites"},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":37,"column":4,"offset":1775},"end":{"line":37,"column":17,"offset":1788}}}],"position":{"start":{"line":37,"column":1,"offset":1772},"end":{"line":37,"column":17,"offset":1788}}},{"type":"text","value":"\n"},{"type":"element","tagName":"tabs","properties":{},"children":[{"type":"element","tagName":"tabitem","properties":{"scope":"oss","label":"Open Source"},"children":[{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Two running Teleport clusters. For details on how to set up your clusters, see\none of our ","position":{"start":{"line":42,"column":3,"offset":1846},"end":{"line":43,"column":14,"offset":1938}}},{"type":"element","tagName":"a","properties":{"href":"/docs/getting-started"},"children":[{"type":"text","value":"Getting Started","position":{"start":{"line":43,"column":15,"offset":1939},"end":{"line":43,"column":30,"offset":1954}}}],"position":{"start":{"line":43,"column":14,"offset":1938},"end":{"line":43,"column":54,"offset":1978}}},{"type":"text","value":" guides.","position":{"start":{"line":43,"column":54,"offset":1978},"end":{"line":43,"column":62,"offset":1986}}}],"position":{"start":{"line":42,"column":3,"offset":1846},"end":{"line":43,"column":62,"offset":1986}}},{"type":"text","value":"\n"}],"position":{"start":{"line":42,"column":1,"offset":1844},"end":{"line":43,"column":62,"offset":1986}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":45,"column":3,"offset":1990},"end":{"line":45,"column":7,"offset":1994}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tctl"}],"position":{"start":{"line":45,"column":7,"offset":1994},"end":{"line":45,"column":13,"offset":2000}}},{"type":"text","value":" admin tool and ","position":{"start":{"line":45,"column":13,"offset":2000},"end":{"line":45,"column":29,"offset":2016}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tsh"}],"position":{"start":{"line":45,"column":29,"offset":2016},"end":{"line":45,"column":34,"offset":2021}}},{"type":"text","value":" client tool version \u003e= 12.2.1.","position":{"start":{"line":45,"column":34,"offset":2021},"end":{"line":45,"column":79,"offset":2066}}}],"position":{"start":{"line":45,"column":3,"offset":1990},"end":{"line":45,"column":79,"offset":2066}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl version"}]}]},{"type":"element","tagName":"commandcomment","properties":{"data-type":"descr"},"children":[{"type":"text","value":"Teleport v12.2.1 go1.20"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":""}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh version"}]}]},{"type":"element","tagName":"commandcomment","properties":{"data-type":"descr"},"children":[{"type":"text","value":"Teleport v12.2.1 go1.20"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"See ","position":{"start":{"line":55,"column":3,"offset":2235},"end":{"line":55,"column":7,"offset":2239}}},{"type":"element","tagName":"a","properties":{"href":"/docs/installation/"},"children":[{"type":"text","value":"Installation","position":{"start":{"line":55,"column":8,"offset":2240},"end":{"line":55,"column":20,"offset":2252}}}],"position":{"start":{"line":55,"column":7,"offset":2239},"end":{"line":55,"column":45,"offset":2277}}},{"type":"text","value":" for details.","position":{"start":{"line":55,"column":45,"offset":2277},"end":{"line":55,"column":58,"offset":2290}}}],"position":{"start":{"line":55,"column":3,"offset":2235},"end":{"line":55,"column":58,"offset":2290}}},{"type":"text","value":"\n"}],"position":{"start":{"line":45,"column":1,"offset":1988},"end":{"line":55,"column":58,"offset":2290}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A Teleport Node that is joined to one of your clusters. We will refer to this\ncluster as the ","position":{"start":{"line":57,"column":3,"offset":2294},"end":{"line":58,"column":18,"offset":2389}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"leaf cluster","position":{"start":{"line":58,"column":20,"offset":2391},"end":{"line":58,"column":32,"offset":2403}}}],"position":{"start":{"line":58,"column":18,"offset":2389},"end":{"line":58,"column":34,"offset":2405}}},{"type":"text","value":" throughout this guide.","position":{"start":{"line":58,"column":34,"offset":2405},"end":{"line":58,"column":57,"offset":2428}}}],"position":{"start":{"line":57,"column":3,"offset":2294},"end":{"line":58,"column":57,"offset":2428}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"See ","position":{"start":{"line":60,"column":3,"offset":2432},"end":{"line":60,"column":7,"offset":2436}}},{"type":"element","tagName":"a","properties":{"href":"../adding-nodes/"},"children":[{"type":"text","value":"Adding Nodes","position":{"start":{"line":60,"column":8,"offset":2437},"end":{"line":60,"column":20,"offset":2449}}}],"position":{"start":{"line":60,"column":7,"offset":2436},"end":{"line":60,"column":39,"offset":2468}}},{"type":"text","value":" for how to launch a Teleport Node in\nyour cluster.","position":{"start":{"line":60,"column":39,"offset":2468},"end":{"line":61,"column":16,"offset":2521}}}],"position":{"start":{"line":60,"column":3,"offset":2432},"end":{"line":61,"column":16,"offset":2521}}},{"type":"text","value":"\n"}],"position":{"start":{"line":57,"column":1,"offset":2292},"end":{"line":61,"column":16,"offset":2521}}},{"type":"text","value":"\n"}],"position":{"start":{"line":42,"column":1,"offset":1844},"end":{"line":61,"column":16,"offset":2521}}}]},{"type":"element","tagName":"tabitem","properties":{"scope":"enterprise","label":"Enterprise"},"children":[{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Two running Teleport clusters. For details on how to set up your clusters, see\nour Enterprise ","position":{"start":{"line":67,"column":3,"offset":2591},"end":{"line":68,"column":18,"offset":2687}}},{"type":"element","tagName":"a","properties":{"href":"/docs/enterprise/getting-started"},"children":[{"type":"text","value":"Getting Started","position":{"start":{"line":68,"column":19,"offset":2688},"end":{"line":68,"column":34,"offset":2703}}}],"position":{"start":{"line":68,"column":18,"offset":2687},"end":{"line":68,"column":69,"offset":2738}}},{"type":"text","value":" guide.","position":{"start":{"line":68,"column":69,"offset":2738},"end":{"line":68,"column":76,"offset":2745}}}],"position":{"start":{"line":67,"column":3,"offset":2591},"end":{"line":68,"column":76,"offset":2745}}},{"type":"text","value":"\n"}],"position":{"start":{"line":67,"column":1,"offset":2589},"end":{"line":68,"column":76,"offset":2745}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":70,"column":3,"offset":2749},"end":{"line":70,"column":7,"offset":2753}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tctl"}],"position":{"start":{"line":70,"column":7,"offset":2753},"end":{"line":70,"column":13,"offset":2759}}},{"type":"text","value":" admin tool and ","position":{"start":{"line":70,"column":13,"offset":2759},"end":{"line":70,"column":29,"offset":2775}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tsh"}],"position":{"start":{"line":70,"column":29,"offset":2775},"end":{"line":70,"column":34,"offset":2780}}},{"type":"text","value":" client tool version \u003e= 12.2.1,\nwhich you can download by visiting the\n","position":{"start":{"line":70,"column":34,"offset":2780},"end":{"line":72,"column":1,"offset":2867}}},{"type":"element","tagName":"a","properties":{"href":"https://dashboard.gravitational.com/web/login"},"children":[{"type":"text","value":"customer portal","position":{"start":{"line":72,"column":4,"offset":2870},"end":{"line":72,"column":19,"offset":2885}}}],"position":{"start":{"line":72,"column":3,"offset":2869},"end":{"line":72,"column":67,"offset":2933}}},{"type":"text","value":".","position":{"start":{"line":72,"column":67,"offset":2933},"end":{"line":72,"column":68,"offset":2934}}}],"position":{"start":{"line":70,"column":3,"offset":2749},"end":{"line":72,"column":68,"offset":2934}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl version"}]}]},{"type":"element","tagName":"commandcomment","properties":{"data-type":"descr"},"children":[{"type":"text","value":"Teleport v12.2.1 go1.20"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":""}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh version"}]}]},{"type":"element","tagName":"commandcomment","properties":{"data-type":"descr"},"children":[{"type":"text","value":"Teleport v12.2.1 go1.20"}]}]},{"type":"text","value":"\n"}],"position":{"start":{"line":70,"column":1,"offset":2747},"end":{"line":80,"column":6,"offset":3099}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A Teleport Node that is joined to one of your clusters. We will refer to this\ncluster as the ","position":{"start":{"line":82,"column":3,"offset":3103},"end":{"line":83,"column":18,"offset":3198}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"leaf cluster","position":{"start":{"line":83,"column":20,"offset":3200},"end":{"line":83,"column":32,"offset":3212}}}],"position":{"start":{"line":83,"column":18,"offset":3198},"end":{"line":83,"column":34,"offset":3214}}},{"type":"text","value":" throughout this guide.","position":{"start":{"line":83,"column":34,"offset":3214},"end":{"line":83,"column":57,"offset":3237}}}],"position":{"start":{"line":82,"column":3,"offset":3103},"end":{"line":83,"column":57,"offset":3237}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"See ","position":{"start":{"line":85,"column":3,"offset":3241},"end":{"line":85,"column":7,"offset":3245}}},{"type":"element","tagName":"a","properties":{"href":"../adding-nodes/"},"children":[{"type":"text","value":"Adding Nodes","position":{"start":{"line":85,"column":8,"offset":3246},"end":{"line":85,"column":20,"offset":3258}}}],"position":{"start":{"line":85,"column":7,"offset":3245},"end":{"line":85,"column":39,"offset":3277}}},{"type":"text","value":" for how to launch a Teleport Node in\nyour cluster.","position":{"start":{"line":85,"column":39,"offset":3277},"end":{"line":86,"column":16,"offset":3330}}}],"position":{"start":{"line":85,"column":3,"offset":3241},"end":{"line":86,"column":16,"offset":3330}}},{"type":"text","value":"\n"}],"position":{"start":{"line":82,"column":1,"offset":3101},"end":{"line":86,"column":16,"offset":3330}}},{"type":"text","value":"\n"}],"position":{"start":{"line":67,"column":1,"offset":2589},"end":{"line":86,"column":16,"offset":3330}}}]},{"type":"element","tagName":"tabitem","properties":{"scope":"cloud","label":"Teleport Cloud"},"children":[{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A Teleport Cloud account. If you do not have one, visit the\n","position":{"start":{"line":92,"column":3,"offset":3399},"end":{"line":93,"column":1,"offset":3459}}},{"type":"element","tagName":"a","properties":{"href":"https://goteleport.com/signup/"},"children":[{"type":"text","value":"sign up page","position":{"start":{"line":93,"column":4,"offset":3462},"end":{"line":93,"column":16,"offset":3474}}}],"position":{"start":{"line":93,"column":3,"offset":3461},"end":{"line":93,"column":49,"offset":3507}}},{"type":"text","value":" to begin your free trial.","position":{"start":{"line":93,"column":49,"offset":3507},"end":{"line":93,"column":75,"offset":3533}}}],"position":{"start":{"line":92,"column":3,"offset":3399},"end":{"line":93,"column":75,"offset":3533}}},{"type":"text","value":"\n"}],"position":{"start":{"line":92,"column":1,"offset":3397},"end":{"line":93,"column":75,"offset":3533}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A second Teleport cluster, which will act as the leaf cluster. For details on\nhow to set up this cluster, see one of our\n","position":{"start":{"line":95,"column":3,"offset":3537},"end":{"line":97,"column":1,"offset":3658}}},{"type":"element","tagName":"a","properties":{"href":"/docs/getting-started"},"children":[{"type":"text","value":"Getting Started","position":{"start":{"line":97,"column":2,"offset":3659},"end":{"line":97,"column":17,"offset":3674}}}],"position":{"start":{"line":97,"column":1,"offset":3658},"end":{"line":97,"column":41,"offset":3698}}},{"type":"text","value":" guides.","position":{"start":{"line":97,"column":41,"offset":3698},"end":{"line":97,"column":49,"offset":3706}}}],"position":{"start":{"line":95,"column":3,"offset":3537},"end":{"line":97,"column":49,"offset":3706}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"As an alternative, you can set up a second Teleport Cloud account.","position":{"start":{"line":99,"column":3,"offset":3710},"end":{"line":99,"column":69,"offset":3776}}}],"position":{"start":{"line":99,"column":3,"offset":3710},"end":{"line":99,"column":69,"offset":3776}}},{"type":"text","value":"\n"}],"position":{"start":{"line":95,"column":1,"offset":3535},"end":{"line":99,"column":69,"offset":3776}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":101,"column":3,"offset":3780},"end":{"line":101,"column":7,"offset":3784}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tctl"}],"position":{"start":{"line":101,"column":7,"offset":3784},"end":{"line":101,"column":13,"offset":3790}}},{"type":"text","value":" admin tool and ","position":{"start":{"line":101,"column":13,"offset":3790},"end":{"line":101,"column":29,"offset":3806}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tsh"}],"position":{"start":{"line":101,"column":29,"offset":3806},"end":{"line":101,"column":34,"offset":3811}}},{"type":"text","value":" client tool version \u003e= 12.1.5.\nTo download these tools, visit the ","position":{"start":{"line":101,"column":34,"offset":3811},"end":{"line":102,"column":38,"offset":3891}}},{"type":"element","tagName":"a","properties":{"href":"../../../choose-an-edition/teleport-cloud/downloads/"},"children":[{"type":"text","value":"Downloads","position":{"start":{"line":102,"column":39,"offset":3892},"end":{"line":102,"column":48,"offset":3901}}}],"position":{"start":{"line":102,"column":38,"offset":3891},"end":{"line":102,"column":103,"offset":3956}}},{"type":"text","value":" page.","position":{"start":{"line":102,"column":103,"offset":3956},"end":{"line":102,"column":109,"offset":3962}}}],"position":{"start":{"line":101,"column":3,"offset":3780},"end":{"line":102,"column":109,"offset":3962}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl version"}]}]},{"type":"element","tagName":"commandcomment","properties":{"data-type":"descr"},"children":[{"type":"text","value":"Teleport v12.1.5 go1.20"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":""}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh version"}]}]},{"type":"element","tagName":"commandcomment","properties":{"data-type":"descr"},"children":[{"type":"text","value":"Teleport v12.1.5 go1.20"}]}]},{"type":"text","value":"\n"}],"position":{"start":{"line":101,"column":1,"offset":3778},"end":{"line":110,"column":6,"offset":4121}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A Teleport Node that is joined to one of your clusters. We will refer to this\ncluster as the ","position":{"start":{"line":112,"column":3,"offset":4125},"end":{"line":113,"column":18,"offset":4220}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"leaf cluster","position":{"start":{"line":113,"column":20,"offset":4222},"end":{"line":113,"column":32,"offset":4234}}}],"position":{"start":{"line":113,"column":18,"offset":4220},"end":{"line":113,"column":34,"offset":4236}}},{"type":"text","value":" throughout this guide.","position":{"start":{"line":113,"column":34,"offset":4236},"end":{"line":113,"column":57,"offset":4259}}}],"position":{"start":{"line":112,"column":3,"offset":4125},"end":{"line":113,"column":57,"offset":4259}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"See ","position":{"start":{"line":115,"column":3,"offset":4263},"end":{"line":115,"column":7,"offset":4267}}},{"type":"element","tagName":"a","properties":{"href":"../adding-nodes/"},"children":[{"type":"text","value":"Adding Nodes","position":{"start":{"line":115,"column":8,"offset":4268},"end":{"line":115,"column":20,"offset":4280}}}],"position":{"start":{"line":115,"column":7,"offset":4267},"end":{"line":115,"column":39,"offset":4299}}},{"type":"text","value":" for how to launch a Teleport Node in\nyour cluster.","position":{"start":{"line":115,"column":39,"offset":4299},"end":{"line":116,"column":16,"offset":4352}}}],"position":{"start":{"line":115,"column":3,"offset":4263},"end":{"line":116,"column":16,"offset":4352}}},{"type":"text","value":"\n"}],"position":{"start":{"line":112,"column":1,"offset":4123},"end":{"line":116,"column":16,"offset":4352}}},{"type":"text","value":"\n"}],"position":{"start":{"line":92,"column":1,"offset":3397},"end":{"line":116,"column":16,"offset":4352}}}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"details","properties":{"title":"Before you begin: read security tips","opened":"false"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When running Teleport in production, we recommend that you follow the\npractices below to avoid security incidents. These practices may differ from\nthe examples used in this guide, which are intended for demo environments:","position":{"start":{"line":3,"column":3,"offset":73},"end":{"line":5,"column":77,"offset":298}}}],"position":{"start":{"line":3,"column":3,"offset":73},"end":{"line":5,"column":77,"offset":298}}},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Avoid using ","position":{"start":{"line":7,"column":5,"offset":304},"end":{"line":7,"column":17,"offset":316}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"sudo"}],"position":{"start":{"line":7,"column":17,"offset":316},"end":{"line":7,"column":23,"offset":322}}},{"type":"text","value":" in production environments unless it's necessary.","position":{"start":{"line":7,"column":23,"offset":322},"end":{"line":7,"column":73,"offset":372}}}],"position":{"start":{"line":7,"column":3,"offset":302},"end":{"line":7,"column":73,"offset":372}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Create new, non-root, users and use test instances for experimenting with Teleport.","position":{"start":{"line":8,"column":5,"offset":377},"end":{"line":8,"column":88,"offset":460}}}],"position":{"start":{"line":8,"column":3,"offset":375},"end":{"line":8,"column":88,"offset":460}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Run Teleport's services as a non-root user unless required. Only the SSH\nService requires root access. Note that you will need root permissions (or\nthe ","position":{"start":{"line":9,"column":5,"offset":465},"end":{"line":11,"column":9,"offset":625}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"CAP_NET_BIND_SERVICE"}],"position":{"start":{"line":11,"column":9,"offset":625},"end":{"line":11,"column":31,"offset":647}}},{"type":"text","value":" capability) to make Teleport listen on a port\nnumbered \u003c ","position":{"start":{"line":11,"column":31,"offset":647},"end":{"line":12,"column":16,"offset":709}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"1024"}],"position":{"start":{"line":12,"column":16,"offset":709},"end":{"line":12,"column":22,"offset":715}}},{"type":"text","value":" (e.g. ","position":{"start":{"line":12,"column":22,"offset":715},"end":{"line":12,"column":29,"offset":722}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"443"}],"position":{"start":{"line":12,"column":29,"offset":722},"end":{"line":12,"column":34,"offset":727}}},{"type":"text","value":").","position":{"start":{"line":12,"column":34,"offset":727},"end":{"line":12,"column":36,"offset":729}}}],"position":{"start":{"line":9,"column":3,"offset":463},"end":{"line":12,"column":36,"offset":729}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Follow the \"Principle of Least Privilege\" (PoLP). Don't give users\npermissive roles when giving them more restrictive roles will do instead.\nFor example, assign users the built-in ","position":{"start":{"line":13,"column":5,"offset":734},"end":{"line":15,"column":44,"offset":922}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"access,editor"}],"position":{"start":{"line":15,"column":44,"offset":922},"end":{"line":15,"column":59,"offset":937}}},{"type":"text","value":" roles.","position":{"start":{"line":15,"column":59,"offset":937},"end":{"line":15,"column":66,"offset":944}}}],"position":{"start":{"line":13,"column":3,"offset":732},"end":{"line":15,"column":66,"offset":944}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"When joining a Teleport resource service (e.g., the Database Service or\nApplication Service) to a cluster, save the invitation token to a file.\nOtherwise, the token will be visible when examining the ","position":{"start":{"line":16,"column":5,"offset":949},"end":{"line":18,"column":61,"offset":1157}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"teleport"}],"position":{"start":{"line":18,"column":61,"offset":1157},"end":{"line":18,"column":71,"offset":1167}}},{"type":"text","value":" command\nthat started the agent, e.g., via the ","position":{"start":{"line":18,"column":71,"offset":1167},"end":{"line":19,"column":43,"offset":1218}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"history"}],"position":{"start":{"line":19,"column":43,"offset":1218},"end":{"line":19,"column":52,"offset":1227}}},{"type":"text","value":" command on a compromised\nsystem.","position":{"start":{"line":19,"column":52,"offset":1227},"end":{"line":20,"column":12,"offset":1264}}}],"position":{"start":{"line":16,"column":3,"offset":947},"end":{"line":20,"column":12,"offset":1264}}},{"type":"text","value":"\n"}],"position":{"start":{"line":7,"column":3,"offset":302},"end":{"line":20,"column":12,"offset":1264}}}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"step-15-prepare-your-environment"},"children":[{"type":"text","value":"Step 1/5. Prepare your environment","position":{"start":{"line":123,"column":4,"offset":4425},"end":{"line":123,"column":38,"offset":4459}}}],"position":{"start":{"line":123,"column":1,"offset":4422},"end":{"line":123,"column":38,"offset":4459}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In this guide, we will enable users of your root cluster to SSH into the\nTeleport Node in your leaf cluster as the user ","position":{"start":{"line":125,"column":1,"offset":4461},"end":{"line":126,"column":48,"offset":4581}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"visitor"}],"position":{"start":{"line":126,"column":48,"offset":4581},"end":{"line":126,"column":57,"offset":4590}}},{"type":"text","value":". First, we will create\nthe ","position":{"start":{"line":126,"column":57,"offset":4590},"end":{"line":127,"column":5,"offset":4618}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"visitor"}],"position":{"start":{"line":127,"column":5,"offset":4618},"end":{"line":127,"column":14,"offset":4627}}},{"type":"text","value":" user and a Teleport role that can assume this username when\nlogging in to your Node.","position":{"start":{"line":127,"column":14,"offset":4627},"end":{"line":128,"column":25,"offset":4712}}}],"position":{"start":{"line":125,"column":1,"offset":4461},"end":{"line":128,"column":25,"offset":4712}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"add-a-user-to-your-node"},"children":[{"type":"text","value":"Add a user to your Node","position":{"start":{"line":130,"column":5,"offset":4718},"end":{"line":130,"column":28,"offset":4741}}}],"position":{"start":{"line":130,"column":1,"offset":4714},"end":{"line":130,"column":28,"offset":4741}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"On your Node, run the following command to add the ","position":{"start":{"line":132,"column":1,"offset":4743},"end":{"line":132,"column":52,"offset":4794}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"visitor"}],"position":{"start":{"line":132,"column":52,"offset":4794},"end":{"line":132,"column":61,"offset":4803}}},{"type":"text","value":" user:","position":{"start":{"line":132,"column":61,"offset":4803},"end":{"line":132,"column":67,"offset":4809}}}],"position":{"start":{"line":132,"column":1,"offset":4743},"end":{"line":132,"column":67,"offset":4809}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"sudo useradd --create-home visitor"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"notice","properties":{"type":"warning"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This command also creates a home directory for the ","position":{"start":{"line":140,"column":1,"offset":4886},"end":{"line":140,"column":52,"offset":4937}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"visitor"}],"position":{"start":{"line":140,"column":52,"offset":4937},"end":{"line":140,"column":61,"offset":4946}}},{"type":"text","value":" user, which is\nrequired for accessing a shell on the Node.","position":{"start":{"line":140,"column":61,"offset":4946},"end":{"line":141,"column":44,"offset":5005}}}],"position":{"start":{"line":140,"column":1,"offset":4886},"end":{"line":141,"column":44,"offset":5005}}}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"create-a-role-to-access-your-node"},"children":[{"type":"text","value":"Create a role to access your Node","position":{"start":{"line":145,"column":5,"offset":5022},"end":{"line":145,"column":38,"offset":5055}}}],"position":{"start":{"line":145,"column":1,"offset":5018},"end":{"line":145,"column":38,"offset":5055}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"On your local machine, log in to your leaf cluster using your Teleport username:","position":{"start":{"line":147,"column":1,"offset":5057},"end":{"line":147,"column":81,"offset":5137}}}],"position":{"start":{"line":147,"column":1,"offset":5057},"end":{"line":147,"column":81,"offset":5137}}},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"cloud"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"commandcomment","properties":{"data-type":"descr"},"children":[{"type":"text","value":"Log out of all clusters to begin this guide from a clean state"}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh logout"}]}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh login --proxy=leafcluster.teleport.sh --user=myuser"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"oss,enterprise"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"commandcomment","properties":{"data-type":"descr"},"children":[{"type":"text","value":"Log out of all clusters to begin this guide from a clean state"}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh logout"}]}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh login --proxy=leafcluster.example.com --user=myuser"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Create a file called ","position":{"start":{"line":168,"column":1,"offset":5542},"end":{"line":168,"column":22,"offset":5563}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"visitor.yaml"}],"position":{"start":{"line":168,"column":22,"offset":5563},"end":{"line":168,"column":36,"offset":5577}}},{"type":"text","value":" with the\nfollowing content:","position":{"start":{"line":168,"column":36,"offset":5577},"end":{"line":169,"column":19,"offset":5605}}}],"position":{"start":{"line":168,"column":1,"offset":5542},"end":{"line":169,"column":19,"offset":5605}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"kind:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"role"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"version:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"v5"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"metadata:"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"name:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"visitor"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"spec:"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"allow:"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"logins:"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["hljs-bullet"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"visitor"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["hljs-comment"]},"children":[{"type":"text","value":"# In case your Node is labeled, you will need to explicitly allow access"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["hljs-comment"]},"children":[{"type":"text","value":"# to Nodes with labels in order to SSH into your Node."}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"node_labels:"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"'*'"}]},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"'*'"}]},{"type":"text","value":"\n"}],"position":{"start":{"line":171,"column":1,"offset":5607},"end":{"line":184,"column":4,"offset":5878}}}],"position":{"start":{"line":171,"column":1,"offset":5607},"end":{"line":184,"column":4,"offset":5878}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Create the role:","position":{"start":{"line":186,"column":1,"offset":5880},"end":{"line":186,"column":17,"offset":5896}}}],"position":{"start":{"line":186,"column":1,"offset":5880},"end":{"line":186,"column":17,"offset":5896}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl create visitor.yaml"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"role 'visitor' has been created"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now you have a ","position":{"start":{"line":193,"column":1,"offset":5970},"end":{"line":193,"column":16,"offset":5985}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"visitor"}],"position":{"start":{"line":193,"column":16,"offset":5985},"end":{"line":193,"column":25,"offset":5994}}},{"type":"text","value":" role on your leaf cluster that enables users to assume\nthe ","position":{"start":{"line":193,"column":25,"offset":5994},"end":{"line":194,"column":5,"offset":6054}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"visitor"}],"position":{"start":{"line":194,"column":5,"offset":6054},"end":{"line":194,"column":14,"offset":6063}}},{"type":"text","value":" login on your Node.","position":{"start":{"line":194,"column":14,"offset":6063},"end":{"line":194,"column":34,"offset":6083}}}],"position":{"start":{"line":193,"column":1,"offset":5970},"end":{"line":194,"column":34,"offset":6083}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"add-a-login-to-your-root-cluster-user"},"children":[{"type":"text","value":"Add a login to your root cluster user","position":{"start":{"line":196,"column":5,"offset":6089},"end":{"line":196,"column":42,"offset":6126}}}],"position":{"start":{"line":196,"column":1,"offset":6085},"end":{"line":196,"column":42,"offset":6126}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":198,"column":1,"offset":6128},"end":{"line":198,"column":5,"offset":6132}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"visitor"}],"position":{"start":{"line":198,"column":5,"offset":6132},"end":{"line":198,"column":14,"offset":6141}}},{"type":"text","value":" role allows users with the ","position":{"start":{"line":198,"column":14,"offset":6141},"end":{"line":198,"column":42,"offset":6169}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"visitor"}],"position":{"start":{"line":198,"column":42,"offset":6169},"end":{"line":198,"column":51,"offset":6178}}},{"type":"text","value":" login to access Nodes in the\nleaf cluster. In the next step, we will add the ","position":{"start":{"line":198,"column":51,"offset":6178},"end":{"line":199,"column":49,"offset":6256}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"visitor"}],"position":{"start":{"line":199,"column":49,"offset":6256},"end":{"line":199,"column":58,"offset":6265}}},{"type":"text","value":" login to your user so\nyou can satisfy the conditions of the role and access the Node.","position":{"start":{"line":199,"column":58,"offset":6265},"end":{"line":200,"column":64,"offset":6351}}}],"position":{"start":{"line":198,"column":1,"offset":6128},"end":{"line":200,"column":64,"offset":6351}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Make sure that you are logged in to your root cluster.","position":{"start":{"line":202,"column":1,"offset":6353},"end":{"line":202,"column":55,"offset":6407}}}],"position":{"start":{"line":202,"column":1,"offset":6353},"end":{"line":202,"column":55,"offset":6407}}},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"oss,enterprise"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh logout"}]}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh login --proxy=rootcluster.example.com --user=myuser"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"cloud"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh logout"}]}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh login --proxy=rootcluster.teleport.sh --user=myuser"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Create a file called ","position":{"start":{"line":221,"column":1,"offset":6686},"end":{"line":221,"column":22,"offset":6707}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"user.yaml"}],"position":{"start":{"line":221,"column":22,"offset":6707},"end":{"line":221,"column":33,"offset":6718}}},{"type":"text","value":" with your current user configuration. Replace\n","position":{"start":{"line":221,"column":33,"offset":6718},"end":{"line":222,"column":1,"offset":6765}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"myuser"}],"position":{"start":{"line":222,"column":1,"offset":6765},"end":{"line":222,"column":9,"offset":6773}}},{"type":"text","value":" with your Teleport username:","position":{"start":{"line":222,"column":9,"offset":6773},"end":{"line":222,"column":38,"offset":6802}}}],"position":{"start":{"line":221,"column":1,"offset":6686},"end":{"line":222,"column":38,"offset":6802}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl get user/myuser \u003e user.yaml"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Make the following change to ","position":{"start":{"line":228,"column":1,"offset":6852},"end":{"line":228,"column":30,"offset":6881}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"user.yaml"}],"position":{"start":{"line":228,"column":30,"offset":6881},"end":{"line":228,"column":41,"offset":6892}}},{"type":"text","value":":","position":{"start":{"line":228,"column":41,"offset":6892},"end":{"line":228,"column":42,"offset":6893}}}],"position":{"start":{"line":228,"column":1,"offset":6852},"end":{"line":228,"column":42,"offset":6893}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-diff"]},"children":[{"type":"text","value":"   traits:\n     logins:\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-addition"]},"children":[{"type":"text","value":"+    - visitor"}]},{"type":"text","value":"\n     - ubuntu\n     - root\n"}],"position":{"start":{"line":230,"column":1,"offset":6895},"end":{"line":236,"column":4,"offset":6971}}}],"position":{"start":{"line":230,"column":1,"offset":6895},"end":{"line":236,"column":4,"offset":6971}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Apply your changes:","position":{"start":{"line":238,"column":1,"offset":6973},"end":{"line":238,"column":20,"offset":6992}}}],"position":{"start":{"line":238,"column":1,"offset":6973},"end":{"line":238,"column":20,"offset":6992}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl create -f user.yaml"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In the next section, we will allow users on the root cluster to access your Node\nwhile assuming the ","position":{"start":{"line":244,"column":1,"offset":7034},"end":{"line":245,"column":20,"offset":7134}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"visitor"}],"position":{"start":{"line":245,"column":20,"offset":7134},"end":{"line":245,"column":29,"offset":7143}}},{"type":"text","value":" role.","position":{"start":{"line":245,"column":29,"offset":7143},"end":{"line":245,"column":35,"offset":7149}}}],"position":{"start":{"line":244,"column":1,"offset":7034},"end":{"line":245,"column":35,"offset":7149}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"step-25-establish-trust-between-clusters"},"children":[{"type":"text","value":"Step 2/5. Establish trust between clusters","position":{"start":{"line":247,"column":4,"offset":7154},"end":{"line":247,"column":46,"offset":7196}}}],"position":{"start":{"line":247,"column":1,"offset":7151},"end":{"line":247,"column":46,"offset":7196}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Teleport establishes trust between the root cluster and a leaf cluster using\na ","position":{"start":{"line":249,"column":1,"offset":7198},"end":{"line":250,"column":3,"offset":7277}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"join token","position":{"start":{"line":250,"column":5,"offset":7279},"end":{"line":250,"column":15,"offset":7289}}}],"position":{"start":{"line":250,"column":3,"offset":7277},"end":{"line":250,"column":17,"offset":7291}}},{"type":"text","value":".","position":{"start":{"line":250,"column":17,"offset":7291},"end":{"line":250,"column":18,"offset":7292}}}],"position":{"start":{"line":249,"column":1,"offset":7198},"end":{"line":250,"column":18,"offset":7292}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To set up trust between clusters, you will first create a join token via the\nroot cluster's Auth Service. You will then use the Auth Service on the leaf\ncluster to create a ","position":{"start":{"line":252,"column":1,"offset":7294},"end":{"line":254,"column":21,"offset":7467}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"trusted_cluster"}],"position":{"start":{"line":254,"column":21,"offset":7467},"end":{"line":254,"column":38,"offset":7484}}},{"type":"text","value":" resource.","position":{"start":{"line":254,"column":38,"offset":7484},"end":{"line":254,"column":48,"offset":7494}}}],"position":{"start":{"line":252,"column":1,"offset":7294},"end":{"line":254,"column":48,"offset":7494}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":256,"column":1,"offset":7496},"end":{"line":256,"column":5,"offset":7500}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"trusted_cluster"}],"position":{"start":{"line":256,"column":5,"offset":7500},"end":{"line":256,"column":22,"offset":7517}}},{"type":"text","value":" resource will include the join token, proving to the root\ncluster that the leaf cluster is the one you expected to register.","position":{"start":{"line":256,"column":22,"offset":7517},"end":{"line":257,"column":67,"offset":7642}}}],"position":{"start":{"line":256,"column":1,"offset":7496},"end":{"line":257,"column":67,"offset":7642}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"create-a-join-token"},"children":[{"type":"text","value":"Create a join token","position":{"start":{"line":259,"column":5,"offset":7648},"end":{"line":259,"column":24,"offset":7667}}}],"position":{"start":{"line":259,"column":1,"offset":7644},"end":{"line":259,"column":24,"offset":7667}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can create a join token using the ","position":{"start":{"line":261,"column":1,"offset":7669},"end":{"line":261,"column":39,"offset":7707}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tctl"}],"position":{"start":{"line":261,"column":39,"offset":7707},"end":{"line":261,"column":45,"offset":7713}}},{"type":"text","value":" tool.","position":{"start":{"line":261,"column":45,"offset":7713},"end":{"line":261,"column":51,"offset":7719}}}],"position":{"start":{"line":261,"column":1,"offset":7669},"end":{"line":261,"column":51,"offset":7719}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"First, log out of all clusters and log in to the root cluster.","position":{"start":{"line":263,"column":1,"offset":7721},"end":{"line":263,"column":63,"offset":7783}}}],"position":{"start":{"line":263,"column":1,"offset":7721},"end":{"line":263,"column":63,"offset":7783}}},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"oss,enterprise"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh logout"}]}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh login --user=myuser --proxy=rootcluster.example.com"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"\u003e Profile URL:        https://rootcluster.example.com:443"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  Logged in as:       myuser"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  Cluster:            rootcluster.example.com"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  Roles:              access, auditor, editor"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  Logins:             root"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  Kubernetes:         enabled"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  Valid until:        2022-04-29 03:07:22 -0400 EDT [valid for 12h0m0s]"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  Extensions:         permit-agent-forwarding, permit-port-forwarding, permit-pty"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"cloud"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh login --user=myuser --proxy=myrootclustertenant.teleport.sh"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"\u003e Profile URL:        https://rootcluster.teleport.sh:443"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  Logged in as:       myuser"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  Cluster:            rootcluster.teleport.sh"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  Roles:              access, auditor, editor"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  Logins:             root"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  Kubernetes:         enabled"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  Valid until:        2022-04-29 03:07:22 -0400 EDT [valid for 12h0m0s]"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  Extensions:         permit-agent-forwarding, permit-port-forwarding, permit-pty"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Execute the following command on your development machine:","position":{"start":{"line":297,"column":1,"offset":8837},"end":{"line":297,"column":59,"offset":8895}}}],"position":{"start":{"line":297,"column":1,"offset":8837},"end":{"line":297,"column":59,"offset":8895}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"commandcomment","properties":{"data-type":"descr"},"children":[{"type":"text","value":"Generates a Trusted Cluster token to allow an inbound connection from a leaf cluster:"}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl tokens add --type=trusted_cluster --ttl=15m"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"The cluster invite token: abcd123-insecure-do-not-use-this"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"This token will expire in 15 minutes"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":""}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"Use this token when defining a trusted cluster resource on a remote cluster."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This command generates a Trusted Cluster join token. The token can be used\nmultiple times and has an expiration time of 5 minutes.","position":{"start":{"line":308,"column":1,"offset":9215},"end":{"line":309,"column":56,"offset":9345}}}],"position":{"start":{"line":308,"column":1,"offset":9215},"end":{"line":309,"column":56,"offset":9345}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Copy the join token for later use. If you need to display your join token again,\nrun the following command against your root cluster:","position":{"start":{"line":311,"column":1,"offset":9347},"end":{"line":312,"column":53,"offset":9480}}}],"position":{"start":{"line":311,"column":1,"offset":9347},"end":{"line":312,"column":53,"offset":9480}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl tokens ls"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"Token                                                            Type            Labels   Expiry Time (UTC)"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"---------------------------------------------------------------- --------------- -------- ---------------------------"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"abcd123-insecure-do-not-use-this                                 trusted_cluster          28 Apr 22 19:19 UTC (4m48s)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"details","properties":{"title":"Revoking join tokens","opened":"false"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can revoke a join token with the following command:","position":{"start":{"line":323,"column":1,"offset":9903},"end":{"line":323,"column":56,"offset":9958}}}],"position":{"start":{"line":323,"column":1,"offset":9903},"end":{"line":323,"column":56,"offset":9958}}},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl tokens rm abcd123-insecure-do-not-use-this"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"notice","properties":{"type":"tip"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It's important to note that join tokens are only used to establish a\nconnection for the first time. Clusters will exchange certificates and\nwon't use tokens to re-establish their connection afterward.","position":{"start":{"line":335,"column":3,"offset":10053},"end":{"line":337,"column":63,"offset":10257}}}],"position":{"start":{"line":335,"column":3,"offset":10053},"end":{"line":337,"column":63,"offset":10257}}}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"define-a-trusted-cluster-resource"},"children":[{"type":"text","value":"Define a Trusted Cluster resource","position":{"start":{"line":341,"column":5,"offset":10274},"end":{"line":341,"column":38,"offset":10307}}}],"position":{"start":{"line":341,"column":1,"offset":10270},"end":{"line":341,"column":38,"offset":10307}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"On your local machine, create a file called ","position":{"start":{"line":343,"column":1,"offset":10309},"end":{"line":343,"column":45,"offset":10353}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"trusted_cluster.yaml"}],"position":{"start":{"line":343,"column":45,"offset":10353},"end":{"line":343,"column":67,"offset":10375}}},{"type":"text","value":" with the\nfollowing content:","position":{"start":{"line":343,"column":67,"offset":10375},"end":{"line":344,"column":19,"offset":10403}}}],"position":{"start":{"line":343,"column":1,"offset":10309},"end":{"line":344,"column":19,"offset":10403}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["hljs-comment"]},"children":[{"type":"text","value":"# trusted_cluster.yaml"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"kind:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"trusted_cluster"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"version:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"v2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"metadata:"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"name:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"rootcluster.example.com"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"spec:"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"enabled:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-literal"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"token:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"abcd123-insecure-do-not-use-this"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"tunnel_addr:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"rootcluster.example.com:11106"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"web_proxy_addr:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"rootcluster.example.com:443"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"role_map:"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["hljs-bullet"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"remote:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"access\""}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"local:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"visitor\""}]},{"type":"text","value":"]\n"}],"position":{"start":{"line":346,"column":1,"offset":10405},"end":{"line":360,"column":4,"offset":10722}}}],"position":{"start":{"line":346,"column":1,"offset":10405},"end":{"line":360,"column":4,"offset":10722}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Change the fields of ","position":{"start":{"line":362,"column":1,"offset":10724},"end":{"line":362,"column":22,"offset":10745}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"trusted_cluster.yaml"}],"position":{"start":{"line":362,"column":22,"offset":10745},"end":{"line":362,"column":44,"offset":10767}}},{"type":"text","value":" as follows:","position":{"start":{"line":362,"column":44,"offset":10767},"end":{"line":362,"column":56,"offset":10779}}}],"position":{"start":{"line":362,"column":1,"offset":10724},"end":{"line":362,"column":56,"offset":10779}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"metadataname"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"metadata.name"}],"position":{"start":{"line":364,"column":6,"offset":10786},"end":{"line":364,"column":21,"offset":10801}}}],"position":{"start":{"line":364,"column":1,"offset":10781},"end":{"line":364,"column":21,"offset":10801}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Use the name of your root cluster, e.g., ","position":{"start":{"line":366,"column":1,"offset":10803},"end":{"line":366,"column":42,"offset":10844}}},{"type":"element","tagName":"scopedblock","properties":{"scope":"oss,enterprise"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"teleport.example.com"}],"position":{"start":{"line":367,"column":31,"offset":10887},"end":{"line":367,"column":53,"offset":10909}}}]},{"type":"element","tagName":"scopedblock","properties":{"scope":"cloud"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"mytenant.teleport.sh"}],"position":{"start":{"line":367,"column":94,"offset":10950},"end":{"line":367,"column":116,"offset":10972}}}]},{"type":"text","value":".","position":{"start":{"line":367,"column":130,"offset":10986},"end":{"line":367,"column":131,"offset":10987}}}],"position":{"start":{"line":366,"column":1,"offset":10803},"end":{"line":367,"column":131,"offset":10987}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"spectoken"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"spec.token"}],"position":{"start":{"line":369,"column":6,"offset":10994},"end":{"line":369,"column":18,"offset":11006}}}],"position":{"start":{"line":369,"column":1,"offset":10989},"end":{"line":369,"column":18,"offset":11006}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This is join token you created earlier.","position":{"start":{"line":371,"column":1,"offset":11008},"end":{"line":371,"column":40,"offset":11047}}}],"position":{"start":{"line":371,"column":1,"offset":11008},"end":{"line":371,"column":40,"offset":11047}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"spectunnel_addr"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"spec.tunnel_addr"}],"position":{"start":{"line":373,"column":6,"offset":11054},"end":{"line":373,"column":24,"offset":11072}}}],"position":{"start":{"line":373,"column":1,"offset":11049},"end":{"line":373,"column":24,"offset":11072}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This is the reverse tunnel address of the Proxy Service in the root cluster. Run\nthe following command to retrieve the value you should use:","position":{"start":{"line":375,"column":1,"offset":11074},"end":{"line":376,"column":60,"offset":11214}}}],"position":{"start":{"line":375,"column":1,"offset":11074},"end":{"line":376,"column":60,"offset":11214}}},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"oss,enterprise"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"PROXY=rootcluster.example.com"}]}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"curl https://${PROXY?}/webapi/ping | jq 'if .proxy.tls_routing_enabled == true then .proxy.ssh.public_addr else .proxy.ssh.ssh_tunnel_public_addr end'"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"\"rootcluster.example.com:443\""}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"cloud"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"PROXY=rootcluster.teleport.sh"}]}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"curl https://${PROXY?}/webapi/ping | jq 'if .proxy.tls_routing_enabled == true then .proxy.ssh.public_addr else .proxy.ssh.ssh_tunnel_public_addr end'"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"\"rootcluster.teleport.sh:443\""}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"web_proxy_addr"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"web_proxy_addr"}],"position":{"start":{"line":397,"column":6,"offset":11786},"end":{"line":397,"column":22,"offset":11802}}}],"position":{"start":{"line":397,"column":1,"offset":11781},"end":{"line":397,"column":22,"offset":11802}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This is the address of the Proxy Service on the root cluster. Obtain this with the\nfollowing command:","position":{"start":{"line":399,"column":1,"offset":11804},"end":{"line":400,"column":19,"offset":11905}}}],"position":{"start":{"line":399,"column":1,"offset":11804},"end":{"line":400,"column":19,"offset":11905}}},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"oss,enterprise"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"curl https://${PROXY?}/webapi/ping | jq .proxy.ssh.public_addr"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"\"teleport.example.com:443\""}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"cloud"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"curl https://${PROXY?}/webapi/ping | jq .proxy.ssh.public_addr"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"\"mytenant.teleport.sh:443\""}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"specrole_map"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"spec.role_map"}],"position":{"start":{"line":419,"column":6,"offset":12231},"end":{"line":419,"column":21,"offset":12246}}}],"position":{"start":{"line":419,"column":1,"offset":12226},"end":{"line":419,"column":21,"offset":12246}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When a leaf cluster establishes trust with a root cluster, it needs a way to\nconfigure access from users in the root cluster. Teleport enables you to limit\naccess to Trusted Clusters by mapping Teleport roles to cluster labels.","position":{"start":{"line":421,"column":1,"offset":12248},"end":{"line":423,"column":72,"offset":12475}}}],"position":{"start":{"line":421,"column":1,"offset":12248},"end":{"line":423,"column":72,"offset":12475}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When creating a ","position":{"start":{"line":425,"column":1,"offset":12477},"end":{"line":425,"column":17,"offset":12493}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"trusted_cluster"}],"position":{"start":{"line":425,"column":17,"offset":12493},"end":{"line":425,"column":34,"offset":12510}}},{"type":"text","value":" resource, the administrator of the leaf\ncluster must define how roles from the root cluster map to roles on the leaf\ncluster.","position":{"start":{"line":425,"column":34,"offset":12510},"end":{"line":427,"column":9,"offset":12636}}}],"position":{"start":{"line":425,"column":1,"offset":12477},"end":{"line":427,"column":9,"offset":12636}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"trusted_cluster.yaml"}],"position":{"start":{"line":429,"column":1,"offset":12638},"end":{"line":429,"column":23,"offset":12660}}},{"type":"text","value":" uses the following configuration:","position":{"start":{"line":429,"column":23,"offset":12660},"end":{"line":429,"column":57,"offset":12694}}}],"position":{"start":{"line":429,"column":1,"offset":12638},"end":{"line":429,"column":57,"offset":12694}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-yaml"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"role_map:"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["hljs-bullet"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"remote:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"access\""}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"local:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"visitor\""}]},{"type":"text","value":"]\n"}],"position":{"start":{"line":431,"column":1,"offset":12696},"end":{"line":435,"column":4,"offset":12767}}}],"position":{"start":{"line":431,"column":1,"offset":12696},"end":{"line":435,"column":4,"offset":12767}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Here, if a user has the ","position":{"start":{"line":437,"column":1,"offset":12769},"end":{"line":437,"column":25,"offset":12793}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"access"}],"position":{"start":{"line":437,"column":25,"offset":12793},"end":{"line":437,"column":33,"offset":12801}}},{"type":"text","value":" role on the root cluster, the leaf cluster will grant\nthem the ","position":{"start":{"line":437,"column":33,"offset":12801},"end":{"line":438,"column":10,"offset":12865}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"visitor"}],"position":{"start":{"line":438,"column":10,"offset":12865},"end":{"line":438,"column":19,"offset":12874}}},{"type":"text","value":" role when they attempt to log in to a Node.","position":{"start":{"line":438,"column":19,"offset":12874},"end":{"line":438,"column":63,"offset":12918}}}],"position":{"start":{"line":437,"column":1,"offset":12769},"end":{"line":438,"column":63,"offset":12918}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If your user on the root cluster has the ","position":{"start":{"line":440,"column":1,"offset":12920},"end":{"line":440,"column":42,"offset":12961}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"access"}],"position":{"start":{"line":440,"column":42,"offset":12961},"end":{"line":440,"column":50,"offset":12969}}},{"type":"text","value":" role, leave this as it is. If\nnot, change ","position":{"start":{"line":440,"column":50,"offset":12969},"end":{"line":441,"column":13,"offset":13012}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"access"}],"position":{"start":{"line":441,"column":13,"offset":13012},"end":{"line":441,"column":21,"offset":13020}}},{"type":"text","value":" to one of your user's roles.","position":{"start":{"line":441,"column":21,"offset":13020},"end":{"line":441,"column":50,"offset":13049}}}],"position":{"start":{"line":440,"column":1,"offset":12920},"end":{"line":441,"column":50,"offset":13049}}},{"type":"text","value":"\n"},{"type":"element","tagName":"details","properties":{"title":"Role mapping syntax"},"children":[{"type":"element","tagName":"h3","properties":{"id":"wildcard-characters"},"children":[{"type":"text","value":"Wildcard characters","position":{"start":{"line":445,"column":5,"offset":13094},"end":{"line":445,"column":24,"offset":13113}}}],"position":{"start":{"line":445,"column":1,"offset":13090},"end":{"line":445,"column":24,"offset":13113}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In role mappings, the wildcard character ","position":{"start":{"line":447,"column":1,"offset":13115},"end":{"line":447,"column":42,"offset":13156}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"*"}],"position":{"start":{"line":447,"column":42,"offset":13156},"end":{"line":447,"column":45,"offset":13159}}},{"type":"text","value":" is used to match any number of\ncharacters in a string.","position":{"start":{"line":447,"column":45,"offset":13159},"end":{"line":448,"column":24,"offset":13214}}}],"position":{"start":{"line":447,"column":1,"offset":13115},"end":{"line":448,"column":24,"offset":13214}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For example, if we wanted to let ","position":{"start":{"line":450,"column":1,"offset":13216},"end":{"line":450,"column":34,"offset":13249}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"any","position":{"start":{"line":450,"column":35,"offset":13250},"end":{"line":450,"column":38,"offset":13253}}}],"position":{"start":{"line":450,"column":34,"offset":13249},"end":{"line":450,"column":39,"offset":13254}}},{"type":"text","value":" user from the root cluster connect to the\nleaf cluster, we can use a wildcard ","position":{"start":{"line":450,"column":39,"offset":13254},"end":{"line":451,"column":37,"offset":13333}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"*"}],"position":{"start":{"line":451,"column":37,"offset":13333},"end":{"line":451,"column":40,"offset":13336}}},{"type":"text","value":" in the ","position":{"start":{"line":451,"column":40,"offset":13336},"end":{"line":451,"column":48,"offset":13344}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"role_map"}],"position":{"start":{"line":451,"column":48,"offset":13344},"end":{"line":451,"column":58,"offset":13354}}},{"type":"text","value":" like this:","position":{"start":{"line":451,"column":58,"offset":13354},"end":{"line":451,"column":69,"offset":13365}}}],"position":{"start":{"line":450,"column":1,"offset":13216},"end":{"line":451,"column":69,"offset":13365}}},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"role_map:"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-bullet"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"remote:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"*\""}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"local:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"access"}]},{"type":"text","value":"]\n"}],"position":{"start":{"line":453,"column":1,"offset":13367},"end":{"line":457,"column":4,"offset":13424}}}],"position":{"start":{"line":453,"column":1,"offset":13367},"end":{"line":457,"column":4,"offset":13424}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In this example, we are mapping any roles on the root cluster that begin with\n","position":{"start":{"line":459,"column":1,"offset":13426},"end":{"line":460,"column":1,"offset":13504}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"cluster-"}],"position":{"start":{"line":460,"column":1,"offset":13504},"end":{"line":460,"column":11,"offset":13514}}},{"type":"text","value":" to the role ","position":{"start":{"line":460,"column":11,"offset":13514},"end":{"line":460,"column":24,"offset":13527}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"clusteradmin"}],"position":{"start":{"line":460,"column":24,"offset":13527},"end":{"line":460,"column":38,"offset":13541}}},{"type":"text","value":" on the leaf cluster.","position":{"start":{"line":460,"column":38,"offset":13541},"end":{"line":460,"column":59,"offset":13562}}}],"position":{"start":{"line":459,"column":1,"offset":13426},"end":{"line":460,"column":59,"offset":13562}}},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"role_map:"}]},{"type":"text","value":"\n   "},{"type":"element","tagName":"span","properties":{"className":["hljs-bullet"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"remote:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"'cluster-*'"}]},{"type":"text","value":"\n     "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"local:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"clusteradmin"}]},{"type":"text","value":"]\n"}],"position":{"start":{"line":462,"column":1,"offset":13564},"end":{"line":466,"column":4,"offset":13637}}}],"position":{"start":{"line":462,"column":1,"offset":13564},"end":{"line":466,"column":4,"offset":13637}}},{"type":"element","tagName":"h3","properties":{"id":"regular-expressions"},"children":[{"type":"text","value":"Regular expressions","position":{"start":{"line":468,"column":5,"offset":13643},"end":{"line":468,"column":24,"offset":13662}}}],"position":{"start":{"line":468,"column":1,"offset":13639},"end":{"line":468,"column":24,"offset":13662}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can also use regular expressions to map user roles from one cluster to\nanother. Our regular expression syntax enables you to use capture groups to\nreference part of an remote role name that matches a regular expression in the\ncorresponding local role:","position":{"start":{"line":470,"column":1,"offset":13664},"end":{"line":473,"column":26,"offset":13919}}}],"position":{"start":{"line":470,"column":1,"offset":13664},"end":{"line":473,"column":26,"offset":13919}}},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-yaml"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["hljs-comment"]},"children":[{"type":"text","value":"# In this example, remote users with a remote role called 'remote-one' will be"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-comment"]},"children":[{"type":"text","value":"# mapped to a local role called 'local-one', and `remote-two` becomes `local-two`, etc:"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-bullet"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"remote:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"^remote-(.*)$\""}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"local:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"local-$1"}]},{"type":"text","value":"]\n"}],"position":{"start":{"line":475,"column":1,"offset":13921},"end":{"line":480,"column":4,"offset":14153}}}],"position":{"start":{"line":475,"column":1,"offset":13921},"end":{"line":480,"column":4,"offset":14153}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Regular expression matching is activated only when the expression starts\nwith ","position":{"start":{"line":482,"column":1,"offset":14155},"end":{"line":483,"column":6,"offset":14233}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"^"}],"position":{"start":{"line":483,"column":6,"offset":14233},"end":{"line":483,"column":9,"offset":14236}}},{"type":"text","value":" and ends with ","position":{"start":{"line":483,"column":9,"offset":14236},"end":{"line":483,"column":24,"offset":14251}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"$"}],"position":{"start":{"line":483,"column":24,"offset":14251},"end":{"line":483,"column":27,"offset":14254}}},{"type":"text","value":".","position":{"start":{"line":483,"column":27,"offset":14254},"end":{"line":483,"column":28,"offset":14255}}}],"position":{"start":{"line":482,"column":1,"offset":14155},"end":{"line":483,"column":28,"offset":14255}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Regular expressions use Google's re2 syntax, which you can read about in the re2 ","position":{"start":{"line":485,"column":1,"offset":14257},"end":{"line":485,"column":82,"offset":14338}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/google/re2/wiki/Syntax"},"children":[{"type":"text","value":"syntax guide","position":{"start":{"line":485,"column":83,"offset":14339},"end":{"line":485,"column":95,"offset":14351}}}],"position":{"start":{"line":485,"column":82,"offset":14338},"end":{"line":485,"column":139,"offset":14395}}},{"type":"text","value":".","position":{"start":{"line":485,"column":139,"offset":14395},"end":{"line":485,"column":140,"offset":14396}}}],"position":{"start":{"line":485,"column":1,"offset":14257},"end":{"line":485,"column":140,"offset":14396}}}]},{"type":"text","value":"\n"},{"type":"element","tagName":"details","properties":{"title":"Sharing user traits between Trusted Clusters"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can share user SSH logins, Kubernetes users/groups, and database users/names between Trusted Clusters.","position":{"start":{"line":491,"column":1,"offset":14474},"end":{"line":491,"column":107,"offset":14580}}}],"position":{"start":{"line":491,"column":1,"offset":14474},"end":{"line":491,"column":107,"offset":14580}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Suppose you have a root cluster with a role named ","position":{"start":{"line":493,"column":1,"offset":14582},"end":{"line":493,"column":51,"offset":14632}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"root"}],"position":{"start":{"line":493,"column":51,"offset":14632},"end":{"line":493,"column":57,"offset":14638}}},{"type":"text","value":" and the following\nallow rules:","position":{"start":{"line":493,"column":57,"offset":14638},"end":{"line":494,"column":13,"offset":14669}}}],"position":{"start":{"line":493,"column":1,"offset":14582},"end":{"line":494,"column":13,"offset":14669}}},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"logins:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"root\""}]},{"type":"text","value":"]\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"kubernetes_groups:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"system:masters\""}]},{"type":"text","value":"]\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"kubernetes_users:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"alice\""}]},{"type":"text","value":"]\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"db_users:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"postgres\""}]},{"type":"text","value":"]\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"db_names:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"dev\""}]},{"type":"text","value":", "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"metrics\""}]},{"type":"text","value":"]\n"}],"position":{"start":{"line":496,"column":1,"offset":14671},"end":{"line":502,"column":4,"offset":14817}}}],"position":{"start":{"line":496,"column":1,"offset":14671},"end":{"line":502,"column":4,"offset":14817}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When setting up the Trusted Cluster relationship, the leaf cluster can choose\nto map this ","position":{"start":{"line":504,"column":1,"offset":14819},"end":{"line":505,"column":13,"offset":14909}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"root"}],"position":{"start":{"line":505,"column":13,"offset":14909},"end":{"line":505,"column":19,"offset":14915}}},{"type":"text","value":" cluster role to its own ","position":{"start":{"line":505,"column":19,"offset":14915},"end":{"line":505,"column":44,"offset":14940}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"admin"}],"position":{"start":{"line":505,"column":44,"offset":14940},"end":{"line":505,"column":51,"offset":14947}}},{"type":"text","value":" role:","position":{"start":{"line":505,"column":51,"offset":14947},"end":{"line":505,"column":57,"offset":14953}}}],"position":{"start":{"line":504,"column":1,"offset":14819},"end":{"line":505,"column":57,"offset":14953}}},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"role_map:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-bullet"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"remote:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"root\""}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"local:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\"admin\""}]},{"type":"text","value":"]\n"}],"position":{"start":{"line":507,"column":1,"offset":14955},"end":{"line":511,"column":4,"offset":15012}}}],"position":{"start":{"line":507,"column":1,"offset":14955},"end":{"line":511,"column":4,"offset":15012}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The role ","position":{"start":{"line":513,"column":1,"offset":15014},"end":{"line":513,"column":10,"offset":15023}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"admin"}],"position":{"start":{"line":513,"column":10,"offset":15023},"end":{"line":513,"column":17,"offset":15030}}},{"type":"text","value":" of the leaf cluster can now be set up to use the root cluster's\nrole logins, Kubernetes groups and other traits using the following variables:","position":{"start":{"line":513,"column":17,"offset":15030},"end":{"line":514,"column":79,"offset":15173}}}],"position":{"start":{"line":513,"column":1,"offset":15014},"end":{"line":514,"column":79,"offset":15173}}},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"logins:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\""},{"type":"element","tagName":"span","properties":{"className":["hljs-template-variable"]},"children":[{"type":"text","value":"{{internal.logins}}"}]},{"type":"text","value":"\""}]},{"type":"text","value":"]\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"kubernetes_groups:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\""},{"type":"element","tagName":"span","properties":{"className":["hljs-template-variable"]},"children":[{"type":"text","value":"{{internal.kubernetes_groups}}"}]},{"type":"text","value":"\""}]},{"type":"text","value":"]\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"kubernetes_users:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\""},{"type":"element","tagName":"span","properties":{"className":["hljs-template-variable"]},"children":[{"type":"text","value":"{{internal.kubernetes_users}}"}]},{"type":"text","value":"\""}]},{"type":"text","value":"]\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"db_users:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\""},{"type":"element","tagName":"span","properties":{"className":["hljs-template-variable"]},"children":[{"type":"text","value":"{{internal.db_users}}"}]},{"type":"text","value":"\""}]},{"type":"text","value":"]\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"db_names:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\""},{"type":"element","tagName":"span","properties":{"className":["hljs-template-variable"]},"children":[{"type":"text","value":"{{internal.db_names}}"}]},{"type":"text","value":"\""}]},{"type":"text","value":"]\n"}],"position":{"start":{"line":516,"column":1,"offset":15175},"end":{"line":522,"column":4,"offset":15396}}}],"position":{"start":{"line":516,"column":1,"offset":15175},"end":{"line":522,"column":4,"offset":15396}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"User traits that come from the identity provider (such as OIDC claims or SAML\nattributes) are also passed to the leaf clusters and can be access in the role\ntemplates using ","position":{"start":{"line":524,"column":1,"offset":15398},"end":{"line":526,"column":17,"offset":15571}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"external"}],"position":{"start":{"line":526,"column":17,"offset":15571},"end":{"line":526,"column":27,"offset":15581}}},{"type":"text","value":" variable prefix:","position":{"start":{"line":526,"column":27,"offset":15581},"end":{"line":526,"column":44,"offset":15598}}}],"position":{"start":{"line":524,"column":1,"offset":15398},"end":{"line":526,"column":44,"offset":15598}}},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"logins:"}]},{"type":"text","value":" ["},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\""},{"type":"element","tagName":"span","properties":{"className":["hljs-template-variable"]},"children":[{"type":"text","value":"{{internal.logins}}"}]},{"type":"text","value":"\""}]},{"type":"text","value":", "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\""},{"type":"element","tagName":"span","properties":{"className":["hljs-template-variable"]},"children":[{"type":"text","value":"{{external.logins_from_okta}}"}]},{"type":"text","value":"\""}]},{"type":"text","value":"]\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"node_labels:"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"env:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"\""},{"type":"element","tagName":"span","properties":{"className":["hljs-template-variable"]},"children":[{"type":"text","value":"{{external.env_from_okta}}"}]},{"type":"text","value":"\""}]},{"type":"text","value":"\n"}],"position":{"start":{"line":528,"column":1,"offset":15600},"end":{"line":532,"column":4,"offset":15725}}}],"position":{"start":{"line":528,"column":1,"offset":15600},"end":{"line":532,"column":4,"offset":15725}}}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"create-your-trusted-cluster-resource"},"children":[{"type":"text","value":"Create your Trusted Cluster resource","position":{"start":{"line":536,"column":5,"offset":15743},"end":{"line":536,"column":41,"offset":15779}}}],"position":{"start":{"line":536,"column":1,"offset":15739},"end":{"line":536,"column":41,"offset":15779}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Log out of the root cluster.","position":{"start":{"line":538,"column":1,"offset":15781},"end":{"line":538,"column":29,"offset":15809}}}],"position":{"start":{"line":538,"column":1,"offset":15781},"end":{"line":538,"column":29,"offset":15809}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh logout"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Log in to the leaf cluster:","position":{"start":{"line":544,"column":1,"offset":15837},"end":{"line":544,"column":28,"offset":15864}}}],"position":{"start":{"line":544,"column":1,"offset":15837},"end":{"line":544,"column":28,"offset":15864}}},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"oss,enterprise"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh login --user=myuser --proxy=leafcluster.example.com"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"cloud"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh login --user=myuser --proxy=leafcluster.teleport.sh"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Create the Trusted Cluster:","position":{"start":{"line":561,"column":1,"offset":16117},"end":{"line":561,"column":28,"offset":16144}}}],"position":{"start":{"line":561,"column":1,"offset":16117},"end":{"line":561,"column":28,"offset":16144}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl create trusted_cluster.yaml"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"details","properties":{"title":"Creating Trusted Clusters via the Web UI","opened":"false"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can easily configure leaf nodes using the Teleport Web UI.","position":{"start":{"line":569,"column":1,"offset":16269},"end":{"line":569,"column":63,"offset":16331}}}],"position":{"start":{"line":569,"column":1,"offset":16269},"end":{"line":569,"column":63,"offset":16331}}},{"type":"element","tagName":"p","children":[{"type":"text","value":"Here is an example of creating trust between a leaf and a root node.\n","position":{"start":{"line":571,"column":1,"offset":16333},"end":{"line":572,"column":1,"offset":16402}}}]},{"type":"element","tagName":"img","properties":{"src":"/docs/_next/static/assets/setting-up-trust-35cbee3222.png","alt":"Tunnels","width":2342,"height":1534},"children":[],"position":{"start":{"line":572,"column":1,"offset":16402},"end":{"line":572,"column":63,"offset":16464}}}]},{"type":"text","value":"\n"},{"type":"element","tagName":"details","properties":{"type":"tip","title":"Update role mappings"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can update the role mappings within the ","position":{"start":{"line":580,"column":1,"offset":16533},"end":{"line":580,"column":45,"offset":16577}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"trusted_cluster"}],"position":{"start":{"line":580,"column":45,"offset":16577},"end":{"line":580,"column":62,"offset":16594}}},{"type":"text","value":" resource we created earlier by modifying the resource definition (","position":{"start":{"line":580,"column":62,"offset":16594},"end":{"line":580,"column":129,"offset":16661}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"trusted_cluster.yaml"}],"position":{"start":{"line":580,"column":129,"offset":16661},"end":{"line":580,"column":151,"offset":16683}}},{"type":"text","value":") to indicate the new role mappings in the ","position":{"start":{"line":580,"column":151,"offset":16683},"end":{"line":580,"column":194,"offset":16726}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"role_map"}],"position":{"start":{"line":580,"column":194,"offset":16726},"end":{"line":580,"column":204,"offset":16736}}},{"type":"text","value":" field.","position":{"start":{"line":580,"column":204,"offset":16736},"end":{"line":580,"column":211,"offset":16743}}}],"position":{"start":{"line":580,"column":1,"offset":16533},"end":{"line":580,"column":211,"offset":16743}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Then, update the trusted cluster resource on the leaf cluster side:","position":{"start":{"line":582,"column":1,"offset":16745},"end":{"line":582,"column":68,"offset":16812}}}],"position":{"start":{"line":582,"column":1,"offset":16745},"end":{"line":582,"column":68,"offset":16812}}},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl create --force trusted_cluster.yaml"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Log out of the leaf cluster and log back in to the root cluster. When you run\n","position":{"start":{"line":590,"column":1,"offset":16882},"end":{"line":591,"column":1,"offset":16960}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tsh clusters"}],"position":{"start":{"line":591,"column":1,"offset":16960},"end":{"line":591,"column":15,"offset":16974}}},{"type":"text","value":", you should see listings for both the root cluster and the leaf\ncluster:","position":{"start":{"line":591,"column":15,"offset":16974},"end":{"line":592,"column":9,"offset":17047}}}],"position":{"start":{"line":590,"column":1,"offset":16882},"end":{"line":592,"column":9,"offset":17047}}},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"oss,enterprise"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh clusters"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"tsh clusters"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"Cluster Name                                          Status Cluster Type Selected"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"----------------------------------------------------- ------ ------------ --------"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"rootcluster.example.com                               online root         *"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"leafcluster.example.com                               online leaf"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"cloud"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh clusters"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"Cluster Name                                          Status Cluster Type Selected"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"----------------------------------------------------- ------ ------------ --------"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"rootcluster.teleport.sh                               online root         *"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"leafcluster.teleport.sh                               online leaf"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"step-35-manage-access-to-your-trusted-cluster"},"children":[{"type":"text","value":"Step 3/5. Manage access to your Trusted Cluster","position":{"start":{"line":616,"column":4,"offset":17844},"end":{"line":616,"column":51,"offset":17891}}}],"position":{"start":{"line":616,"column":1,"offset":17841},"end":{"line":616,"column":51,"offset":17891}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"apply-labels"},"children":[{"type":"text","value":"Apply labels","position":{"start":{"line":618,"column":5,"offset":17897},"end":{"line":618,"column":17,"offset":17909}}}],"position":{"start":{"line":618,"column":1,"offset":17893},"end":{"line":618,"column":17,"offset":17909}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When you created a ","position":{"start":{"line":620,"column":1,"offset":17911},"end":{"line":620,"column":20,"offset":17930}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"trusted_cluster"}],"position":{"start":{"line":620,"column":20,"offset":17930},"end":{"line":620,"column":37,"offset":17947}}},{"type":"text","value":" resource on the leaf cluster, the leaf\ncluster's Auth Service sent a request to the root cluster's Proxy Service to\nvalidate the Trusted Cluster. After validating the request, the root cluster's\nAuth Service created a ","position":{"start":{"line":620,"column":37,"offset":17947},"end":{"line":623,"column":24,"offset":18166}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"remote_cluster"}],"position":{"start":{"line":623,"column":24,"offset":18166},"end":{"line":623,"column":40,"offset":18182}}},{"type":"text","value":" resource to represent the Trusted\nCluster.","position":{"start":{"line":623,"column":40,"offset":18182},"end":{"line":624,"column":9,"offset":18225}}}],"position":{"start":{"line":620,"column":1,"offset":17911},"end":{"line":624,"column":9,"offset":18225}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"By applying labels to the ","position":{"start":{"line":626,"column":1,"offset":18227},"end":{"line":626,"column":27,"offset":18253}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"remote_cluster"}],"position":{"start":{"line":626,"column":27,"offset":18253},"end":{"line":626,"column":43,"offset":18269}}},{"type":"text","value":" resource on the root cluster, you can\nmanage access to the leaf cluster. It is not possible to manage labels on the\nleaf clusterallowing leaf clusters to propagate their own labels could create a\nproblem with rogue clusters updating their labels to unexpected values.","position":{"start":{"line":626,"column":43,"offset":18269},"end":{"line":629,"column":72,"offset":18538}}}],"position":{"start":{"line":626,"column":1,"offset":18227},"end":{"line":629,"column":72,"offset":18538}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To retrieve a ","position":{"start":{"line":631,"column":1,"offset":18540},"end":{"line":631,"column":15,"offset":18554}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"remote_cluster"}],"position":{"start":{"line":631,"column":15,"offset":18554},"end":{"line":631,"column":31,"offset":18570}}},{"type":"text","value":", make sure you are logged in to the root cluster\nand run the following command:","position":{"start":{"line":631,"column":31,"offset":18570},"end":{"line":632,"column":31,"offset":18650}}}],"position":{"start":{"line":631,"column":1,"offset":18540},"end":{"line":632,"column":31,"offset":18650}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl get rc"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":""}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"kind: remote_cluster"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"metadata:"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  id: 1651261581522597792"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  name: leafcluster.teleport.sh"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"status:"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  connection: online"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  last_heartbeat: \"2022-04-29T19:45:35.052864534Z\""}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"version: v3"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Still logged in to the root cluster, use ","position":{"start":{"line":647,"column":1,"offset":18861},"end":{"line":647,"column":42,"offset":18902}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tctl"}],"position":{"start":{"line":647,"column":42,"offset":18902},"end":{"line":647,"column":48,"offset":18908}}},{"type":"text","value":" to update the labels on the leaf\ncluster:","position":{"start":{"line":647,"column":48,"offset":18908},"end":{"line":648,"column":9,"offset":18950}}}],"position":{"start":{"line":647,"column":1,"offset":18861},"end":{"line":648,"column":9,"offset":18950}}},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"cloud"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl update rc/leafcluster.teleport.sh --set-labels=env=demo"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":""}]},{"type":"element","tagName":"commandcomment","properties":{"data-type":"descr"},"children":[{"type":"text","value":"Cluster leafcluster.teleport.sh has been updated"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"oss,enterprise"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl update rc/leafcluster.example.com --set-labels=env=demo"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":""}]},{"type":"element","tagName":"commandcomment","properties":{"data-type":"descr"},"children":[{"type":"text","value":"Cluster leafcluster.example.com has been updated"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"change-cluster-access-privileges"},"children":[{"type":"text","value":"Change cluster access privileges","position":{"start":{"line":669,"column":5,"offset":19317},"end":{"line":669,"column":37,"offset":19349}}}],"position":{"start":{"line":669,"column":1,"offset":19313},"end":{"line":669,"column":37,"offset":19349}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"At this point, the ","position":{"start":{"line":671,"column":1,"offset":19351},"end":{"line":671,"column":20,"offset":19370}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tctl get rc"}],"position":{"start":{"line":671,"column":20,"offset":19370},"end":{"line":671,"column":33,"offset":19383}}},{"type":"text","value":" command may return an empty result, and\n","position":{"start":{"line":671,"column":33,"offset":19383},"end":{"line":672,"column":1,"offset":19424}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tsh clusters"}],"position":{"start":{"line":672,"column":1,"offset":19424},"end":{"line":672,"column":15,"offset":19438}}},{"type":"text","value":" may only display the root cluster.","position":{"start":{"line":672,"column":15,"offset":19438},"end":{"line":672,"column":50,"offset":19473}}}],"position":{"start":{"line":671,"column":1,"offset":19351},"end":{"line":672,"column":50,"offset":19473}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This is because, if a Trusted Cluster has a label, a user must have explicit\npermission to access clusters with that label. Otherwise, the Auth Service will\nnot return information about that cluster when a user runs ","position":{"start":{"line":674,"column":1,"offset":19475},"end":{"line":676,"column":60,"offset":19691}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tctl get rc"}],"position":{"start":{"line":676,"column":60,"offset":19691},"end":{"line":676,"column":73,"offset":19704}}},{"type":"text","value":" or\n","position":{"start":{"line":676,"column":73,"offset":19704},"end":{"line":677,"column":1,"offset":19708}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tsh clusters"}],"position":{"start":{"line":677,"column":1,"offset":19708},"end":{"line":677,"column":15,"offset":19722}}},{"type":"text","value":".","position":{"start":{"line":677,"column":15,"offset":19722},"end":{"line":677,"column":16,"offset":19723}}}],"position":{"start":{"line":674,"column":1,"offset":19475},"end":{"line":677,"column":16,"offset":19723}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"While logged in to the root cluster, create a role that allows access to your\nTrusted Cluster by adding the following content to a file called\n","position":{"start":{"line":679,"column":1,"offset":19725},"end":{"line":681,"column":1,"offset":19868}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"demo-cluster-access.yaml"}],"position":{"start":{"line":681,"column":1,"offset":19868},"end":{"line":681,"column":27,"offset":19894}}},{"type":"text","value":":","position":{"start":{"line":681,"column":27,"offset":19894},"end":{"line":681,"column":28,"offset":19895}}}],"position":{"start":{"line":679,"column":1,"offset":19725},"end":{"line":681,"column":28,"offset":19895}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"kind:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"role"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"metadata:"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"name:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"demo-cluster-access"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"spec:"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"allow:"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"cluster_labels:"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"'env':"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"'demo'"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"version:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"v5"}]},{"type":"text","value":"\n"}],"position":{"start":{"line":683,"column":1,"offset":19897},"end":{"line":692,"column":4,"offset":20024}}}],"position":{"start":{"line":683,"column":1,"offset":19897},"end":{"line":692,"column":4,"offset":20024}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Create the role:","position":{"start":{"line":694,"column":1,"offset":20026},"end":{"line":694,"column":17,"offset":20042}}}],"position":{"start":{"line":694,"column":1,"offset":20026},"end":{"line":694,"column":17,"offset":20042}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl create demo-cluster-access.yaml"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"role 'demo-cluster-access' has been created"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Assign the ","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":12,"offset":11}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"demo-cluster-access"}],"position":{"start":{"line":1,"column":12,"offset":11},"end":{"line":1,"column":33,"offset":32}}},{"type":"text","value":" role to your Teleport user by running the following\ncommands, depending on whether you authenticate as a local Teleport user or via\nthe ","position":{"start":{"line":1,"column":33,"offset":32},"end":{"line":3,"column":5,"offset":169}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"github"}],"position":{"start":{"line":3,"column":5,"offset":169},"end":{"line":3,"column":13,"offset":177}}},{"type":"text","value":", ","position":{"start":{"line":3,"column":13,"offset":177},"end":{"line":3,"column":15,"offset":179}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"saml"}],"position":{"start":{"line":3,"column":15,"offset":179},"end":{"line":3,"column":21,"offset":185}}},{"type":"text","value":", or ","position":{"start":{"line":3,"column":21,"offset":185},"end":{"line":3,"column":26,"offset":190}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"oidc"}],"position":{"start":{"line":3,"column":26,"offset":190},"end":{"line":3,"column":32,"offset":196}}},{"type":"text","value":" authentication connectors:","position":{"start":{"line":3,"column":32,"offset":196},"end":{"line":3,"column":59,"offset":223}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":3,"column":59,"offset":223}}},{"type":"text","value":"\n"},{"type":"element","tagName":"tabs","properties":{},"children":[{"type":"element","tagName":"tabitem","properties":{"label":"Local User"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Retrieve your local user's configuration resource:","position":{"start":{"line":8,"column":1,"offset":262},"end":{"line":8,"column":51,"offset":312}}}],"position":{"start":{"line":8,"column":1,"offset":262},"end":{"line":8,"column":51,"offset":312}}},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl get users/$(tsh status -f json | jq -r '.active.username') \u003e out.yaml"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Edit ","position":{"start":{"line":14,"column":1,"offset":404},"end":{"line":14,"column":6,"offset":409}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"out.yaml"}],"position":{"start":{"line":14,"column":6,"offset":409},"end":{"line":14,"column":16,"offset":419}}},{"type":"text","value":", adding ","position":{"start":{"line":14,"column":16,"offset":419},"end":{"line":14,"column":25,"offset":428}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"demo-cluster-access"}],"position":{"start":{"line":14,"column":25,"offset":428},"end":{"line":14,"column":46,"offset":449}}},{"type":"text","value":" to the list of existing roles:","position":{"start":{"line":14,"column":46,"offset":449},"end":{"line":14,"column":77,"offset":480}}}],"position":{"start":{"line":14,"column":1,"offset":404},"end":{"line":14,"column":77,"offset":480}}},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-diff"]},"children":[{"type":"text","value":"  roles:\n   - access\n   - auditor\n   - editor\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-addition"]},"children":[{"type":"text","value":"+  - demo-cluster-access"}]},{"type":"text","value":"\n"}],"position":{"start":{"line":16,"column":1,"offset":482},"end":{"line":22,"column":4,"offset":564}}}],"position":{"start":{"line":16,"column":1,"offset":482},"end":{"line":22,"column":4,"offset":564}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Apply your changes:","position":{"start":{"line":24,"column":1,"offset":566},"end":{"line":24,"column":20,"offset":585}}}],"position":{"start":{"line":24,"column":1,"offset":566},"end":{"line":24,"column":20,"offset":585}}},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl create -f out.yaml"}]}]}]}]},{"type":"element","tagName":"tabitem","properties":{"label":"GitHub"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Retrieve your ","position":{"start":{"line":33,"column":1,"offset":663},"end":{"line":33,"column":15,"offset":677}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"github"}],"position":{"start":{"line":33,"column":15,"offset":677},"end":{"line":33,"column":23,"offset":685}}},{"type":"text","value":"  configuration resource:","position":{"start":{"line":33,"column":23,"offset":685},"end":{"line":33,"column":48,"offset":710}}}],"position":{"start":{"line":33,"column":1,"offset":663},"end":{"line":33,"column":48,"offset":710}}},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl get github/github --with-secrets \u003e github.yaml"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Edit ","position":{"start":{"line":39,"column":1,"offset":779},"end":{"line":39,"column":6,"offset":784}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"github.yaml"}],"position":{"start":{"line":39,"column":6,"offset":784},"end":{"line":39,"column":19,"offset":797}}},{"type":"text","value":", adding ","position":{"start":{"line":39,"column":19,"offset":797},"end":{"line":39,"column":28,"offset":806}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"demo-cluster-access"}],"position":{"start":{"line":39,"column":28,"offset":806},"end":{"line":39,"column":49,"offset":827}}},{"type":"text","value":" to the\n","position":{"start":{"line":39,"column":49,"offset":827},"end":{"line":40,"column":1,"offset":835}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"teams_to_roles"}],"position":{"start":{"line":40,"column":1,"offset":835},"end":{"line":40,"column":17,"offset":851}}},{"type":"text","value":" section. The team you will map to this role will depend on how\nyou have designed your organization's RBAC, but it should be the smallest team\npossible within your organization. This team must also include your user.","position":{"start":{"line":40,"column":17,"offset":851},"end":{"line":42,"column":74,"offset":1067}}}],"position":{"start":{"line":39,"column":1,"offset":779},"end":{"line":42,"column":74,"offset":1067}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Here is an example:","position":{"start":{"line":44,"column":1,"offset":1069},"end":{"line":44,"column":20,"offset":1088}}}],"position":{"start":{"line":44,"column":1,"offset":1069},"end":{"line":44,"column":20,"offset":1088}}},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-diff"]},"children":[{"type":"text","value":"  teams_to_roles:\n    - organization: octocats\n      team: admins\n      roles:\n        - access\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-addition"]},"children":[{"type":"text","value":"+       - demo-cluster-access"}]},{"type":"text","value":"\n"}],"position":{"start":{"line":46,"column":1,"offset":1090},"end":{"line":53,"column":4,"offset":1227}}}],"position":{"start":{"line":46,"column":1,"offset":1090},"end":{"line":53,"column":4,"offset":1227}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Apply your changes:","position":{"start":{"line":55,"column":1,"offset":1229},"end":{"line":55,"column":20,"offset":1248}}}],"position":{"start":{"line":55,"column":1,"offset":1229},"end":{"line":55,"column":20,"offset":1248}}},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl create -f github.yaml"}]}]}]},{"type":"element","tagName":"admonition","properties":{"type":"warning"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Note the ","position":{"start":{"line":62,"column":1,"offset":1320},"end":{"line":62,"column":10,"offset":1329}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"--with-secrets"}],"position":{"start":{"line":62,"column":10,"offset":1329},"end":{"line":62,"column":26,"offset":1345}}},{"type":"text","value":" flag in the ","position":{"start":{"line":62,"column":26,"offset":1345},"end":{"line":62,"column":39,"offset":1358}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tctl get"}],"position":{"start":{"line":62,"column":39,"offset":1358},"end":{"line":62,"column":49,"offset":1368}}},{"type":"text","value":" command. This adds the value of\n","position":{"start":{"line":62,"column":49,"offset":1368},"end":{"line":63,"column":1,"offset":1401}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"spec.signing_key_pair.private_key"}],"position":{"start":{"line":63,"column":1,"offset":1401},"end":{"line":63,"column":36,"offset":1436}}},{"type":"text","value":" to ","position":{"start":{"line":63,"column":36,"offset":1436},"end":{"line":63,"column":40,"offset":1440}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"saml.yaml"}],"position":{"start":{"line":63,"column":40,"offset":1440},"end":{"line":63,"column":51,"offset":1451}}},{"type":"text","value":". This is a sensitive value,\nso take precautions when creating this file and remove it after updating the resource.","position":{"start":{"line":63,"column":51,"offset":1451},"end":{"line":64,"column":87,"offset":1566}}}],"position":{"start":{"line":62,"column":1,"offset":1320},"end":{"line":64,"column":87,"offset":1566}}}]}]},{"type":"element","tagName":"tabitem","properties":{"label":"SAML"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Retrieve your ","position":{"start":{"line":70,"column":1,"offset":1617},"end":{"line":70,"column":15,"offset":1631}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"saml"}],"position":{"start":{"line":70,"column":15,"offset":1631},"end":{"line":70,"column":21,"offset":1637}}},{"type":"text","value":"  configuration resource:","position":{"start":{"line":70,"column":21,"offset":1637},"end":{"line":70,"column":46,"offset":1662}}}],"position":{"start":{"line":70,"column":1,"offset":1617},"end":{"line":70,"column":46,"offset":1662}}},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl get --with-secrets saml/mysaml \u003e saml.yaml"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Edit ","position":{"start":{"line":76,"column":1,"offset":1727},"end":{"line":76,"column":6,"offset":1732}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"saml.yaml"}],"position":{"start":{"line":76,"column":6,"offset":1732},"end":{"line":76,"column":17,"offset":1743}}},{"type":"text","value":", adding ","position":{"start":{"line":76,"column":17,"offset":1743},"end":{"line":76,"column":26,"offset":1752}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"demo-cluster-access"}],"position":{"start":{"line":76,"column":26,"offset":1752},"end":{"line":76,"column":47,"offset":1773}}},{"type":"text","value":" to the\n","position":{"start":{"line":76,"column":47,"offset":1773},"end":{"line":77,"column":1,"offset":1781}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"attributes_to_roles"}],"position":{"start":{"line":77,"column":1,"offset":1781},"end":{"line":77,"column":22,"offset":1802}}},{"type":"text","value":" section. The attribute you will map to this role will\ndepend on how you have designed your organization's RBAC, but it should be the\nsmallest group possible within your organization. This group must also include\nyour user.","position":{"start":{"line":77,"column":22,"offset":1802},"end":{"line":80,"column":11,"offset":2025}}}],"position":{"start":{"line":76,"column":1,"offset":1727},"end":{"line":80,"column":11,"offset":2025}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Here is an example:","position":{"start":{"line":82,"column":1,"offset":2027},"end":{"line":82,"column":20,"offset":2046}}}],"position":{"start":{"line":82,"column":1,"offset":2027},"end":{"line":82,"column":20,"offset":2046}}},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-diff"]},"children":[{"type":"text","value":"  attributes_to_roles:\n    - name: \"groups\"\n      value: \"my-group\"\n      roles:\n        - access\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-addition"]},"children":[{"type":"text","value":"+       - demo-cluster-access"}]},{"type":"text","value":"\n"}],"position":{"start":{"line":84,"column":1,"offset":2048},"end":{"line":91,"column":4,"offset":2187}}}],"position":{"start":{"line":84,"column":1,"offset":2048},"end":{"line":91,"column":4,"offset":2187}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Apply your changes:","position":{"start":{"line":93,"column":1,"offset":2189},"end":{"line":93,"column":20,"offset":2208}}}],"position":{"start":{"line":93,"column":1,"offset":2189},"end":{"line":93,"column":20,"offset":2208}}},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl create -f saml.yaml"}]}]}]},{"type":"element","tagName":"admonition","properties":{"type":"warning"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Note the ","position":{"start":{"line":100,"column":1,"offset":2278},"end":{"line":100,"column":10,"offset":2287}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"--with-secrets"}],"position":{"start":{"line":100,"column":10,"offset":2287},"end":{"line":100,"column":26,"offset":2303}}},{"type":"text","value":" flag in the ","position":{"start":{"line":100,"column":26,"offset":2303},"end":{"line":100,"column":39,"offset":2316}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tctl get"}],"position":{"start":{"line":100,"column":39,"offset":2316},"end":{"line":100,"column":49,"offset":2326}}},{"type":"text","value":" command. This adds the value of\n","position":{"start":{"line":100,"column":49,"offset":2326},"end":{"line":101,"column":1,"offset":2359}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"spec.signing_key_pair.private_key"}],"position":{"start":{"line":101,"column":1,"offset":2359},"end":{"line":101,"column":36,"offset":2394}}},{"type":"text","value":" to ","position":{"start":{"line":101,"column":36,"offset":2394},"end":{"line":101,"column":40,"offset":2398}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"saml.yaml"}],"position":{"start":{"line":101,"column":40,"offset":2398},"end":{"line":101,"column":51,"offset":2409}}},{"type":"text","value":". This is a sensitive value,\nso take precautions when creating this file and remove it after updating the resource.","position":{"start":{"line":101,"column":51,"offset":2409},"end":{"line":102,"column":87,"offset":2524}}}],"position":{"start":{"line":100,"column":1,"offset":2278},"end":{"line":102,"column":87,"offset":2524}}}]}]},{"type":"element","tagName":"tabitem","properties":{"label":"OIDC"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Retrieve your ","position":{"start":{"line":108,"column":1,"offset":2575},"end":{"line":108,"column":15,"offset":2589}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"oidc"}],"position":{"start":{"line":108,"column":15,"offset":2589},"end":{"line":108,"column":21,"offset":2595}}},{"type":"text","value":"  configuration resource:","position":{"start":{"line":108,"column":21,"offset":2595},"end":{"line":108,"column":46,"offset":2620}}}],"position":{"start":{"line":108,"column":1,"offset":2575},"end":{"line":108,"column":46,"offset":2620}}},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl get oidc/myoidc --with-secrets \u003e oidc.yaml"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Edit ","position":{"start":{"line":114,"column":1,"offset":2685},"end":{"line":114,"column":6,"offset":2690}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"oidc.yaml"}],"position":{"start":{"line":114,"column":6,"offset":2690},"end":{"line":114,"column":17,"offset":2701}}},{"type":"text","value":", adding ","position":{"start":{"line":114,"column":17,"offset":2701},"end":{"line":114,"column":26,"offset":2710}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"demo-cluster-access"}],"position":{"start":{"line":114,"column":26,"offset":2710},"end":{"line":114,"column":47,"offset":2731}}},{"type":"text","value":" to the\n","position":{"start":{"line":114,"column":47,"offset":2731},"end":{"line":115,"column":1,"offset":2739}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"claims_to_roles"}],"position":{"start":{"line":115,"column":1,"offset":2739},"end":{"line":115,"column":18,"offset":2756}}},{"type":"text","value":" section. The claim you will map to this role will depend on\nhow you have designed your organization's RBAC, but it should be the smallest\ngroup possible within your organization. This group must also include your\nuser.","position":{"start":{"line":115,"column":18,"offset":2756},"end":{"line":118,"column":6,"offset":2975}}}],"position":{"start":{"line":114,"column":1,"offset":2685},"end":{"line":118,"column":6,"offset":2975}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Here is an example:","position":{"start":{"line":120,"column":1,"offset":2977},"end":{"line":120,"column":20,"offset":2996}}}],"position":{"start":{"line":120,"column":1,"offset":2977},"end":{"line":120,"column":20,"offset":2996}}},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-diff"]},"children":[{"type":"text","value":"  claims_to_roles:\n    - name: \"groups\"\n      value: \"my-group\"\n      roles:\n        - access\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-addition"]},"children":[{"type":"text","value":"+       - demo-cluster-access"}]},{"type":"text","value":"\n"}],"position":{"start":{"line":122,"column":1,"offset":2998},"end":{"line":129,"column":4,"offset":3133}}}],"position":{"start":{"line":122,"column":1,"offset":2998},"end":{"line":129,"column":4,"offset":3133}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Apply your changes:","position":{"start":{"line":131,"column":1,"offset":3135},"end":{"line":131,"column":20,"offset":3154}}}],"position":{"start":{"line":131,"column":1,"offset":3135},"end":{"line":131,"column":20,"offset":3154}}},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl create -f saml.yaml"}]}]}]},{"type":"element","tagName":"admonition","properties":{"type":"warning"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Note the ","position":{"start":{"line":138,"column":1,"offset":3224},"end":{"line":138,"column":10,"offset":3233}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"--with-secrets"}],"position":{"start":{"line":138,"column":10,"offset":3233},"end":{"line":138,"column":26,"offset":3249}}},{"type":"text","value":" flag in the ","position":{"start":{"line":138,"column":26,"offset":3249},"end":{"line":138,"column":39,"offset":3262}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tctl get"}],"position":{"start":{"line":138,"column":39,"offset":3262},"end":{"line":138,"column":49,"offset":3272}}},{"type":"text","value":" command. This adds the value of\n","position":{"start":{"line":138,"column":49,"offset":3272},"end":{"line":139,"column":1,"offset":3305}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"spec.signing_key_pair.private_key"}],"position":{"start":{"line":139,"column":1,"offset":3305},"end":{"line":139,"column":36,"offset":3340}}},{"type":"text","value":" to ","position":{"start":{"line":139,"column":36,"offset":3340},"end":{"line":139,"column":40,"offset":3344}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"saml.yaml"}],"position":{"start":{"line":139,"column":40,"offset":3344},"end":{"line":139,"column":51,"offset":3355}}},{"type":"text","value":". This is a sensitive value,\nso take precautions when creating this file and remove it after updating the resource.","position":{"start":{"line":139,"column":51,"offset":3355},"end":{"line":140,"column":87,"offset":3470}}}],"position":{"start":{"line":138,"column":1,"offset":3224},"end":{"line":140,"column":87,"offset":3470}}}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Log out of your Teleport cluster and log in again to assume the new role.","position":{"start":{"line":146,"column":1,"offset":3506},"end":{"line":146,"column":74,"offset":3579}}}],"position":{"start":{"line":146,"column":1,"offset":3506},"end":{"line":146,"column":74,"offset":3579}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Confirm that the updated labels have been set:","position":{"start":{"line":703,"column":1,"offset":20213},"end":{"line":703,"column":47,"offset":20259}}}],"position":{"start":{"line":703,"column":1,"offset":20213},"end":{"line":703,"column":47,"offset":20259}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl get rc"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":""}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"sudo tctl get rc"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"kind: remote_cluster"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"metadata:"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  id: 1651262381521336026"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  labels:"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"    env: demo"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  name: rootcluster.example.com"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"status:"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  connection: online"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"  last_heartbeat: \"2022-04-29T19:55:35.053054594Z\""}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"version: v3"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"step-45-access-a-node-in-your-remote-cluster"},"children":[{"type":"text","value":"Step 4/5. Access a Node in your remote cluster","position":{"start":{"line":721,"column":4,"offset":20516},"end":{"line":721,"column":50,"offset":20562}}}],"position":{"start":{"line":721,"column":1,"offset":20513},"end":{"line":721,"column":50,"offset":20562}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"With the ","position":{"start":{"line":723,"column":1,"offset":20564},"end":{"line":723,"column":10,"offset":20573}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"trusted_cluster"}],"position":{"start":{"line":723,"column":10,"offset":20573},"end":{"line":723,"column":27,"offset":20590}}},{"type":"text","value":" resource you created earlier, you can log in to the\nNode in your leaf cluster as a user of your root cluster.","position":{"start":{"line":723,"column":27,"offset":20590},"end":{"line":724,"column":58,"offset":20700}}}],"position":{"start":{"line":723,"column":1,"offset":20564},"end":{"line":724,"column":58,"offset":20700}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"First, make sure that you are logged in to root cluster:","position":{"start":{"line":726,"column":1,"offset":20702},"end":{"line":726,"column":57,"offset":20758}}}],"position":{"start":{"line":726,"column":1,"offset":20702},"end":{"line":726,"column":57,"offset":20758}}},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"oss,enterprise"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh logout"}]}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh --proxy=rootcluster.example.com --user=myuser login"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"cloud"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh logout"}]}]},{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh --proxy=rootcluster.teleport.sh --user=myuser login"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To log in to your Node, confirm that your Node is joined to your leaf cluster:","position":{"start":{"line":745,"column":1,"offset":21033},"end":{"line":745,"column":79,"offset":21111}}}],"position":{"start":{"line":745,"column":1,"offset":21033},"end":{"line":745,"column":79,"offset":21111}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh ls --cluster=leafcluster.example.com"}]}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":""}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"Node Name       Address        Labels"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"--------------- -------------- ------------------------------------"}]},{"type":"element","tagName":"commandcomment","properties":{},"children":[{"type":"text","value":"mynode          127.0.0.1:3022 env=demo,hostname=ip-172-30-13-38"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"SSH into your Node:","position":{"start":{"line":755,"column":1,"offset":21341},"end":{"line":755,"column":20,"offset":21360}}}],"position":{"start":{"line":755,"column":1,"offset":21341},"end":{"line":755,"column":20,"offset":21360}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tsh ssh --cluster=leafcluster.example.com visitor@mynode"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"details","properties":{"title":"How does this work?"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The Teleport Auth Service on the leaf cluster checks the permissions of users in\nremote clusters similarly to how it checks permissions for users in the same\ncluster: using certificate-based SSH authentication.","position":{"start":{"line":763,"column":1,"offset":21473},"end":{"line":765,"column":53,"offset":21683}}}],"position":{"start":{"line":763,"column":1,"offset":21473},"end":{"line":765,"column":53,"offset":21683}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can think of an SSH certificate as a \"permit\" issued and time-stamped by a\ncertificate authority. A certificate contains four important pieces of data:","position":{"start":{"line":767,"column":1,"offset":21685},"end":{"line":768,"column":77,"offset":21840}}}],"position":{"start":{"line":767,"column":1,"offset":21685},"end":{"line":768,"column":77,"offset":21840}}},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"List of allowed Unix logins a user can use. They are called \"principals\" in\nthe certificate.","position":{"start":{"line":770,"column":3,"offset":21844},"end":{"line":771,"column":19,"offset":21938}}}],"position":{"start":{"line":770,"column":1,"offset":21842},"end":{"line":771,"column":19,"offset":21938}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Signature of the certificate authority that issued it (the Teleport Auth Service)","position":{"start":{"line":772,"column":3,"offset":21941},"end":{"line":772,"column":84,"offset":22022}}}],"position":{"start":{"line":772,"column":1,"offset":21939},"end":{"line":772,"column":84,"offset":22022}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Metadata (certificate extensions): additional data protected by the signature\nabove. Teleport uses the metadata to store the list of user roles and SSH\noptions like \"permit-agent-forwarding\".","position":{"start":{"line":773,"column":3,"offset":22025},"end":{"line":775,"column":42,"offset":22220}}}],"position":{"start":{"line":773,"column":1,"offset":22023},"end":{"line":775,"column":42,"offset":22220}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"The expiration date.","position":{"start":{"line":776,"column":3,"offset":22223},"end":{"line":776,"column":23,"offset":22243}}}],"position":{"start":{"line":776,"column":1,"offset":22221},"end":{"line":776,"column":23,"offset":22243}}},{"type":"text","value":"\n"}],"position":{"start":{"line":770,"column":1,"offset":21842},"end":{"line":776,"column":23,"offset":22243}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When a user from the root cluster attempts to access a Node in the leaf cluster,\nthe leaf cluster's Auth Service authenticates the user's certificate and reads\nthese pieces of data from it. It then performs the following actions:","position":{"start":{"line":778,"column":1,"offset":22245},"end":{"line":780,"column":70,"offset":22474}}}],"position":{"start":{"line":778,"column":1,"offset":22245},"end":{"line":780,"column":70,"offset":22474}}},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Checks that the certificate signature matches one of its Trusted Clusters.","position":{"start":{"line":782,"column":3,"offset":22478},"end":{"line":782,"column":77,"offset":22552}}}],"position":{"start":{"line":782,"column":1,"offset":22476},"end":{"line":782,"column":77,"offset":22552}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Applies role mapping (as discussed earlier) to associate a role on the leaf\ncluster with one of the remote user's roles.","position":{"start":{"line":783,"column":3,"offset":22555},"end":{"line":784,"column":47,"offset":22677}}}],"position":{"start":{"line":783,"column":1,"offset":22553},"end":{"line":784,"column":47,"offset":22677}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Checks if the local role allows the requested identity (Unix login) to have\naccess.","position":{"start":{"line":785,"column":3,"offset":22680},"end":{"line":786,"column":10,"offset":22765}}}],"position":{"start":{"line":785,"column":1,"offset":22678},"end":{"line":786,"column":10,"offset":22765}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Checks that the certificate has not expired.","position":{"start":{"line":787,"column":3,"offset":22768},"end":{"line":787,"column":47,"offset":22812}}}],"position":{"start":{"line":787,"column":1,"offset":22766},"end":{"line":787,"column":47,"offset":22812}}},{"type":"text","value":"\n"}],"position":{"start":{"line":782,"column":1,"offset":22476},"end":{"line":787,"column":47,"offset":22812}}}]},{"type":"text","value":"\n"},{"type":"element","tagName":"details","properties":{"type":"tip","title":"What if you're using a load balancer?"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The leaf cluster establishes a reverse tunnel to the root cluster even if the\nroot cluster uses multiple proxies behind a load balancer (LB) or a DNS entry\nwith multiple values. In this case, the leaf cluster establishes a tunnel to\n","position":{"start":{"line":796,"column":3,"offset":22901},"end":{"line":799,"column":1,"offset":23138}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"every","position":{"start":{"line":799,"column":4,"offset":23141},"end":{"line":799,"column":9,"offset":23146}}}],"position":{"start":{"line":799,"column":3,"offset":23140},"end":{"line":799,"column":10,"offset":23147}}},{"type":"text","value":" proxy in the root cluster.","position":{"start":{"line":799,"column":10,"offset":23147},"end":{"line":799,"column":37,"offset":23174}}}],"position":{"start":{"line":796,"column":3,"offset":22901},"end":{"line":799,"column":37,"offset":23174}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This requires that an LB use a round-robin or a similar balancing algorithm.\nDo not use sticky load balancing algorithms (i.e., \"session affinity\" or\n\"sticky sessions\") with Teleport Proxies.","position":{"start":{"line":801,"column":3,"offset":23178},"end":{"line":803,"column":44,"offset":23373}}}],"position":{"start":{"line":801,"column":3,"offset":23178},"end":{"line":803,"column":44,"offset":23373}}}]},{"type":"text","value":"\n"},{"type":"element","tagName":"admonition","properties":{"type":"tip","title":"Note"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Trusted Clusters work only in one direction. In the example above, users from\nthe leaf cluster cannot see or connect to Nodes in the root cluster.","position":{"start":{"line":812,"column":3,"offset":23432},"end":{"line":813,"column":71,"offset":23580}}}],"position":{"start":{"line":812,"column":3,"offset":23432},"end":{"line":813,"column":71,"offset":23580}}}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"step-55-remove-trust-between-your-clusters"},"children":[{"type":"text","value":"Step 5/5. Remove trust between your clusters","position":{"start":{"line":817,"column":4,"offset":23600},"end":{"line":817,"column":48,"offset":23644}}}],"position":{"start":{"line":817,"column":1,"offset":23597},"end":{"line":817,"column":48,"offset":23644}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"temporarily-disable-a-trusted-cluster"},"children":[{"type":"text","value":"Temporarily disable a Trusted Cluster","position":{"start":{"line":819,"column":5,"offset":23650},"end":{"line":819,"column":42,"offset":23687}}}],"position":{"start":{"line":819,"column":1,"offset":23646},"end":{"line":819,"column":42,"offset":23687}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can temporarily disable the trust relationship by logging in to the leaf\ncluster and editing the ","position":{"start":{"line":821,"column":1,"offset":23689},"end":{"line":822,"column":25,"offset":23790}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"trusted_cluster"}],"position":{"start":{"line":822,"column":25,"offset":23790},"end":{"line":822,"column":42,"offset":23807}}},{"type":"text","value":" resource you created earlier.","position":{"start":{"line":822,"column":42,"offset":23807},"end":{"line":822,"column":72,"offset":23837}}}],"position":{"start":{"line":821,"column":1,"offset":23689},"end":{"line":822,"column":72,"offset":23837}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Retrieve the Trusted Cluster resource you created earlier:","position":{"start":{"line":824,"column":1,"offset":23839},"end":{"line":824,"column":59,"offset":23897}}}],"position":{"start":{"line":824,"column":1,"offset":23839},"end":{"line":824,"column":59,"offset":23897}}},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"oss,enterprise"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl get trusted_cluster/rootcluster.example.com \u003e trusted_cluster.yaml"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"cloud"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl get trusted_cluster/rootcluster.teleport.sh \u003e trusted_cluster.yaml"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Make the following change to the resource:","position":{"start":{"line":841,"column":1,"offset":24182},"end":{"line":841,"column":43,"offset":24224}}}],"position":{"start":{"line":841,"column":1,"offset":24182},"end":{"line":841,"column":43,"offset":24224}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-diff"]},"children":[{"type":"text","value":" spec:\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-deletion"]},"children":[{"type":"text","value":"-  enabled: true"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-addition"]},"children":[{"type":"text","value":"+  enabled: false"}]},{"type":"text","value":"\n   role_map:\n   - local:\n     - visitor\n"}],"position":{"start":{"line":843,"column":1,"offset":24226},"end":{"line":850,"column":4,"offset":24319}}}],"position":{"start":{"line":843,"column":1,"offset":24226},"end":{"line":850,"column":4,"offset":24319}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Update the Trusted Cluster:","position":{"start":{"line":852,"column":1,"offset":24321},"end":{"line":852,"column":28,"offset":24348}}}],"position":{"start":{"line":852,"column":1,"offset":24321},"end":{"line":852,"column":28,"offset":24348}}},{"type":"text","value":"\n"},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl create --force trusted_cluster.yaml"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This closes the reverse tunnel between your leaf cluster and your root cluster.\nIt also deactivates the root cluster's certificate authority on\nthe leaf cluster.","position":{"start":{"line":858,"column":1,"offset":24406},"end":{"line":860,"column":18,"offset":24567}}}],"position":{"start":{"line":858,"column":1,"offset":24406},"end":{"line":860,"column":18,"offset":24567}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can enable the trust relationship again by setting ","position":{"start":{"line":862,"column":1,"offset":24569},"end":{"line":862,"column":56,"offset":24624}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"enabled"}],"position":{"start":{"line":862,"column":56,"offset":24624},"end":{"line":862,"column":65,"offset":24633}}},{"type":"text","value":" to ","position":{"start":{"line":862,"column":65,"offset":24633},"end":{"line":862,"column":69,"offset":24637}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"true"}],"position":{"start":{"line":862,"column":69,"offset":24637},"end":{"line":862,"column":75,"offset":24643}}},{"type":"text","value":".","position":{"start":{"line":862,"column":75,"offset":24643},"end":{"line":862,"column":76,"offset":24644}}}],"position":{"start":{"line":862,"column":1,"offset":24569},"end":{"line":862,"column":76,"offset":24644}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"remove-a-leaf-cluster-relationship-from-both-sides"},"children":[{"type":"text","value":"Remove a leaf cluster relationship from both sides","position":{"start":{"line":864,"column":5,"offset":24650},"end":{"line":864,"column":55,"offset":24700}}}],"position":{"start":{"line":864,"column":1,"offset":24646},"end":{"line":864,"column":55,"offset":24700}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you want to remove a trust relationship without the possibility of restoring\nit later, you can take the following steps.","position":{"start":{"line":866,"column":1,"offset":24702},"end":{"line":867,"column":44,"offset":24825}}}],"position":{"start":{"line":866,"column":1,"offset":24702},"end":{"line":867,"column":44,"offset":24825}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"On the leaf cluster, run the following command. This performs the same tasks as\nsetting ","position":{"start":{"line":869,"column":1,"offset":24827},"end":{"line":870,"column":9,"offset":24915}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"enabled"}],"position":{"start":{"line":870,"column":9,"offset":24915},"end":{"line":870,"column":18,"offset":24924}}},{"type":"text","value":" to ","position":{"start":{"line":870,"column":18,"offset":24924},"end":{"line":870,"column":22,"offset":24928}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"false"}],"position":{"start":{"line":870,"column":22,"offset":24928},"end":{"line":870,"column":29,"offset":24935}}},{"type":"text","value":" in a ","position":{"start":{"line":870,"column":29,"offset":24935},"end":{"line":870,"column":35,"offset":24941}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"trusted_cluster"}],"position":{"start":{"line":870,"column":35,"offset":24941},"end":{"line":870,"column":52,"offset":24958}}},{"type":"text","value":" resource, but also removes\nthe Trusted Cluster resource from the Auth Service backend:","position":{"start":{"line":870,"column":52,"offset":24958},"end":{"line":871,"column":60,"offset":25045}}}],"position":{"start":{"line":869,"column":1,"offset":24827},"end":{"line":871,"column":60,"offset":25045}}},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"oss,enterprise"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl rm trusted_cluster/rootcluster.example.com"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"cloud"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl rm trusted_cluster/rootcluster.teleport.sh"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Next, run the following command on the root cluster. This command deletes the\ncertificate authorities associated with the remote cluster and removes the\n","position":{"start":{"line":888,"column":1,"offset":25282},"end":{"line":890,"column":1,"offset":25435}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"remote_cluster"}],"position":{"start":{"line":890,"column":1,"offset":25435},"end":{"line":890,"column":17,"offset":25451}}},{"type":"text","value":" resource from the root cluster's Auth Service backend.","position":{"start":{"line":890,"column":17,"offset":25451},"end":{"line":890,"column":72,"offset":25506}}}],"position":{"start":{"line":888,"column":1,"offset":25282},"end":{"line":890,"column":72,"offset":25506}}},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"oss,enterprise"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl rm rc/leafcluster.example.com"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"scopedblock","properties":{"scope":"cloud"},"children":[{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"tctl rm rc/leafcluster.teleport.sh"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"admonition","properties":{"type":"Removing the relationship from the root side only"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can remove the relationship by running only ","position":{"start":{"line":909,"column":3,"offset":25790},"end":{"line":909,"column":51,"offset":25838}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tctl rm rc/leaf.example.com"}],"position":{"start":{"line":909,"column":51,"offset":25838},"end":{"line":909,"column":80,"offset":25867}}},{"type":"text","value":".","position":{"start":{"line":909,"column":80,"offset":25867},"end":{"line":909,"column":81,"offset":25868}}}],"position":{"start":{"line":909,"column":3,"offset":25790},"end":{"line":909,"column":81,"offset":25868}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The leaf cluster will continue to try and ping the root cluster, but will not\nbe able to connect. To re-establish the Trusted Cluster relationship, the\nTrusted Cluster has to be created again from the leaf cluster.","position":{"start":{"line":911,"column":3,"offset":25872},"end":{"line":913,"column":65,"offset":26090}}}],"position":{"start":{"line":911,"column":3,"offset":25872},"end":{"line":913,"column":65,"offset":26090}}}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"troubleshooting"},"children":[{"type":"text","value":"Troubleshooting","position":{"start":{"line":917,"column":4,"offset":26110},"end":{"line":917,"column":19,"offset":26125}}}],"position":{"start":{"line":917,"column":1,"offset":26107},"end":{"line":917,"column":19,"offset":26125}}},{"type":"text","value":"\n"},{"type":"element","tagName":"tabs","properties":{},"children":[{"type":"element","tagName":"tabitem","properties":{"scope":"oss,enterprise","label":"Self-Hosted"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"There are three common types of problems Teleport administrators can run into when configuring\ntrust between two clusters:","position":{"start":{"line":921,"column":1,"offset":26194},"end":{"line":922,"column":28,"offset":26316}}}],"position":{"start":{"line":921,"column":1,"offset":26194},"end":{"line":922,"column":28,"offset":26316}}},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"HTTPS configuration","position":{"start":{"line":924,"column":5,"offset":26322},"end":{"line":924,"column":24,"offset":26341}}}],"position":{"start":{"line":924,"column":3,"offset":26320},"end":{"line":924,"column":26,"offset":26343}}},{"type":"text","value":": when the root cluster uses a self-signed or invalid HTTPS certificate.","position":{"start":{"line":924,"column":26,"offset":26343},"end":{"line":924,"column":98,"offset":26415}}}],"position":{"start":{"line":924,"column":1,"offset":26318},"end":{"line":924,"column":98,"offset":26415}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Connectivity problems","position":{"start":{"line":925,"column":5,"offset":26420},"end":{"line":925,"column":26,"offset":26441}}}],"position":{"start":{"line":925,"column":3,"offset":26418},"end":{"line":925,"column":28,"offset":26443}}},{"type":"text","value":": when a leaf cluster does not show up in the output\nof ","position":{"start":{"line":925,"column":28,"offset":26443},"end":{"line":926,"column":6,"offset":26501}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tsh clusters"}],"position":{"start":{"line":926,"column":6,"offset":26501},"end":{"line":926,"column":20,"offset":26515}}},{"type":"text","value":" on the root cluster.","position":{"start":{"line":926,"column":20,"offset":26515},"end":{"line":926,"column":41,"offset":26536}}}],"position":{"start":{"line":925,"column":1,"offset":26416},"end":{"line":926,"column":41,"offset":26536}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Access problems","position":{"start":{"line":927,"column":5,"offset":26541},"end":{"line":927,"column":20,"offset":26556}}}],"position":{"start":{"line":927,"column":3,"offset":26539},"end":{"line":927,"column":22,"offset":26558}}},{"type":"text","value":": when users from the root cluster get \"access denied\" error messages\ntrying to connect to nodes on the leaf cluster.","position":{"start":{"line":927,"column":22,"offset":26558},"end":{"line":928,"column":50,"offset":26677}}}],"position":{"start":{"line":927,"column":1,"offset":26537},"end":{"line":928,"column":50,"offset":26677}}},{"type":"text","value":"\n"}],"position":{"start":{"line":924,"column":1,"offset":26318},"end":{"line":928,"column":50,"offset":26677}}},{"type":"element","tagName":"h3","properties":{"id":"https-configuration"},"children":[{"type":"text","value":"HTTPS configuration","position":{"start":{"line":930,"column":5,"offset":26683},"end":{"line":930,"column":24,"offset":26702}}}],"position":{"start":{"line":930,"column":1,"offset":26679},"end":{"line":930,"column":24,"offset":26702}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If the ","position":{"start":{"line":932,"column":1,"offset":26704},"end":{"line":932,"column":8,"offset":26711}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"web_proxy_addr"}],"position":{"start":{"line":932,"column":8,"offset":26711},"end":{"line":932,"column":24,"offset":26727}}},{"type":"text","value":" endpoint of the root cluster uses a self-signed or\ninvalid HTTPS certificate, you will get an error: \"the trusted cluster uses\nmisconfigured HTTP/TLS certificate\". For ease of testing, the ","position":{"start":{"line":932,"column":24,"offset":26727},"end":{"line":934,"column":63,"offset":26917}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"teleport"}],"position":{"start":{"line":934,"column":63,"offset":26917},"end":{"line":934,"column":73,"offset":26927}}},{"type":"text","value":" daemon\non the leaf cluster can be started with the ","position":{"start":{"line":934,"column":73,"offset":26927},"end":{"line":935,"column":45,"offset":26979}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"--insecure"}],"position":{"start":{"line":935,"column":45,"offset":26979},"end":{"line":935,"column":57,"offset":26991}}},{"type":"text","value":" CLI flag to accept\nself-signed certificates. Make sure to configure HTTPS properly and remove the\ninsecure flag for production use.","position":{"start":{"line":935,"column":57,"offset":26991},"end":{"line":937,"column":34,"offset":27123}}}],"position":{"start":{"line":932,"column":1,"offset":26704},"end":{"line":937,"column":34,"offset":27123}}},{"type":"element","tagName":"h3","properties":{"id":"connectivity-problems"},"children":[{"type":"text","value":"Connectivity problems","position":{"start":{"line":939,"column":5,"offset":27129},"end":{"line":939,"column":26,"offset":27150}}}],"position":{"start":{"line":939,"column":1,"offset":27125},"end":{"line":939,"column":26,"offset":27150}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To troubleshoot connectivity problems, enable verbose output for the Auth\nServers on both clusters. Usually this can be done by adding ","position":{"start":{"line":941,"column":1,"offset":27152},"end":{"line":942,"column":62,"offset":27287}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"--debug"}],"position":{"start":{"line":942,"column":62,"offset":27287},"end":{"line":942,"column":71,"offset":27296}}},{"type":"text","value":" flag to\n","position":{"start":{"line":942,"column":71,"offset":27296},"end":{"line":943,"column":1,"offset":27305}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"teleport start --debug"}],"position":{"start":{"line":943,"column":1,"offset":27305},"end":{"line":943,"column":25,"offset":27329}}},{"type":"text","value":". You can also do this by updating the configuration\nfile for both Auth Servers:","position":{"start":{"line":943,"column":25,"offset":27329},"end":{"line":944,"column":28,"offset":27409}}}],"position":{"start":{"line":941,"column":1,"offset":27152},"end":{"line":944,"column":28,"offset":27409}}},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["hljs","language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["hljs-comment"]},"children":[{"type":"text","value":"# Snippet from /etc/teleport.yaml"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"teleport:"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"log:"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"output:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"stderr"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["hljs-attr"]},"children":[{"type":"text","value":"severity:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["hljs-string"]},"children":[{"type":"text","value":"DEBUG"}]},{"type":"text","value":"\n"}],"position":{"start":{"line":946,"column":1,"offset":27411},"end":{"line":952,"column":4,"offset":27512}}}],"position":{"start":{"line":946,"column":1,"offset":27411},"end":{"line":952,"column":4,"offset":27512}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"On systemd-based distributions, you can watch the log output via:","position":{"start":{"line":954,"column":1,"offset":27514},"end":{"line":954,"column":66,"offset":27579}}}],"position":{"start":{"line":954,"column":1,"offset":27514},"end":{"line":954,"column":66,"offset":27579}}},{"type":"element","tagName":"snippet","properties":{},"children":[{"type":"element","tagName":"command","properties":{},"children":[{"type":"element","tagName":"commandline","properties":{"data-content":"$ "},"children":[{"type":"text","value":"journalctl -fu teleport"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Most of the time you will find out that either a join token is\nmismatched/expired, or the network addresses for ","position":{"start":{"line":960,"column":1,"offset":27620},"end":{"line":961,"column":50,"offset":27732}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tunnel_addr"}],"position":{"start":{"line":961,"column":50,"offset":27732},"end":{"line":961,"column":63,"offset":27745}}},{"type":"text","value":" or\n","position":{"start":{"line":961,"column":63,"offset":27745},"end":{"line":962,"column":1,"offset":27749}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"web_proxy_addr"}],"position":{"start":{"line":962,"column":1,"offset":27749},"end":{"line":962,"column":17,"offset":27765}}},{"type":"text","value":" cannot be reached due to pre-existing firewall rules or\nhow your network security groups are configured on AWS.","position":{"start":{"line":962,"column":17,"offset":27765},"end":{"line":963,"column":56,"offset":27877}}}],"position":{"start":{"line":960,"column":1,"offset":27620},"end":{"line":963,"column":56,"offset":27877}}},{"type":"element","tagName":"h3","properties":{"id":"access-problems"},"children":[{"type":"text","value":"Access problems","position":{"start":{"line":965,"column":5,"offset":27883},"end":{"line":965,"column":20,"offset":27898}}}],"position":{"start":{"line":965,"column":1,"offset":27879},"end":{"line":965,"column":20,"offset":27898}}},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Troubleshooting access denied messages can be challenging. A Teleport administrator\nshould check to see the following:","position":{"start":{"line":967,"column":1,"offset":27900},"end":{"line":968,"column":35,"offset":28018}}}],"position":{"start":{"line":967,"column":1,"offset":27900},"end":{"line":968,"column":35,"offset":28018}}},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Which roles a user is assigned on the root cluster when they retrieve their SSH\ncertificate via ","position":{"start":{"line":970,"column":3,"offset":28022},"end":{"line":971,"column":19,"offset":28120}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tsh login"}],"position":{"start":{"line":971,"column":19,"offset":28120},"end":{"line":971,"column":30,"offset":28131}}},{"type":"text","value":". You can inspect the retrieved certificate with the\n","position":{"start":{"line":971,"column":30,"offset":28131},"end":{"line":972,"column":1,"offset":28184}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tsh status"}],"position":{"start":{"line":972,"column":3,"offset":28186},"end":{"line":972,"column":15,"offset":28198}}},{"type":"text","value":" command on the client-side.","position":{"start":{"line":972,"column":15,"offset":28198},"end":{"line":972,"column":43,"offset":28226}}}],"position":{"start":{"line":970,"column":1,"offset":28020},"end":{"line":972,"column":43,"offset":28226}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Which roles a user is assigned on the leaf cluster when the role mapping takes\nplace. The role mapping result is reflected in the Teleport audit log. By\ndefault, it is stored in ","position":{"start":{"line":973,"column":3,"offset":28229},"end":{"line":975,"column":28,"offset":28411}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/var/lib/teleport/log"}],"position":{"start":{"line":975,"column":28,"offset":28411},"end":{"line":975,"column":51,"offset":28434}}},{"type":"text","value":" on the Auth Server of a\ncluster. Check the audit log messages on both clusters to get answers for the\nquestions above.","position":{"start":{"line":975,"column":51,"offset":28434},"end":{"line":977,"column":19,"offset":28557}}}],"position":{"start":{"line":973,"column":1,"offset":28227},"end":{"line":977,"column":19,"offset":28557}}},{"type":"text","value":"\n"}],"position":{"start":{"line":970,"column":1,"offset":28020},"end":{"line":977,"column":19,"offset":28557}}}]},{"type":"element","tagName":"tabitem","properties":{"scope":"cloud","label":"Teleport Cloud"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Troubleshooting \"access denied\" messages can be challenging. A Teleport administrator\nshould check to see the following:","position":{"start":{"line":980,"column":1,"offset":28620},"end":{"line":981,"column":35,"offset":28740}}}],"position":{"start":{"line":980,"column":1,"offset":28620},"end":{"line":981,"column":35,"offset":28740}}},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Which roles a user is assigned on the root cluster when they retrieve their SSH\ncertificate via ","position":{"start":{"line":983,"column":3,"offset":28744},"end":{"line":984,"column":19,"offset":28842}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tsh login"}],"position":{"start":{"line":984,"column":19,"offset":28842},"end":{"line":984,"column":30,"offset":28853}}},{"type":"text","value":". You can inspect the retrieved certificate with the\n","position":{"start":{"line":984,"column":30,"offset":28853},"end":{"line":985,"column":1,"offset":28906}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tsh status"}],"position":{"start":{"line":985,"column":3,"offset":28908},"end":{"line":985,"column":15,"offset":28920}}},{"type":"text","value":" command on the client-side.","position":{"start":{"line":985,"column":15,"offset":28920},"end":{"line":985,"column":43,"offset":28948}}}],"position":{"start":{"line":983,"column":1,"offset":28742},"end":{"line":985,"column":43,"offset":28948}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Which roles a user is assigned on the leaf cluster when the role mapping takes\nplace. The role mapping result is reflected in the Teleport audit log, which\nyou can access via the Teleport Web UI.","position":{"start":{"line":986,"column":3,"offset":28951},"end":{"line":988,"column":42,"offset":29150}}}],"position":{"start":{"line":986,"column":1,"offset":28949},"end":{"line":988,"column":42,"offset":29150}}},{"type":"text","value":"\n"}],"position":{"start":{"line":983,"column":1,"offset":28742},"end":{"line":988,"column":42,"offset":29150}}}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"further-reading"},"children":[{"type":"text","value":"Further reading","position":{"start":{"line":992,"column":4,"offset":29174},"end":{"line":992,"column":19,"offset":29189}}}],"position":{"start":{"line":992,"column":1,"offset":29171},"end":{"line":992,"column":19,"offset":29189}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Read more about how Trusted Clusters fit into Teleport's overall architecture:\n","position":{"start":{"line":993,"column":3,"offset":29192},"end":{"line":994,"column":1,"offset":29271}}},{"type":"element","tagName":"a","properties":{"href":"../../../architecture/trustedclusters/"},"children":[{"type":"text","value":"Architecture Introduction","position":{"start":{"line":994,"column":4,"offset":29274},"end":{"line":994,"column":29,"offset":29299}}}],"position":{"start":{"line":994,"column":3,"offset":29273},"end":{"line":994,"column":70,"offset":29340}}},{"type":"text","value":".","position":{"start":{"line":994,"column":70,"offset":29340},"end":{"line":994,"column":71,"offset":29341}}}],"position":{"start":{"line":993,"column":1,"offset":29190},"end":{"line":994,"column":71,"offset":29341}}},{"type":"text","value":"\n"}],"position":{"start":{"line":993,"column":1,"offset":29190},"end":{"line":994,"column":71,"offset":29341}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":996,"column":1,"offset":29343}}},"tableOfContents":[{"rank":2,"id":"prerequisites","title":"Prerequisites"},{"rank":2,"id":"step-15-prepare-your-environment","title":"Step 1/5. Prepare your environment"},{"rank":2,"id":"step-25-establish-trust-between-clusters","title":"Step 2/5. Establish trust between clusters"},{"rank":2,"id":"step-35-manage-access-to-your-trusted-cluster","title":"Step 3/5. Manage access to your Trusted Cluster"},{"rank":2,"id":"step-45-access-a-node-in-your-remote-cluster","title":"Step 4/5. Access a Node in your remote cluster"},{"rank":2,"id":"step-55-remove-trust-between-your-clusters","title":"Step 5/5. Remove trust between your clusters"},{"rank":2,"id":"troubleshooting","title":"Troubleshooting"},{"rank":2,"id":"further-reading","title":"Further reading"}]},"__N_SSG":true},"page":"/[[...slug]]","query":{"slug":["management","admin","trustedclusters"]},"buildId":"KbTcN-oI1hAAwVIspZTnm","assetPrefix":"/docs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>